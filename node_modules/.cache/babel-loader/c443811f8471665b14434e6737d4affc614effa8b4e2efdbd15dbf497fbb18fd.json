{"ast":null,"code":"var _jsxFileName = \"/Users/tgira1018/Documents/GitHub/boardmate/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChessTrainingApp = () => {\n  _s();\n  // Add mobile-specific CSS\n  useEffect(() => {\n    // Add mobile viewport and chess font optimization\n    const style = document.createElement('style');\n    style.textContent = `\n      @import url('https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap');\n\n      .chess-piece {\n        font-family: 'Chess Merida', 'Chess Alpha', 'Segoe UI Symbol', 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', monospace !important;\n        font-feature-settings: \"liga\" 1, \"calt\" 1;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-variant-emoji: text;\n        text-rendering: optimizeLegibility;\n        font-size: inherit !important;\n        line-height: 1 !important;\n        vertical-align: baseline !important;\n      }\n\n      body {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        overflow-x: hidden;\n      }\n    `;\n    document.head.appendChild(style);\n\n    // Ensure viewport is set for mobile\n    let viewport = document.querySelector('meta[name=\"viewport\"]');\n    if (!viewport) {\n      viewport = document.createElement('meta');\n      viewport.name = 'viewport';\n      viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';\n      document.head.appendChild(viewport);\n    }\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({\n    correct: 0,\n    total: 0\n  });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"c7-c5\"],\n        \"e2-e4,c7-c5\": [\"g1-f3\"],\n        \"e2-e4,c7-c5,g1-f3\": [\"g7-g6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6\": [\"d2-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4\": [\"c5-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4\": [\"f3-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4\": [\"f8-g7\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7\": [\"c2-c4\", \"b1-c3\", \"f2-f3\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,c2-c4\": [\"b8-c6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,b1-c3\": [\"b8-c6\"]\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\", \"g8-f6\", \"d8-h4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"d4-b5\", \"d4-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\", \"b1-c3\"]\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\", \"g8-f6\", \"f7-f5\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\", \"e1-g1\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\", \"c2-c3\"]\n      }\n    }\n  };\n\n  // Piece Unicode symbols - using solid symbols for consistency\n  const pieceSymbols = {\n    'K': '♚',\n    'Q': '♛',\n    'R': '♜',\n    'B': '♝',\n    'N': '♞',\n    'P': '♟',\n    'k': '♚',\n    'q': '♛',\n    'r': '♜',\n    'b': '♝',\n    'n': '♞',\n    'p': '♟'\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    var _openingDatabases$tra;\n    if (trainingMode && ((_openingDatabases$tra = openingDatabases[trainingMode]) === null || _openingDatabases$tra === void 0 ? void 0 : _openingDatabases$tra.color) === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n  const parseSquareName = square => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n  const isPieceWhite = piece => piece && piece === piece.toUpperCase();\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'n':\n        return rowDiff === 2 && colDiff === 1 || rowDiff === 1 && colDiff === 2;\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'k':\n        return rowDiff <= 1 && colDiff <= 1;\n      default:\n        return false;\n    }\n  };\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n    return false;\n  };\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n    console.log('Updated move history:', updatedMoveHistory);\n    return {\n      moveNotation,\n      updatedMoveHistory\n    };\n  };\n  const makeOpponentMove = currentMoveHistory => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n    const opening = openingDatabases[trainingMode];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = opening.moves[nextMoveKey];\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n          return newBoard;\n        });\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = opening.moves[moveKey] || [];\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(opening.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n    if (expectedMoves.includes(userMove)) {\n      setFeedback('✓ Correct move!');\n      setScore(prev => ({\n        correct: prev.correct + 1,\n        total: prev.total + 1\n      }));\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: {\n          ...score\n        },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(`✗ Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({\n        correct: prev.correct,\n        total: prev.total + 1\n      }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        // Convert to display coordinates\n        const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n        const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n        setShowHint({\n          from: {\n            row: fromDisplayRow,\n            col: fromDisplayCol\n          },\n          to: {\n            row: toDisplayRow,\n            col: toDisplayCol\n          },\n          notation: bestMove\n        });\n        console.log('Setting hint arrow:', {\n          from: {\n            row: fromDisplayRow,\n            col: fromDisplayCol\n          },\n          to: {\n            row: toDisplayRow,\n            col: toDisplayCol\n          },\n          notation: bestMove\n        });\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    var _openingDatabases$tra2, _e$touches$, _e$touches$2;\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra2 = openingDatabases[trainingMode]) === null || _openingDatabases$tra2 === void 0 ? void 0 : _openingDatabases$tra2.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const clientX = e.clientX || e.touches && ((_e$touches$ = e.touches[0]) === null || _e$touches$ === void 0 ? void 0 : _e$touches$.clientX) || 0;\n    const clientY = e.clientY || e.touches && ((_e$touches$2 = e.touches[0]) === null || _e$touches$2 === void 0 ? void 0 : _e$touches$2.clientY) || 0;\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: clientX - rect.left - rect.width / 2,\n      y: clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n  const handleTouchStart = (e, displayRow, displayCol) => {\n    e.preventDefault(); // Prevent scrolling\n    handleMouseDown(e, displayRow, displayCol);\n  };\n  const handleMouseMove = e => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n  const handleTouchMove = e => {\n    if (!draggedPiece) return;\n    e.preventDefault(); // Prevent scrolling\n    handleMouseMove(e);\n  };\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    var _openingDatabases$tra3;\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && ((_openingDatabases$tra3 = openingDatabases[trainingMode]) === null || _openingDatabases$tra3 === void 0 ? void 0 : _openingDatabases$tra3.color) === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n    const {\n      fromRow,\n      fromCol\n    } = draggedPiece;\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const {\n        moveNotation,\n        updatedMoveHistory\n      } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n  const handleTouchEnd = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // For touch, we need to find what element we're over\n    if (e.changedTouches && e.changedTouches[0]) {\n      var _targetElement$datase2;\n      const touch = e.changedTouches[0];\n      const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);\n\n      // Find the chess square element\n      let targetElement = elementBelow;\n      while (targetElement && !((_targetElement$datase = targetElement.dataset) !== null && _targetElement$datase !== void 0 && _targetElement$datase.square)) {\n        var _targetElement$datase;\n        targetElement = targetElement.parentElement;\n      }\n      if (targetElement && (_targetElement$datase2 = targetElement.dataset) !== null && _targetElement$datase2 !== void 0 && _targetElement$datase2.square) {\n        const [touchRow, touchCol] = targetElement.dataset.square.split(',').map(Number);\n        handleMouseUp(e, touchRow, touchCol);\n        return;\n      }\n    }\n\n    // Fallback to provided coordinates\n    handleMouseUp(e, targetDisplayRow, targetDisplayCol);\n  };\n  const handleSquareClick = (displayRow, displayCol) => {\n    var _openingDatabases$tra4;\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra4 = openingDatabases[trainingMode]) === null || _openingDatabases$tra4 === void 0 ? void 0 : _openingDatabases$tra4.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const {\n          moveNotation,\n          updatedMoveHistory\n        } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n  const startTraining = mode => {\n    console.log('Starting training for mode:', mode);\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = e => {\n      if (draggedPiece) {\n        var _e$touches$3, _e$touches$4;\n        const clientX = e.clientX || e.touches && ((_e$touches$3 = e.touches[0]) === null || _e$touches$3 === void 0 ? void 0 : _e$touches$3.clientX) || 0;\n        const clientY = e.clientY || e.touches && ((_e$touches$4 = e.touches[0]) === null || _e$touches$4 === void 0 ? void 0 : _e$touches$4.clientY) || 0;\n        setDragOffset({\n          x: clientX,\n          y: clientY\n        });\n      }\n    };\n    const handleGlobalTouchMove = e => {\n      if (draggedPiece && e.touches && e.touches[0]) {\n        e.preventDefault(); // Prevent scrolling while dragging\n        setDragOffset({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        });\n      }\n    };\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n    const handleGlobalTouchEnd = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    // Mouse events\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n\n    // Touch events\n    document.addEventListener('touchmove', handleGlobalTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', handleGlobalTouchEnd);\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n      document.removeEventListener('touchmove', handleGlobalTouchMove);\n      document.removeEventListener('touchend', handleGlobalTouchEnd);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n  if (gameMode === 'menu') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.header,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: styles.title,\n            children: \"Chess Opening Trainer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.subtitle,\n            children: \"Master your favorite openings against AI opposition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 956,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.grid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('sicilianDragon'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#dc2626'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Target, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 962,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Sicilian Dragon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 961,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Practice the Accelerated Dragon as Black. White moves automatically - you learn the best responses!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 965,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#dc2626'\n              },\n              children: \"Train as Black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 966,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 960,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGame'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#2563eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 973,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Game\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 972,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Learn the Scotch Game as White. Black moves automatically - focus on mastering your attacking lines!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#2563eb'\n              },\n              children: \"Train as White\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGambit'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#16a34a'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 984,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Gambit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 985,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 983,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Master the Scotch Gambit as White. Black responds automatically - learn the aggressive sacrificial lines!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#16a34a'\n              },\n              children: \"Train as White\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 988,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 982,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 959,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'white',\n            borderRadius: '12px',\n            padding: '30px',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.5rem',\n              marginBottom: '20px',\n              color: '#374151'\n            },\n            children: \"How it works\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 995,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83C\\uDFAF Focus on Your Side\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 998,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"The opponent moves automatically based on opening theory. You only need to learn your moves!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 999,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 997,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83E\\uDD16 Smart AI Responses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1002,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"AI plays realistic variations from grandmaster games. Learn to handle different responses.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1003,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83D\\uDCC8 Immediate Feedback\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1006,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"Get instant feedback on your moves. Make a mistake? Just click \\\"Undo\\\" to try again!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1007,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1005,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 996,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '20px',\n              padding: '15px',\n              backgroundColor: '#f0f9ff',\n              borderRadius: '8px',\n              border: '1px solid #0ea5e9'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#0c4a6e',\n                fontSize: '0.9rem',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDCA1 Tip:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1012,\n                columnNumber: 17\n              }, this), \" Wait for the opponent to move automatically, then make your best move. The AI will show you when it's your turn!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1010,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 994,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 953,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 952,\n      columnNumber: 7\n    }, this);\n  }\n  const opening = openingDatabases[trainingMode];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.navButton,\n          onClick: backToMenu,\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            size: 20,\n            style: {\n              marginRight: '5px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 13\n          }, this), \"Back to Menu\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1027,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.gameTitle,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              fontSize: '2rem',\n              color: '#92400e',\n              marginBottom: '5px'\n            },\n            children: opening.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#a16207'\n            },\n            children: [\"Playing as \", opening.color]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              ...styles.navButton,\n              opacity: undoStack.length > 0 ? 1 : 0.5,\n              cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n            },\n            onClick: undoStack.length > 0 ? undoLastMove : undefined,\n            disabled: undoStack.length === 0,\n            children: [/*#__PURE__*/_jsxDEV(Undo2, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1049,\n              columnNumber: 15\n            }, this), \"Undo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1040,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.navButton,\n            onClick: resetGame,\n            children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1054,\n              columnNumber: 15\n            }, this), \"Reset\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1053,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1039,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1026,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameLayout,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.boardContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.boardWrapper,\n            children: [trainingMode && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '10px',\n                textAlign: 'center',\n                color: needsReplay ? '#dc2626' : '#a16207',\n                fontSize: '0.9rem',\n                fontWeight: '600',\n                padding: needsReplay ? '8px 16px' : '0',\n                backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                borderRadius: needsReplay ? '8px' : '0',\n                border: needsReplay ? '2px solid #dc2626' : 'none'\n              },\n              children: needsReplay ? '⚠️ Wrong move! Follow the yellow arrow to make the correct move.' : openingDatabases[trainingMode].color === 'black' ? '♟ Playing as Black (Black pieces at bottom)' : '♙ Playing as White (White pieces at bottom)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1065,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.coordinatesContainer,\n              children: [Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra5;\n                const file = trainingMode && ((_openingDatabases$tra5 = openingDatabases[trainingMode]) === null || _openingDatabases$tra5 === void 0 ? void 0 : _openingDatabases$tra5.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 1,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `top-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1092,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra6;\n                const rank = trainingMode && ((_openingDatabases$tra6 = openingDatabases[trainingMode]) === null || _openingDatabases$tra6 === void 0 ? void 0 : _openingDatabases$tra6.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 1,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `left-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1108,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.board,\n                onMouseMove: handleMouseMove,\n                onTouchMove: handleTouchMove,\n                children: [board.flatMap((row, rowIndex) => row.map((piece, colIndex) => {\n                  // Get display coordinates (potentially flipped)\n                  const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                  const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                  const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                  const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                  // Chess.com style colors\n                  let backgroundColor;\n                  if (isSelected) {\n                    backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                  } else {\n                    backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                  }\n\n                  // Enhanced piece styling - solid pieces with consistent appearance\n                  const pieceColor = isPieceWhite(piece) ? '#ffffff' : '#000000';\n                  const pieceBackgroundColor = isPieceWhite(piece) ? 'rgba(0, 0, 0, 0.1)' : 'rgba(255, 255, 255, 0.1)';\n                  const textShadow = isPieceWhite(piece) ? '2px 2px 4px rgba(0,0,0,0.9), 0 0 3px rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.6), 1px -1px 0 rgba(0,0,0,0.6), -1px 1px 0 rgba(0,0,0,0.6), 1px 1px 0 rgba(0,0,0,0.6)' : '2px 2px 4px rgba(255,255,255,0.9), 0 0 3px rgba(255,255,255,0.8), -1px -1px 0 rgba(255,255,255,0.6), 1px -1px 0 rgba(255,255,255,0.6), -1px 1px 0 rgba(255,255,255,0.6), 1px 1px 0 rgba(255,255,255,0.6)';\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    \"data-square\": `${displayRow},${displayCol}`,\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: isMobile ? '2.8rem' : '3.8rem',\n                      cursor: piece ? 'pointer' : 'default',\n                      transition: 'background-color 0.15s ease, border 0.15s ease',\n                      userSelect: 'none',\n                      fontWeight: 'bold',\n                      width: '100%',\n                      height: '100%',\n                      minWidth: 0,\n                      minHeight: 0,\n                      boxSizing: 'border-box',\n                      backgroundColor,\n                      border: isSelected ? '2px solid #f39c12' : 'none',\n                      color: pieceColor,\n                      textShadow: piece ? textShadow : 'none',\n                      // Position this square at its display coordinates\n                      gridColumn: displayCol + 1,\n                      gridRow: displayRow + 1,\n                      opacity: isDragging ? 0.3 : 1,\n                      // Mobile optimization\n                      WebkitTouchCallout: 'none',\n                      WebkitUserSelect: 'none',\n                      touchAction: 'none'\n                    },\n                    onMouseDown: e => handleMouseDown(e, displayRow, displayCol),\n                    onMouseUp: e => handleMouseUp(e, displayRow, displayCol),\n                    onTouchStart: e => handleTouchStart(e, displayRow, displayCol),\n                    onTouchEnd: e => handleTouchEnd(e, displayRow, displayCol),\n                    onClick: () => handleSquareClick(displayRow, displayCol),\n                    onTouchCancel: () => {\n                      setDraggedPiece(null);\n                      setSelectedSquare(null);\n                    },\n                    onMouseEnter: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                      }\n                    },\n                    onMouseLeave: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                      }\n                    },\n                    children: piece && !isDragging && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"chess-piece\",\n                      style: {\n                        backgroundColor: piece ? pieceBackgroundColor : 'transparent',\n                        borderRadius: '50%',\n                        padding: '2px',\n                        lineHeight: '1',\n                        display: 'inline-block'\n                      },\n                      children: pieceSymbols[piece]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1197,\n                      columnNumber: 29\n                    }, this)\n                  }, `${rowIndex}-${colIndex}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1146,\n                    columnNumber: 25\n                  }, this);\n                })), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    pointerEvents: 'none',\n                    zIndex: 10\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    style: {\n                      width: '100%',\n                      height: '100%'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                      children: /*#__PURE__*/_jsxDEV(\"marker\", {\n                        id: \"arrowhead\",\n                        markerWidth: \"10\",\n                        markerHeight: \"7\",\n                        refX: \"9\",\n                        refY: \"3.5\",\n                        orient: \"auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                          points: \"0 0, 10 3.5, 0 7\",\n                          fill: \"#ffeb3b\",\n                          stroke: \"#f39c12\",\n                          strokeWidth: \"1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1230,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1228,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1227,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: `${(showHint.from.col + 0.5) * 12.5}%`,\n                      y1: `${(showHint.from.row + 0.5) * 12.5}%`,\n                      x2: `${(showHint.to.col + 0.5) * 12.5}%`,\n                      y2: `${(showHint.to.row + 0.5) * 12.5}%`,\n                      stroke: \"#ffeb3b\",\n                      strokeWidth: \"6\",\n                      markerEnd: \"url(#arrowhead)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1233,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1226,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1217,\n                  columnNumber: 21\n                }, this), draggedPiece && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'fixed',\n                    pointerEvents: 'none',\n                    fontSize: isMobile ? '2.8rem' : '3.8rem',\n                    fontWeight: 'bold',\n                    zIndex: 1000,\n                    left: `${dragOffset.x}px`,\n                    top: `${dragOffset.y}px`,\n                    transform: 'translate(-50%, -50%)'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chess-piece\",\n                    style: {\n                      color: isPieceWhite(draggedPiece.piece) ? '#ffffff' : '#000000',\n                      textShadow: isPieceWhite(draggedPiece.piece) ? '2px 2px 4px rgba(0,0,0,0.9), 0 0 3px rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.6), 1px -1px 0 rgba(0,0,0,0.6), -1px 1px 0 rgba(0,0,0,0.6), 1px 1px 0 rgba(0,0,0,0.6)' : '2px 2px 4px rgba(255,255,255,0.9), 0 0 3px rgba(255,255,255,0.8), -1px -1px 0 rgba(255,255,255,0.6), 1px -1px 0 rgba(255,255,255,0.6), -1px 1px 0 rgba(255,255,255,0.6), 1px 1px 0 rgba(255,255,255,0.6)',\n                      backgroundColor: isPieceWhite(draggedPiece.piece) ? 'rgba(0, 0, 0, 0.1)' : 'rgba(255, 255, 255, 0.1)',\n                      borderRadius: '50%',\n                      padding: '2px',\n                      lineHeight: '1',\n                      display: 'inline-block'\n                    },\n                    children: pieceSymbols[draggedPiece.piece]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1258,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1248,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 17\n              }, this), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra7;\n                const rank = trainingMode && ((_openingDatabases$tra7 = openingDatabases[trainingMode]) === null || _openingDatabases$tra7 === void 0 ? void 0 : _openingDatabases$tra7.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 10,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `right-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1282,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra8;\n                const file = trainingMode && ((_openingDatabases$tra8 = openingDatabases[trainingMode]) === null || _openingDatabases$tra8 === void 0 ? void 0 : _openingDatabases$tra8.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 10,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `bottom-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1300,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1085,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1062,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.sidebar,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Game Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1317,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginBottom: '8px',\n                color: '#6b7280'\n              },\n              children: [\"Current turn: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  textTransform: 'capitalize',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: currentPlayer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1319,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#6b7280'\n              },\n              children: [\"Move: \", Math.ceil(moveHistory.length / 2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: '8px',\n                fontWeight: '600',\n                color: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? '#16a34a' : '#ea580c'\n              },\n              children: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? 'Your turn!' : 'Opponent thinking...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1322,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: 'bold',\n                color: '#374151',\n                marginBottom: '8px'\n              },\n              children: [score.correct, \"/\", score.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.9rem',\n                color: '#6b7280'\n              },\n              children: score.total > 0 ? `${Math.round(score.correct / score.total * 100)}% accuracy` : 'No moves yet'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1336,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1331,\n            columnNumber: 13\n          }, this), feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderRadius: '12px',\n              padding: '20px',\n              fontWeight: '600',\n              backgroundColor: feedback.includes('✓') ? '#dcfce7' : feedback.includes('✗') ? '#fef2f2' : '#f0f9ff',\n              color: feedback.includes('✓') ? '#166534' : feedback.includes('✗') ? '#991b1b' : '#1e40af',\n              border: feedback.includes('✓') ? '2px solid #22c55e' : feedback.includes('✗') ? '2px solid #ef4444' : '2px solid #3b82f6',\n              transform: feedback.includes('✗') ? 'scale(1.02)' : 'scale(1)',\n              transition: 'all 0.3s ease'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0\n              },\n              children: feedback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1352,\n              columnNumber: 17\n            }, this), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '15px',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: '0.9rem',\n                  color: '#b45309',\n                  backgroundColor: '#fef3c7',\n                  padding: '8px 12px',\n                  borderRadius: '6px',\n                  border: '1px solid #fbbf24'\n                },\n                children: [\"\\uD83D\\uDCA1 Hint: Move from \", showHint.notation.split('-')[0], \" to \", showHint.notation.split('-')[1]]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1355,\n                columnNumber: 21\n              }, this), undoStack.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  padding: '8px 16px',\n                  backgroundColor: '#3b82f6',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '5px'\n                },\n                onClick: undoLastMove,\n                children: [/*#__PURE__*/_jsxDEV(Undo2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1384,\n                  columnNumber: 25\n                }, this), \"Try Again\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1367,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1354,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1342,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Move History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '200px',\n                overflowY: 'auto',\n                fontSize: '0.9rem'\n              },\n              children: moveHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#9ca3af',\n                  fontStyle: 'italic'\n                },\n                children: \"No moves yet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1397,\n                columnNumber: 19\n              }, this) : moveHistory.map((move, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  marginBottom: '4px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    width: '30px',\n                    color: '#9ca3af'\n                  },\n                  children: [Math.ceil((index + 1) / 2), \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1401,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: index % 2 === 0 ? '#374151' : '#6b7280'\n                  },\n                  children: move\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1402,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1400,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1395,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1060,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1025,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1024,\n    columnNumber: 5\n  }, this);\n};\n_s(ChessTrainingApp, \"VQHUuM285n9ev7g4Y5kUyda1BhU=\");\n_c = ChessTrainingApp;\nexport default ChessTrainingApp;\nvar _c;\n$RefreshReg$(_c, \"ChessTrainingApp\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ChevronLeft","RotateCcw","Play","BookOpen","Target","Undo2","jsxDEV","_jsxDEV","ChessTrainingApp","_s","style","document","createElement","textContent","head","appendChild","viewport","querySelector","name","content","removeChild","getInitialBoard","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","board","setBoard","selectedSquare","setSelectedSquare","currentPlayer","setCurrentPlayer","moveHistory","setMoveHistory","gameMode","setGameMode","trainingMode","setTrainingMode","feedback","setFeedback","score","setScore","correct","total","draggedPiece","setDraggedPiece","dragOffset","setDragOffset","x","y","showHint","setShowHint","needsReplay","setNeedsReplay","undoStack","setUndoStack","timeoutRefs","clearAllTimeouts","current","forEach","clearTimeout","addTimeout","callback","delay","timeoutId","setTimeout","filter","id","push","openingDatabases","sicilianDragon","color","moves","scotchGame","scotchGambit","pieceSymbols","getDisplayCoordinates","row","col","_openingDatabases$tra","getSquareName","String","fromCharCode","parseSquareName","square","charCodeAt","parseInt","isPieceWhite","piece","toUpperCase","isValidMove","fromRow","fromCol","toRow","toCol","targetPiece","rowDiff","Math","abs","colDiff","piece_type","toLowerCase","direction","startRow","isPathBlocked","rowDir","colDir","currentRow","currentCol","makeMove","newBoard","map","console","log","moveNotation","updatedMoveHistory","prevPlayer","makeOpponentMove","currentMoveHistory","opening","nextMoveKey","join","opponentMoves","length","opponentMove","floor","random","fromSquare","toSquare","split","currentBoard","prevHistory","updatedHistory","undoLastMove","lastState","prevStack","slice","checkMove","userMove","moveKey","expectedMoves","Object","keys","includes","prev","expectedMovesText","bestMove","fromDisplayRow","fromDisplayCol","toDisplayRow","toDisplayCol","from","to","notation","handleMouseDown","e","displayRow","displayCol","_openingDatabases$tra2","_e$touches$","_e$touches$2","isUserTurn","preventDefault","rect","currentTarget","getBoundingClientRect","clientX","touches","clientY","left","width","top","height","handleTouchStart","handleMouseMove","handleTouchMove","handleMouseUp","targetDisplayRow","targetDisplayCol","_openingDatabases$tra3","targetRow","targetCol","handleTouchEnd","changedTouches","_targetElement$datase2","touch","elementBelow","elementFromPoint","targetElement","_targetElement$datase","dataset","parentElement","touchRow","touchCol","Number","handleSquareClick","_openingDatabases$tra4","fromPiece","startTraining","mode","freshBoard","firstMove","resetGame","backToMenu","handleGlobalMouseMove","_e$touches$3","_e$touches$4","handleGlobalTouchMove","handleGlobalMouseUp","handleGlobalTouchEnd","passive","styles","container","minHeight","background","padding","fontFamily","wrapper","maxWidth","margin","header","textAlign","marginBottom","title","fontSize","fontWeight","subtitle","grid","display","gridTemplateColumns","gap","card","borderRadius","boxShadow","cursor","transition","cardHeader","alignItems","cardText","lineHeight","button","border","gameHeader","justifyContent","flexWrap","navButton","gameTitle","gameLayout","boardContainer","flexDirection","boardWrapper","position","coordinatesContainer","gridTemplateRows","overflow","gridColumn","gridRow","userSelect","minWidth","boxSizing","sidebar","infoCard","infoTitle","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","marginLeft","backgroundColor","marginTop","marginRight","opacity","undefined","disabled","Array","_","i","_openingDatabases$tra5","file","_openingDatabases$tra6","rank","onMouseMove","onTouchMove","flatMap","rowIndex","colIndex","isLightSquare","isSelected","isDragging","pieceColor","pieceBackgroundColor","textShadow","WebkitTouchCallout","WebkitUserSelect","touchAction","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","onMouseEnter","target","onMouseLeave","className","pointerEvents","zIndex","markerWidth","markerHeight","refX","refY","orient","points","fill","stroke","strokeWidth","x1","y1","x2","y2","markerEnd","transform","_openingDatabases$tra7","_openingDatabases$tra8","textTransform","ceil","round","maxHeight","overflowY","fontStyle","move","index","_c","$RefreshReg$"],"sources":["/Users/tgira1018/Documents/GitHub/boardmate/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\n\nconst ChessTrainingApp = () => {\n  // Add mobile-specific CSS\n  useEffect(() => {\n    // Add mobile viewport and chess font optimization\n    const style = document.createElement('style');\n    style.textContent = `\n      @import url('https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap');\n\n      .chess-piece {\n        font-family: 'Chess Merida', 'Chess Alpha', 'Segoe UI Symbol', 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', monospace !important;\n        font-feature-settings: \"liga\" 1, \"calt\" 1;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-variant-emoji: text;\n        text-rendering: optimizeLegibility;\n        font-size: inherit !important;\n        line-height: 1 !important;\n        vertical-align: baseline !important;\n      }\n\n      body {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        overflow-x: hidden;\n      }\n    `;\n    document.head.appendChild(style);\n\n    // Ensure viewport is set for mobile\n    let viewport = document.querySelector('meta[name=\"viewport\"]');\n    if (!viewport) {\n      viewport = document.createElement('meta');\n      viewport.name = 'viewport';\n      viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';\n      document.head.appendChild(viewport);\n    }\n\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [\n    ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],\n    ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n    ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']\n  ];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({ correct: 0, total: 0 });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"c7-c5\"],\n        \"e2-e4,c7-c5\": [\"g1-f3\"],\n        \"e2-e4,c7-c5,g1-f3\": [\"g7-g6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6\": [\"d2-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4\": [\"c5-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4\": [\"f3-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4\": [\"f8-g7\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7\": [\"c2-c4\", \"b1-c3\", \"f2-f3\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,c2-c4\": [\"b8-c6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,b1-c3\": [\"b8-c6\"],\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\", \"g8-f6\", \"d8-h4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"d4-b5\", \"d4-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\", \"b1-c3\"],\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\", \"g8-f6\", \"f7-f5\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\", \"e1-g1\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\", \"c2-c3\"],\n      }\n    }\n  };\n\n  // Piece Unicode symbols - using solid symbols for consistency\n  const pieceSymbols = {\n    'K': '♚', 'Q': '♛', 'R': '♜', 'B': '♝', 'N': '♞', 'P': '♟',\n    'k': '♚', 'q': '♛', 'r': '♜', 'b': '♝', 'n': '♞', 'p': '♟'\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n\n  const parseSquareName = (square) => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n\n  const isPieceWhite = (piece) => piece && piece === piece.toUpperCase();\n\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'n':\n        return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);\n\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'k':\n        return rowDiff <= 1 && colDiff <= 1;\n\n      default:\n        return false;\n    }\n  };\n\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n\n    return false;\n  };\n\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n\n    console.log('Updated move history:', updatedMoveHistory);\n\n    return { moveNotation, updatedMoveHistory };\n  };\n\n  const makeOpponentMove = (currentMoveHistory) => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n\n    const opening = openingDatabases[trainingMode];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = opening.moves[nextMoveKey];\n\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n\n          return newBoard;\n        });\n\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = opening.moves[moveKey] || [];\n\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(opening.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n\n    if (expectedMoves.includes(userMove)) {\n      setFeedback('✓ Correct move!');\n      setScore(prev => ({ correct: prev.correct + 1, total: prev.total + 1 }));\n\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: { ...score },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(`✗ Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({ correct: prev.correct, total: prev.total + 1 }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        // Convert to display coordinates\n        const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n        const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n\n        setShowHint({\n          from: { row: fromDisplayRow, col: fromDisplayCol },\n          to: { row: toDisplayRow, col: toDisplayCol },\n          notation: bestMove\n        });\n\n        console.log('Setting hint arrow:', {\n          from: { row: fromDisplayRow, col: fromDisplayCol },\n          to: { row: toDisplayRow, col: toDisplayCol },\n          notation: bestMove\n        });\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const clientX = e.clientX || (e.touches && e.touches[0]?.clientX) || 0;\n    const clientY = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;\n\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: clientX - rect.left - rect.width / 2,\n      y: clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n\n  const handleTouchStart = (e, displayRow, displayCol) => {\n    e.preventDefault(); // Prevent scrolling\n    handleMouseDown(e, displayRow, displayCol);\n  };\n\n  const handleMouseMove = (e) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n\n  const handleTouchMove = (e) => {\n    if (!draggedPiece) return;\n    e.preventDefault(); // Prevent scrolling\n    handleMouseMove(e);\n  };\n\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n\n    const { fromRow, fromCol } = draggedPiece;\n\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n\n  const handleTouchEnd = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // For touch, we need to find what element we're over\n    if (e.changedTouches && e.changedTouches[0]) {\n      const touch = e.changedTouches[0];\n      const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);\n\n      // Find the chess square element\n      let targetElement = elementBelow;\n      while (targetElement && !targetElement.dataset?.square) {\n        targetElement = targetElement.parentElement;\n      }\n\n      if (targetElement && targetElement.dataset?.square) {\n        const [touchRow, touchCol] = targetElement.dataset.square.split(',').map(Number);\n        handleMouseUp(e, touchRow, touchCol);\n        return;\n      }\n    }\n\n    // Fallback to provided coordinates\n    handleMouseUp(e, targetDisplayRow, targetDisplayCol);\n  };\n\n  const handleSquareClick = (displayRow, displayCol) => {\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n\n  const startTraining = (mode) => {\n    console.log('Starting training for mode:', mode);\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({ correct: 0, total: 0 });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({ correct: 0, total: 0 });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({ correct: 0, total: 0 });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = (e) => {\n      if (draggedPiece) {\n        const clientX = e.clientX || (e.touches && e.touches[0]?.clientX) || 0;\n        const clientY = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;\n        setDragOffset({\n          x: clientX,\n          y: clientY\n        });\n      }\n    };\n\n    const handleGlobalTouchMove = (e) => {\n      if (draggedPiece && e.touches && e.touches[0]) {\n        e.preventDefault(); // Prevent scrolling while dragging\n        setDragOffset({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        });\n      }\n    };\n\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    const handleGlobalTouchEnd = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    // Mouse events\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n\n    // Touch events\n    document.addEventListener('touchmove', handleGlobalTouchMove, { passive: false });\n    document.addEventListener('touchend', handleGlobalTouchEnd);\n\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n      document.removeEventListener('touchmove', handleGlobalTouchMove);\n      document.removeEventListener('touchend', handleGlobalTouchEnd);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n\n  if (gameMode === 'menu') {\n    return (\n      <div style={styles.container}>\n        <div style={styles.wrapper}>\n          <div style={styles.header}>\n            <h1 style={styles.title}>Chess Opening Trainer</h1>\n            <p style={styles.subtitle}>Master your favorite openings against AI opposition</p>\n          </div>\n\n          <div style={styles.grid}>\n            <div style={styles.card} onClick={() => startTraining('sicilianDragon')}>\n              <div style={{...styles.cardHeader, color: '#dc2626'}}>\n                <Target size={24} />\n                <h2 style={{marginLeft: '10px'}}>Sicilian Dragon</h2>\n              </div>\n              <p style={styles.cardText}>Practice the Accelerated Dragon as Black. White moves automatically - you learn the best responses!</p>\n              <button style={{...styles.button, backgroundColor: '#dc2626'}}>\n                Train as Black\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGame')}>\n              <div style={{...styles.cardHeader, color: '#2563eb'}}>\n                <BookOpen size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Game</h2>\n              </div>\n              <p style={styles.cardText}>Learn the Scotch Game as White. Black moves automatically - focus on mastering your attacking lines!</p>\n              <button style={{...styles.button, backgroundColor: '#2563eb'}}>\n                Train as White\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGambit')}>\n              <div style={{...styles.cardHeader, color: '#16a34a'}}>\n                <Play size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Gambit</h2>\n              </div>\n              <p style={styles.cardText}>Master the Scotch Gambit as White. Black responds automatically - learn the aggressive sacrificial lines!</p>\n              <button style={{...styles.button, backgroundColor: '#16a34a'}}>\n                Train as White\n              </button>\n            </div>\n          </div>\n\n          <div style={{background: 'white', borderRadius: '12px', padding: '30px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'}}>\n            <h3 style={{fontSize: '1.5rem', marginBottom: '20px', color: '#374151'}}>How it works</h3>\n            <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px'}}>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>🎯 Focus on Your Side</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>The opponent moves automatically based on opening theory. You only need to learn your moves!</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>🤖 Smart AI Responses</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>AI plays realistic variations from grandmaster games. Learn to handle different responses.</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>📈 Immediate Feedback</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>Get instant feedback on your moves. Make a mistake? Just click \"Undo\" to try again!</p>\n              </div>\n            </div>\n            <div style={{marginTop: '20px', padding: '15px', backgroundColor: '#f0f9ff', borderRadius: '8px', border: '1px solid #0ea5e9'}}>\n              <p style={{color: '#0c4a6e', fontSize: '0.9rem', textAlign: 'center'}}>\n                <strong>💡 Tip:</strong> Wait for the opponent to move automatically, then make your best move. The AI will show you when it's your turn!\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const opening = openingDatabases[trainingMode];\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.wrapper}>\n        <div style={styles.gameHeader}>\n          <button style={styles.navButton} onClick={backToMenu}>\n            <ChevronLeft size={20} style={{marginRight: '5px'}} />\n            Back to Menu\n          </button>\n\n          <div style={styles.gameTitle}>\n            <h2 style={{fontSize: '2rem', color: '#92400e', marginBottom: '5px'}}>\n              {opening.name}\n            </h2>\n            <p style={{color: '#a16207'}}>Playing as {opening.color}</p>\n          </div>\n\n          <div style={{display: 'flex', gap: '15px'}}>\n            <button\n              style={{\n                ...styles.navButton,\n                opacity: undoStack.length > 0 ? 1 : 0.5,\n                cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n              }}\n              onClick={undoStack.length > 0 ? undoLastMove : undefined}\n              disabled={undoStack.length === 0}\n            >\n              <Undo2 size={20} style={{marginRight: '5px'}} />\n              Undo\n            </button>\n\n            <button style={styles.navButton} onClick={resetGame}>\n              <RotateCcw size={20} style={{marginRight: '5px'}} />\n              Reset\n            </button>\n          </div>\n        </div>\n\n        <div style={styles.gameLayout}>\n          <div style={styles.boardContainer}>\n            <div style={styles.boardWrapper}>\n              {/* Board orientation indicator */}\n              {trainingMode && (\n                <div style={{\n                  marginBottom: '10px',\n                  textAlign: 'center',\n                  color: needsReplay ? '#dc2626' : '#a16207',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  padding: needsReplay ? '8px 16px' : '0',\n                  backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                  borderRadius: needsReplay ? '8px' : '0',\n                  border: needsReplay ? '2px solid #dc2626' : 'none'\n                }}>\n                  {needsReplay ? '⚠️ Wrong move! Follow the yellow arrow to make the correct move.' :\n                   (openingDatabases[trainingMode].color === 'black'\n                    ? '♟ Playing as Black (Black pieces at bottom)'\n                    : '♙ Playing as White (White pieces at bottom)'\n                  )}\n                </div>\n              )}\n\n              {/* Board with coordinates */}\n              <div style={styles.coordinatesContainer}>\n                {/* Top file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`top-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n\n                {/* Left rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`left-${i}`} style={{\n                      gridColumn: 1,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* The chess board */}\n                <div style={styles.board} onMouseMove={handleMouseMove} onTouchMove={handleTouchMove}>\n                  {board.flatMap((row, rowIndex) =>\n                    row.map((piece, colIndex) => {\n                      // Get display coordinates (potentially flipped)\n                      const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                      const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                      const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                      const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                      // Chess.com style colors\n                      let backgroundColor;\n                      if (isSelected) {\n                        backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                      } else {\n                        backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                      }\n\n                      // Enhanced piece styling - solid pieces with consistent appearance\n                      const pieceColor = isPieceWhite(piece) ? '#ffffff' : '#000000';\n                      const pieceBackgroundColor = isPieceWhite(piece) ? 'rgba(0, 0, 0, 0.1)' : 'rgba(255, 255, 255, 0.1)';\n                      const textShadow = isPieceWhite(piece)\n                        ? '2px 2px 4px rgba(0,0,0,0.9), 0 0 3px rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.6), 1px -1px 0 rgba(0,0,0,0.6), -1px 1px 0 rgba(0,0,0,0.6), 1px 1px 0 rgba(0,0,0,0.6)'\n                        : '2px 2px 4px rgba(255,255,255,0.9), 0 0 3px rgba(255,255,255,0.8), -1px -1px 0 rgba(255,255,255,0.6), 1px -1px 0 rgba(255,255,255,0.6), -1px 1px 0 rgba(255,255,255,0.6), 1px 1px 0 rgba(255,255,255,0.6)';\n\n                      return (\n                        <div\n                          key={`${rowIndex}-${colIndex}`}\n                          data-square={`${displayRow},${displayCol}`}\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            fontSize: isMobile ? '2.8rem' : '3.8rem',\n                            cursor: piece ? 'pointer' : 'default',\n                            transition: 'background-color 0.15s ease, border 0.15s ease',\n                            userSelect: 'none',\n                            fontWeight: 'bold',\n                            width: '100%',\n                            height: '100%',\n                            minWidth: 0,\n                            minHeight: 0,\n                            boxSizing: 'border-box',\n                            backgroundColor,\n                            border: isSelected ? '2px solid #f39c12' : 'none',\n                            color: pieceColor,\n                            textShadow: piece ? textShadow : 'none',\n                            // Position this square at its display coordinates\n                            gridColumn: displayCol + 1,\n                            gridRow: displayRow + 1,\n                            opacity: isDragging ? 0.3 : 1,\n                            // Mobile optimization\n                            WebkitTouchCallout: 'none',\n                            WebkitUserSelect: 'none',\n                            touchAction: 'none'\n                          }}\n                          onMouseDown={(e) => handleMouseDown(e, displayRow, displayCol)}\n                          onMouseUp={(e) => handleMouseUp(e, displayRow, displayCol)}\n                          onTouchStart={(e) => handleTouchStart(e, displayRow, displayCol)}\n                          onTouchEnd={(e) => handleTouchEnd(e, displayRow, displayCol)}\n                          onClick={() => handleSquareClick(displayRow, displayCol)}\n                          onTouchCancel={() => {\n                            setDraggedPiece(null);\n                            setSelectedSquare(null);\n                          }}\n                          onMouseEnter={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                            }\n                          }}\n                          onMouseLeave={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                            }\n                          }}\n                        >\n                          {piece && !isDragging && (\n                            <span\n                              className=\"chess-piece\"\n                              style={{\n                                backgroundColor: piece ? pieceBackgroundColor : 'transparent',\n                                borderRadius: '50%',\n                                padding: '2px',\n                                lineHeight: '1',\n                                display: 'inline-block'\n                              }}\n                            >\n                              {pieceSymbols[piece]}\n                            </span>\n                          )}\n                        </div>\n                      );\n                    })\n                  )}\n\n                  {/* Hint Arrow */}\n                  {showHint && (\n                    <div style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      pointerEvents: 'none',\n                      zIndex: 10\n                    }}>\n                      <svg style={{ width: '100%', height: '100%' }}>\n                        <defs>\n                          <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\"\n                                  refX=\"9\" refY=\"3.5\" orient=\"auto\">\n                            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#ffeb3b\" stroke=\"#f39c12\" strokeWidth=\"1\"/>\n                          </marker>\n                        </defs>\n                        <line\n                          x1={`${(showHint.from.col + 0.5) * 12.5}%`}\n                          y1={`${(showHint.from.row + 0.5) * 12.5}%`}\n                          x2={`${(showHint.to.col + 0.5) * 12.5}%`}\n                          y2={`${(showHint.to.row + 0.5) * 12.5}%`}\n                          stroke=\"#ffeb3b\"\n                          strokeWidth=\"6\"\n                          markerEnd=\"url(#arrowhead)\"\n                        />\n                      </svg>\n                    </div>\n                  )}\n\n                  {/* Dragged piece */}\n                  {draggedPiece && (\n                    <div style={{\n                      position: 'fixed',\n                      pointerEvents: 'none',\n                      fontSize: isMobile ? '2.8rem' : '3.8rem',\n                      fontWeight: 'bold',\n                      zIndex: 1000,\n                      left: `${dragOffset.x}px`,\n                      top: `${dragOffset.y}px`,\n                      transform: 'translate(-50%, -50%)'\n                    }}>\n                      <span\n                        className=\"chess-piece\"\n                        style={{\n                          color: isPieceWhite(draggedPiece.piece) ? '#ffffff' : '#000000',\n                          textShadow: isPieceWhite(draggedPiece.piece)\n                            ? '2px 2px 4px rgba(0,0,0,0.9), 0 0 3px rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.6), 1px -1px 0 rgba(0,0,0,0.6), -1px 1px 0 rgba(0,0,0,0.6), 1px 1px 0 rgba(0,0,0,0.6)'\n                            : '2px 2px 4px rgba(255,255,255,0.9), 0 0 3px rgba(255,255,255,0.8), -1px -1px 0 rgba(255,255,255,0.6), 1px -1px 0 rgba(255,255,255,0.6), -1px 1px 0 rgba(255,255,255,0.6), 1px 1px 0 rgba(255,255,255,0.6)',\n                          backgroundColor: isPieceWhite(draggedPiece.piece) ? 'rgba(0, 0, 0, 0.1)' : 'rgba(255, 255, 255, 0.1)',\n                          borderRadius: '50%',\n                          padding: '2px',\n                          lineHeight: '1',\n                          display: 'inline-block'\n                        }}\n                      >\n                        {pieceSymbols[draggedPiece.piece]}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Right rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`right-${i}`} style={{\n                      gridColumn: 10,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* Bottom file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`bottom-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 10,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          <div style={styles.sidebar}>\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Game Status</h3>\n              <p style={{marginBottom: '8px', color: '#6b7280'}}>\n                Current turn: <span style={{textTransform: 'capitalize', fontWeight: '600', color: '#374151'}}>{currentPlayer}</span>\n              </p>\n              <p style={{color: '#6b7280'}}>Move: {Math.ceil(moveHistory.length / 2)}</p>\n              <p style={{marginTop: '8px', fontWeight: '600', color:\n                ((opening.color === 'white' && currentPlayer === 'white') ||\n                 (opening.color === 'black' && currentPlayer === 'black')) ? '#16a34a' : '#ea580c'\n              }}>\n                {((opening.color === 'white' && currentPlayer === 'white') ||\n                  (opening.color === 'black' && currentPlayer === 'black')) ? 'Your turn!' : 'Opponent thinking...'}\n              </p>\n            </div>\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Score</h3>\n              <p style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#374151', marginBottom: '8px'}}>\n                {score.correct}/{score.total}\n              </p>\n              <p style={{fontSize: '0.9rem', color: '#6b7280'}}>\n                {score.total > 0 ? `${Math.round((score.correct / score.total) * 100)}% accuracy` : 'No moves yet'}\n              </p>\n            </div>\n\n            {feedback && (\n              <div style={{\n                borderRadius: '12px',\n                padding: '20px',\n                fontWeight: '600',\n                backgroundColor: feedback.includes('✓') ? '#dcfce7' : feedback.includes('✗') ? '#fef2f2' : '#f0f9ff',\n                color: feedback.includes('✓') ? '#166534' : feedback.includes('✗') ? '#991b1b' : '#1e40af',\n                border: feedback.includes('✓') ? '2px solid #22c55e' : feedback.includes('✗') ? '2px solid #ef4444' : '2px solid #3b82f6',\n                transform: feedback.includes('✗') ? 'scale(1.02)' : 'scale(1)',\n                transition: 'all 0.3s ease'\n              }}>\n                <p style={{ margin: 0 }}>{feedback}</p>\n                {showHint && (\n                  <div style={{ marginTop: '15px', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                    <p style={{\n                      margin: 0,\n                      fontSize: '0.9rem',\n                      color: '#b45309',\n                      backgroundColor: '#fef3c7',\n                      padding: '8px 12px',\n                      borderRadius: '6px',\n                      border: '1px solid #fbbf24'\n                    }}>\n                      💡 Hint: Move from {showHint.notation.split('-')[0]} to {showHint.notation.split('-')[1]}\n                    </p>\n                    {undoStack.length > 0 && (\n                      <button\n                        style={{\n                          padding: '8px 16px',\n                          backgroundColor: '#3b82f6',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '6px',\n                          cursor: 'pointer',\n                          fontSize: '0.9rem',\n                          fontWeight: '600',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          gap: '5px'\n                        }}\n                        onClick={undoLastMove}\n                      >\n                        <Undo2 size={16} />\n                        Try Again\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Move History</h3>\n              <div style={{maxHeight: '200px', overflowY: 'auto', fontSize: '0.9rem'}}>\n                {moveHistory.length === 0 ? (\n                  <p style={{color: '#9ca3af', fontStyle: 'italic'}}>No moves yet</p>\n                ) : (\n                  moveHistory.map((move, index) => (\n                    <div key={index} style={{display: 'flex', marginBottom: '4px'}}>\n                      <span style={{width: '30px', color: '#9ca3af'}}>{Math.ceil((index + 1) / 2)}.</span>\n                      <span style={{color: index % 2 === 0 ? '#374151' : '#6b7280'}}>\n                        {move}\n                      </span>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChessTrainingApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}