{"ast":null,"code":"var _jsxFileName = \"/Users/tgira1018/Documents/GitHub/boardmate/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChessTrainingApp = () => {\n  _s();\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({\n    correct: 0,\n    total: 0\n  });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"c7-c5\"],\n        \"e2-e4,c7-c5\": [\"g1-f3\"],\n        \"e2-e4,c7-c5,g1-f3\": [\"g7-g6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6\": [\"d2-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4\": [\"c5-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4\": [\"f3-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4\": [\"f8-g7\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7\": [\"c2-c4\", \"b1-c3\", \"f2-f3\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,c2-c4\": [\"b8-c6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,b1-c3\": [\"b8-c6\"]\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\", \"g8-f6\", \"d8-h4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"d4-b5\", \"d4-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\", \"b1-c3\"]\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\", \"g8-f6\", \"f7-f5\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\", \"e1-g1\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\", \"c2-c3\"]\n      }\n    }\n  };\n\n  // Piece Unicode symbols (chess.com style)\n  const pieceSymbols = {\n    'K': '♔',\n    'Q': '♕',\n    'R': '♖',\n    'B': '♗',\n    'N': '♘',\n    'P': '♙',\n    'k': '♚',\n    'q': '♛',\n    'r': '♜',\n    'b': '♝',\n    'n': '♞',\n    'p': '♟'\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    var _openingDatabases$tra;\n    if (trainingMode && ((_openingDatabases$tra = openingDatabases[trainingMode]) === null || _openingDatabases$tra === void 0 ? void 0 : _openingDatabases$tra.color) === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n  const parseSquareName = square => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n  const isPieceWhite = piece => piece && piece === piece.toUpperCase();\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'n':\n        return rowDiff === 2 && colDiff === 1 || rowDiff === 1 && colDiff === 2;\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'k':\n        return rowDiff <= 1 && colDiff <= 1;\n      default:\n        return false;\n    }\n  };\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n    return false;\n  };\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n    console.log('Updated move history:', updatedMoveHistory);\n    return {\n      moveNotation,\n      updatedMoveHistory\n    };\n  };\n  const makeOpponentMove = currentMoveHistory => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n    const opening = openingDatabases[trainingMode];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = opening.moves[nextMoveKey];\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n          return newBoard;\n        });\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = opening.moves[moveKey] || [];\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(opening.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n    if (expectedMoves.includes(userMove)) {\n      setFeedback('✓ Correct move!');\n      setScore(prev => ({\n        correct: prev.correct + 1,\n        total: prev.total + 1\n      }));\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: {\n          ...score\n        },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(`✗ Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({\n        correct: prev.correct,\n        total: prev.total + 1\n      }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        // Convert to display coordinates\n        const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n        const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n        setShowHint({\n          from: {\n            row: fromDisplayRow,\n            col: fromDisplayCol\n          },\n          to: {\n            row: toDisplayRow,\n            col: toDisplayCol\n          },\n          notation: bestMove\n        });\n        console.log('Setting hint arrow:', {\n          from: {\n            row: fromDisplayRow,\n            col: fromDisplayCol\n          },\n          to: {\n            row: toDisplayRow,\n            col: toDisplayCol\n          },\n          notation: bestMove\n        });\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    var _openingDatabases$tra2;\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra2 = openingDatabases[trainingMode]) === null || _openingDatabases$tra2 === void 0 ? void 0 : _openingDatabases$tra2.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: e.clientX - rect.left - rect.width / 2,\n      y: e.clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n  const handleMouseMove = e => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    var _openingDatabases$tra3;\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && ((_openingDatabases$tra3 = openingDatabases[trainingMode]) === null || _openingDatabases$tra3 === void 0 ? void 0 : _openingDatabases$tra3.color) === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n    const {\n      fromRow,\n      fromCol\n    } = draggedPiece;\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const {\n        moveNotation,\n        updatedMoveHistory\n      } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n  const handleSquareClick = (displayRow, displayCol) => {\n    var _openingDatabases$tra4;\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra4 = openingDatabases[trainingMode]) === null || _openingDatabases$tra4 === void 0 ? void 0 : _openingDatabases$tra4.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const {\n          moveNotation,\n          updatedMoveHistory\n        } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n  const startTraining = mode => {\n    console.log('Starting training for mode:', mode);\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = e => {\n      if (draggedPiece) {\n        setDragOffset({\n          x: e.clientX,\n          y: e.clientY\n        });\n      }\n    };\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n  if (gameMode === 'menu') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.header,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: styles.title,\n            children: \"Chess Opening Trainer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.subtitle,\n            children: \"Master your favorite openings against AI opposition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.grid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('sicilianDragon'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#dc2626'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Target, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 850,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Sicilian Dragon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 851,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 849,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Practice the Accelerated Dragon as Black. White moves automatically - you learn the best responses!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#dc2626'\n              },\n              children: \"Train as Black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGame'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#2563eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Game\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Learn the Scotch Game as White. Black moves automatically - focus on mastering your attacking lines!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 864,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#2563eb'\n              },\n              children: \"Train as White\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 865,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGambit'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#16a34a'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Gambit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Master the Scotch Gambit as White. Black responds automatically - learn the aggressive sacrificial lines!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 875,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#16a34a'\n              },\n              children: \"Train as White\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'white',\n            borderRadius: '12px',\n            padding: '30px',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.5rem',\n              marginBottom: '20px',\n              color: '#374151'\n            },\n            children: \"How it works\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83C\\uDFAF Focus on Your Side\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 886,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"The opponent moves automatically based on opening theory. You only need to learn your moves!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 887,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83E\\uDD16 Smart AI Responses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"AI plays realistic variations from grandmaster games. Learn to handle different responses.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83D\\uDCC8 Immediate Feedback\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"Get instant feedback on your moves. Make a mistake? Just click \\\"Undo\\\" to try again!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 884,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '20px',\n              padding: '15px',\n              backgroundColor: '#f0f9ff',\n              borderRadius: '8px',\n              border: '1px solid #0ea5e9'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#0c4a6e',\n                fontSize: '0.9rem',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDCA1 Tip:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 17\n              }, this), \" Wait for the opponent to move automatically, then make your best move. The AI will show you when it's your turn!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 899,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 898,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 882,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 841,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 840,\n      columnNumber: 7\n    }, this);\n  }\n  const opening = openingDatabases[trainingMode];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.navButton,\n          onClick: backToMenu,\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            size: 20,\n            style: {\n              marginRight: '5px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 13\n          }, this), \"Back to Menu\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 915,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.gameTitle,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              fontSize: '2rem',\n              color: '#92400e',\n              marginBottom: '5px'\n            },\n            children: opening.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#a16207'\n            },\n            children: [\"Playing as \", opening.color]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              ...styles.navButton,\n              opacity: undoStack.length > 0 ? 1 : 0.5,\n              cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n            },\n            onClick: undoStack.length > 0 ? undoLastMove : undefined,\n            disabled: undoStack.length === 0,\n            children: [/*#__PURE__*/_jsxDEV(Undo2, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 937,\n              columnNumber: 15\n            }, this), \"Undo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.navButton,\n            onClick: resetGame,\n            children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 942,\n              columnNumber: 15\n            }, this), \"Reset\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 927,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 914,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameLayout,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.boardContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.boardWrapper,\n            children: [trainingMode && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '10px',\n                textAlign: 'center',\n                color: needsReplay ? '#dc2626' : '#a16207',\n                fontSize: '0.9rem',\n                fontWeight: '600',\n                padding: needsReplay ? '8px 16px' : '0',\n                backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                borderRadius: needsReplay ? '8px' : '0',\n                border: needsReplay ? '2px solid #dc2626' : 'none'\n              },\n              children: needsReplay ? '⚠️ Wrong move! Follow the yellow arrow to make the correct move.' : openingDatabases[trainingMode].color === 'black' ? '♟ Playing as Black (Black pieces at bottom)' : '♙ Playing as White (White pieces at bottom)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.coordinatesContainer,\n              children: [Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra5;\n                const file = trainingMode && ((_openingDatabases$tra5 = openingDatabases[trainingMode]) === null || _openingDatabases$tra5 === void 0 ? void 0 : _openingDatabases$tra5.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 1,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `top-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 980,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra6;\n                const rank = trainingMode && ((_openingDatabases$tra6 = openingDatabases[trainingMode]) === null || _openingDatabases$tra6 === void 0 ? void 0 : _openingDatabases$tra6.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 1,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `left-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 996,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.board,\n                onMouseMove: handleMouseMove,\n                children: [board.flatMap((row, rowIndex) => row.map((piece, colIndex) => {\n                  // Get display coordinates (potentially flipped)\n                  const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                  const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                  const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                  const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                  // Chess.com style colors\n                  let backgroundColor;\n                  if (isSelected) {\n                    backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                  } else {\n                    backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                  }\n\n                  // Enhanced piece styling - fully white pieces\n                  const pieceColor = isPieceWhite(piece) ? '#ffffff' : '#2c2c2c';\n                  const textShadow = isPieceWhite(piece) ? '2px 2px 4px rgba(0,0,0,0.8), 0 0 2px rgba(0,0,0,0.5)' : '1px 1px 2px rgba(255,255,255,0.4), 0 0 2px rgba(255,255,255,0.2)';\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: isMobile ? '2.8rem' : '3.8rem',\n                      cursor: piece ? 'pointer' : 'default',\n                      transition: 'background-color 0.15s ease, border 0.15s ease',\n                      userSelect: 'none',\n                      fontWeight: 'bold',\n                      width: '100%',\n                      height: '100%',\n                      minWidth: 0,\n                      minHeight: 0,\n                      boxSizing: 'border-box',\n                      backgroundColor,\n                      border: isSelected ? '2px solid #f39c12' : 'none',\n                      color: pieceColor,\n                      textShadow: piece ? textShadow : 'none',\n                      // Position this square at its display coordinates\n                      gridColumn: displayCol + 1,\n                      gridRow: displayRow + 1,\n                      opacity: isDragging ? 0.3 : 1\n                    },\n                    onMouseDown: e => handleMouseDown(e, displayRow, displayCol),\n                    onMouseUp: e => handleMouseUp(e, displayRow, displayCol),\n                    onClick: () => handleSquareClick(displayRow, displayCol),\n                    onMouseEnter: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                      }\n                    },\n                    onMouseLeave: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                      }\n                    },\n                    children: piece && !isDragging && pieceSymbols[piece]\n                  }, `${rowIndex}-${colIndex}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1033,\n                    columnNumber: 25\n                  }, this);\n                })), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    pointerEvents: 'none',\n                    zIndex: 10\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    style: {\n                      width: '100%',\n                      height: '100%'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                      children: /*#__PURE__*/_jsxDEV(\"marker\", {\n                        id: \"arrowhead\",\n                        markerWidth: \"10\",\n                        markerHeight: \"7\",\n                        refX: \"9\",\n                        refY: \"3.5\",\n                        orient: \"auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                          points: \"0 0, 10 3.5, 0 7\",\n                          fill: \"#ffeb3b\",\n                          stroke: \"#f39c12\",\n                          strokeWidth: \"1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1093,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1091,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1090,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: `${(showHint.from.col + 0.5) * 12.5}%`,\n                      y1: `${(showHint.from.row + 0.5) * 12.5}%`,\n                      x2: `${(showHint.to.col + 0.5) * 12.5}%`,\n                      y2: `${(showHint.to.row + 0.5) * 12.5}%`,\n                      stroke: \"#ffeb3b\",\n                      strokeWidth: \"6\",\n                      markerEnd: \"url(#arrowhead)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1096,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1089,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1080,\n                  columnNumber: 21\n                }, this), draggedPiece && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'fixed',\n                    pointerEvents: 'none',\n                    fontSize: isMobile ? '2.8rem' : '3.8rem',\n                    fontWeight: 'bold',\n                    color: isPieceWhite(draggedPiece.piece) ? '#ffffff' : '#2c2c2c',\n                    textShadow: isPieceWhite(draggedPiece.piece) ? '2px 2px 4px rgba(0,0,0,0.8), 0 0 2px rgba(0,0,0,0.5)' : '1px 1px 2px rgba(255,255,255,0.4), 0 0 2px rgba(255,255,255,0.2)',\n                    zIndex: 1000,\n                    left: `${dragOffset.x}px`,\n                    top: `${dragOffset.y}px`,\n                    transform: 'translate(-50%, -50%)'\n                  },\n                  children: pieceSymbols[draggedPiece.piece]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1111,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1009,\n                columnNumber: 17\n              }, this), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra7;\n                const rank = trainingMode && ((_openingDatabases$tra7 = openingDatabases[trainingMode]) === null || _openingDatabases$tra7 === void 0 ? void 0 : _openingDatabases$tra7.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 10,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `right-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1134,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra8;\n                const file = trainingMode && ((_openingDatabases$tra8 = openingDatabases[trainingMode]) === null || _openingDatabases$tra8 === void 0 ? void 0 : _openingDatabases$tra8.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 10,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `bottom-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1152,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 973,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 949,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.sidebar,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Game Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginBottom: '8px',\n                color: '#6b7280'\n              },\n              children: [\"Current turn: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  textTransform: 'capitalize',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: currentPlayer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1171,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#6b7280'\n              },\n              children: [\"Move: \", Math.ceil(moveHistory.length / 2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: '8px',\n                fontWeight: '600',\n                color: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? '#16a34a' : '#ea580c'\n              },\n              children: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? 'Your turn!' : 'Opponent thinking...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: 'bold',\n                color: '#374151',\n                marginBottom: '8px'\n              },\n              children: [score.correct, \"/\", score.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1185,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.9rem',\n                color: '#6b7280'\n              },\n              children: score.total > 0 ? `${Math.round(score.correct / score.total * 100)}% accuracy` : 'No moves yet'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1183,\n            columnNumber: 13\n          }, this), feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderRadius: '12px',\n              padding: '20px',\n              fontWeight: '600',\n              backgroundColor: feedback.includes('✓') ? '#dcfce7' : feedback.includes('✗') ? '#fef2f2' : '#f0f9ff',\n              color: feedback.includes('✓') ? '#166534' : feedback.includes('✗') ? '#991b1b' : '#1e40af',\n              border: feedback.includes('✓') ? '2px solid #22c55e' : feedback.includes('✗') ? '2px solid #ef4444' : '2px solid #3b82f6',\n              transform: feedback.includes('✗') ? 'scale(1.02)' : 'scale(1)',\n              transition: 'all 0.3s ease'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0\n              },\n              children: feedback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1204,\n              columnNumber: 17\n            }, this), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '15px',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: '0.9rem',\n                  color: '#b45309',\n                  backgroundColor: '#fef3c7',\n                  padding: '8px 12px',\n                  borderRadius: '6px',\n                  border: '1px solid #fbbf24'\n                },\n                children: [\"\\uD83D\\uDCA1 Hint: Move from \", showHint.notation.split('-')[0], \" to \", showHint.notation.split('-')[1]]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 21\n              }, this), undoStack.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  padding: '8px 16px',\n                  backgroundColor: '#3b82f6',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '5px'\n                },\n                onClick: undoLastMove,\n                children: [/*#__PURE__*/_jsxDEV(Undo2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1236,\n                  columnNumber: 25\n                }, this), \"Try Again\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1219,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Move History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '200px',\n                overflowY: 'auto',\n                fontSize: '0.9rem'\n              },\n              children: moveHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#9ca3af',\n                  fontStyle: 'italic'\n                },\n                children: \"No moves yet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1249,\n                columnNumber: 19\n              }, this) : moveHistory.map((move, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  marginBottom: '4px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    width: '30px',\n                    color: '#9ca3af'\n                  },\n                  children: [Math.ceil((index + 1) / 2), \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1253,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: index % 2 === 0 ? '#374151' : '#6b7280'\n                  },\n                  children: move\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1254,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 948,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 913,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 912,\n    columnNumber: 5\n  }, this);\n};\n_s(ChessTrainingApp, \"WaCtZMnp4DZs3SV2IdGWdYXISzw=\");\n_c = ChessTrainingApp;\nexport default ChessTrainingApp;\nvar _c;\n$RefreshReg$(_c, \"ChessTrainingApp\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ChevronLeft","RotateCcw","Play","BookOpen","Target","Undo2","jsxDEV","_jsxDEV","ChessTrainingApp","_s","getInitialBoard","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","board","setBoard","selectedSquare","setSelectedSquare","currentPlayer","setCurrentPlayer","moveHistory","setMoveHistory","gameMode","setGameMode","trainingMode","setTrainingMode","feedback","setFeedback","score","setScore","correct","total","draggedPiece","setDraggedPiece","dragOffset","setDragOffset","x","y","showHint","setShowHint","needsReplay","setNeedsReplay","undoStack","setUndoStack","timeoutRefs","clearAllTimeouts","current","forEach","clearTimeout","addTimeout","callback","delay","timeoutId","setTimeout","filter","id","push","openingDatabases","sicilianDragon","name","color","moves","scotchGame","scotchGambit","pieceSymbols","getDisplayCoordinates","row","col","_openingDatabases$tra","getSquareName","String","fromCharCode","parseSquareName","square","charCodeAt","parseInt","isPieceWhite","piece","toUpperCase","isValidMove","fromRow","fromCol","toRow","toCol","targetPiece","rowDiff","Math","abs","colDiff","piece_type","toLowerCase","direction","startRow","isPathBlocked","rowDir","colDir","currentRow","currentCol","makeMove","newBoard","map","console","log","moveNotation","updatedMoveHistory","prevPlayer","makeOpponentMove","currentMoveHistory","opening","nextMoveKey","join","opponentMoves","length","opponentMove","floor","random","fromSquare","toSquare","split","currentBoard","prevHistory","updatedHistory","undoLastMove","lastState","prevStack","slice","checkMove","userMove","moveKey","expectedMoves","Object","keys","includes","prev","expectedMovesText","bestMove","fromDisplayRow","fromDisplayCol","toDisplayRow","toDisplayCol","from","to","notation","handleMouseDown","e","displayRow","displayCol","_openingDatabases$tra2","isUserTurn","preventDefault","rect","currentTarget","getBoundingClientRect","clientX","left","width","clientY","top","height","handleMouseMove","handleMouseUp","targetDisplayRow","targetDisplayCol","_openingDatabases$tra3","targetRow","targetCol","handleSquareClick","_openingDatabases$tra4","fromPiece","startTraining","mode","freshBoard","firstMove","resetGame","backToMenu","handleGlobalMouseMove","handleGlobalMouseUp","document","styles","container","minHeight","background","padding","fontFamily","wrapper","maxWidth","margin","header","textAlign","marginBottom","title","fontSize","fontWeight","subtitle","grid","display","gridTemplateColumns","gap","card","borderRadius","boxShadow","cursor","transition","cardHeader","alignItems","cardText","lineHeight","button","border","gameHeader","justifyContent","flexWrap","navButton","gameTitle","gameLayout","boardContainer","flexDirection","boardWrapper","position","coordinatesContainer","gridTemplateRows","overflow","gridColumn","gridRow","userSelect","minWidth","boxSizing","sidebar","infoCard","infoTitle","style","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","marginLeft","backgroundColor","marginTop","marginRight","opacity","undefined","disabled","Array","_","i","_openingDatabases$tra5","file","_openingDatabases$tra6","rank","onMouseMove","flatMap","rowIndex","colIndex","isLightSquare","isSelected","isDragging","pieceColor","textShadow","onMouseDown","onMouseUp","onMouseEnter","target","onMouseLeave","pointerEvents","zIndex","markerWidth","markerHeight","refX","refY","orient","points","fill","stroke","strokeWidth","x1","y1","x2","y2","markerEnd","transform","_openingDatabases$tra7","_openingDatabases$tra8","textTransform","ceil","round","maxHeight","overflowY","fontStyle","move","index","_c","$RefreshReg$"],"sources":["/Users/tgira1018/Documents/GitHub/boardmate/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\n\nconst ChessTrainingApp = () => {\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [\n    ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],\n    ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n    ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']\n  ];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({ correct: 0, total: 0 });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"c7-c5\"],\n        \"e2-e4,c7-c5\": [\"g1-f3\"],\n        \"e2-e4,c7-c5,g1-f3\": [\"g7-g6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6\": [\"d2-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4\": [\"c5-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4\": [\"f3-d4\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4\": [\"f8-g7\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7\": [\"c2-c4\", \"b1-c3\", \"f2-f3\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,c2-c4\": [\"b8-c6\"],\n        \"e2-e4,c7-c5,g1-f3,g7-g6,d2-d4,c5-d4,f3-d4,f8-g7,b1-c3\": [\"b8-c6\"],\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\", \"g8-f6\", \"d8-h4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"d4-b5\", \"d4-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\", \"b1-c3\"],\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      moves: {\n        \"\": [\"e2-e4\"],\n        \"e2-e4\": [\"e7-e5\"],\n        \"e2-e4,e7-e5\": [\"g1-f3\"],\n        \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\", \"g8-f6\", \"f7-f5\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\", \"e1-g1\"],\n        \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\", \"c2-c3\"],\n      }\n    }\n  };\n\n  // Piece Unicode symbols (chess.com style)\n  const pieceSymbols = {\n    'K': '♔', 'Q': '♕', 'R': '♖', 'B': '♗', 'N': '♘', 'P': '♙',\n    'k': '♚', 'q': '♛', 'r': '♜', 'b': '♝', 'n': '♞', 'p': '♟'\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n\n  const parseSquareName = (square) => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n\n  const isPieceWhite = (piece) => piece && piece === piece.toUpperCase();\n\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'n':\n        return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);\n\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'k':\n        return rowDiff <= 1 && colDiff <= 1;\n\n      default:\n        return false;\n    }\n  };\n\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n\n    return false;\n  };\n\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n\n    console.log('Updated move history:', updatedMoveHistory);\n\n    return { moveNotation, updatedMoveHistory };\n  };\n\n  const makeOpponentMove = (currentMoveHistory) => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n\n    const opening = openingDatabases[trainingMode];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = opening.moves[nextMoveKey];\n\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n\n          return newBoard;\n        });\n\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = opening.moves[moveKey] || [];\n\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(opening.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n\n    if (expectedMoves.includes(userMove)) {\n      setFeedback('✓ Correct move!');\n      setScore(prev => ({ correct: prev.correct + 1, total: prev.total + 1 }));\n\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: { ...score },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(`✗ Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({ correct: prev.correct, total: prev.total + 1 }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        // Convert to display coordinates\n        const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n        const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n\n        setShowHint({\n          from: { row: fromDisplayRow, col: fromDisplayCol },\n          to: { row: toDisplayRow, col: toDisplayCol },\n          notation: bestMove\n        });\n\n        console.log('Setting hint arrow:', {\n          from: { row: fromDisplayRow, col: fromDisplayCol },\n          to: { row: toDisplayRow, col: toDisplayCol },\n          notation: bestMove\n        });\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: e.clientX - rect.left - rect.width / 2,\n      y: e.clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n\n  const handleMouseMove = (e) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n\n    const { fromRow, fromCol } = draggedPiece;\n\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n\n  const handleSquareClick = (displayRow, displayCol) => {\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n\n  const startTraining = (mode) => {\n    console.log('Starting training for mode:', mode);\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({ correct: 0, total: 0 });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({ correct: 0, total: 0 });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = opening.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({ correct: 0, total: 0 });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = (e) => {\n      if (draggedPiece) {\n        setDragOffset({\n          x: e.clientX,\n          y: e.clientY\n        });\n      }\n    };\n\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n\n  if (gameMode === 'menu') {\n    return (\n      <div style={styles.container}>\n        <div style={styles.wrapper}>\n          <div style={styles.header}>\n            <h1 style={styles.title}>Chess Opening Trainer</h1>\n            <p style={styles.subtitle}>Master your favorite openings against AI opposition</p>\n          </div>\n\n          <div style={styles.grid}>\n            <div style={styles.card} onClick={() => startTraining('sicilianDragon')}>\n              <div style={{...styles.cardHeader, color: '#dc2626'}}>\n                <Target size={24} />\n                <h2 style={{marginLeft: '10px'}}>Sicilian Dragon</h2>\n              </div>\n              <p style={styles.cardText}>Practice the Accelerated Dragon as Black. White moves automatically - you learn the best responses!</p>\n              <button style={{...styles.button, backgroundColor: '#dc2626'}}>\n                Train as Black\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGame')}>\n              <div style={{...styles.cardHeader, color: '#2563eb'}}>\n                <BookOpen size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Game</h2>\n              </div>\n              <p style={styles.cardText}>Learn the Scotch Game as White. Black moves automatically - focus on mastering your attacking lines!</p>\n              <button style={{...styles.button, backgroundColor: '#2563eb'}}>\n                Train as White\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGambit')}>\n              <div style={{...styles.cardHeader, color: '#16a34a'}}>\n                <Play size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Gambit</h2>\n              </div>\n              <p style={styles.cardText}>Master the Scotch Gambit as White. Black responds automatically - learn the aggressive sacrificial lines!</p>\n              <button style={{...styles.button, backgroundColor: '#16a34a'}}>\n                Train as White\n              </button>\n            </div>\n          </div>\n\n          <div style={{background: 'white', borderRadius: '12px', padding: '30px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'}}>\n            <h3 style={{fontSize: '1.5rem', marginBottom: '20px', color: '#374151'}}>How it works</h3>\n            <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px'}}>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>🎯 Focus on Your Side</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>The opponent moves automatically based on opening theory. You only need to learn your moves!</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>🤖 Smart AI Responses</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>AI plays realistic variations from grandmaster games. Learn to handle different responses.</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}>📈 Immediate Feedback</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>Get instant feedback on your moves. Make a mistake? Just click \"Undo\" to try again!</p>\n              </div>\n            </div>\n            <div style={{marginTop: '20px', padding: '15px', backgroundColor: '#f0f9ff', borderRadius: '8px', border: '1px solid #0ea5e9'}}>\n              <p style={{color: '#0c4a6e', fontSize: '0.9rem', textAlign: 'center'}}>\n                <strong>💡 Tip:</strong> Wait for the opponent to move automatically, then make your best move. The AI will show you when it's your turn!\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const opening = openingDatabases[trainingMode];\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.wrapper}>\n        <div style={styles.gameHeader}>\n          <button style={styles.navButton} onClick={backToMenu}>\n            <ChevronLeft size={20} style={{marginRight: '5px'}} />\n            Back to Menu\n          </button>\n\n          <div style={styles.gameTitle}>\n            <h2 style={{fontSize: '2rem', color: '#92400e', marginBottom: '5px'}}>\n              {opening.name}\n            </h2>\n            <p style={{color: '#a16207'}}>Playing as {opening.color}</p>\n          </div>\n\n          <div style={{display: 'flex', gap: '15px'}}>\n            <button\n              style={{\n                ...styles.navButton,\n                opacity: undoStack.length > 0 ? 1 : 0.5,\n                cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n              }}\n              onClick={undoStack.length > 0 ? undoLastMove : undefined}\n              disabled={undoStack.length === 0}\n            >\n              <Undo2 size={20} style={{marginRight: '5px'}} />\n              Undo\n            </button>\n\n            <button style={styles.navButton} onClick={resetGame}>\n              <RotateCcw size={20} style={{marginRight: '5px'}} />\n              Reset\n            </button>\n          </div>\n        </div>\n\n        <div style={styles.gameLayout}>\n          <div style={styles.boardContainer}>\n            <div style={styles.boardWrapper}>\n              {/* Board orientation indicator */}\n              {trainingMode && (\n                <div style={{\n                  marginBottom: '10px',\n                  textAlign: 'center',\n                  color: needsReplay ? '#dc2626' : '#a16207',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  padding: needsReplay ? '8px 16px' : '0',\n                  backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                  borderRadius: needsReplay ? '8px' : '0',\n                  border: needsReplay ? '2px solid #dc2626' : 'none'\n                }}>\n                  {needsReplay ? '⚠️ Wrong move! Follow the yellow arrow to make the correct move.' :\n                   (openingDatabases[trainingMode].color === 'black'\n                    ? '♟ Playing as Black (Black pieces at bottom)'\n                    : '♙ Playing as White (White pieces at bottom)'\n                  )}\n                </div>\n              )}\n\n              {/* Board with coordinates */}\n              <div style={styles.coordinatesContainer}>\n                {/* Top file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`top-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n\n                {/* Left rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`left-${i}`} style={{\n                      gridColumn: 1,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* The chess board */}\n                <div style={styles.board} onMouseMove={handleMouseMove}>\n                  {board.flatMap((row, rowIndex) =>\n                    row.map((piece, colIndex) => {\n                      // Get display coordinates (potentially flipped)\n                      const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                      const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                      const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                      const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                      // Chess.com style colors\n                      let backgroundColor;\n                      if (isSelected) {\n                        backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                      } else {\n                        backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                      }\n\n                      // Enhanced piece styling - fully white pieces\n                      const pieceColor = isPieceWhite(piece) ? '#ffffff' : '#2c2c2c';\n                      const textShadow = isPieceWhite(piece)\n                        ? '2px 2px 4px rgba(0,0,0,0.8), 0 0 2px rgba(0,0,0,0.5)'\n                        : '1px 1px 2px rgba(255,255,255,0.4), 0 0 2px rgba(255,255,255,0.2)';\n\n                      return (\n                        <div\n                          key={`${rowIndex}-${colIndex}`}\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            fontSize: isMobile ? '2.8rem' : '3.8rem',\n                            cursor: piece ? 'pointer' : 'default',\n                            transition: 'background-color 0.15s ease, border 0.15s ease',\n                            userSelect: 'none',\n                            fontWeight: 'bold',\n                            width: '100%',\n                            height: '100%',\n                            minWidth: 0,\n                            minHeight: 0,\n                            boxSizing: 'border-box',\n                            backgroundColor,\n                            border: isSelected ? '2px solid #f39c12' : 'none',\n                            color: pieceColor,\n                            textShadow: piece ? textShadow : 'none',\n                            // Position this square at its display coordinates\n                            gridColumn: displayCol + 1,\n                            gridRow: displayRow + 1,\n                            opacity: isDragging ? 0.3 : 1\n                          }}\n                          onMouseDown={(e) => handleMouseDown(e, displayRow, displayCol)}\n                          onMouseUp={(e) => handleMouseUp(e, displayRow, displayCol)}\n                          onClick={() => handleSquareClick(displayRow, displayCol)}\n                          onMouseEnter={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                            }\n                          }}\n                          onMouseLeave={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                            }\n                          }}\n                        >\n                          {piece && !isDragging && pieceSymbols[piece]}\n                        </div>\n                      );\n                    })\n                  )}\n\n                  {/* Hint Arrow */}\n                  {showHint && (\n                    <div style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      pointerEvents: 'none',\n                      zIndex: 10\n                    }}>\n                      <svg style={{ width: '100%', height: '100%' }}>\n                        <defs>\n                          <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\"\n                                  refX=\"9\" refY=\"3.5\" orient=\"auto\">\n                            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#ffeb3b\" stroke=\"#f39c12\" strokeWidth=\"1\"/>\n                          </marker>\n                        </defs>\n                        <line\n                          x1={`${(showHint.from.col + 0.5) * 12.5}%`}\n                          y1={`${(showHint.from.row + 0.5) * 12.5}%`}\n                          x2={`${(showHint.to.col + 0.5) * 12.5}%`}\n                          y2={`${(showHint.to.row + 0.5) * 12.5}%`}\n                          stroke=\"#ffeb3b\"\n                          strokeWidth=\"6\"\n                          markerEnd=\"url(#arrowhead)\"\n                        />\n                      </svg>\n                    </div>\n                  )}\n\n                  {/* Dragged piece */}\n                  {draggedPiece && (\n                    <div style={{\n                      position: 'fixed',\n                      pointerEvents: 'none',\n                      fontSize: isMobile ? '2.8rem' : '3.8rem',\n                      fontWeight: 'bold',\n                      color: isPieceWhite(draggedPiece.piece) ? '#ffffff' : '#2c2c2c',\n                      textShadow: isPieceWhite(draggedPiece.piece)\n                        ? '2px 2px 4px rgba(0,0,0,0.8), 0 0 2px rgba(0,0,0,0.5)'\n                        : '1px 1px 2px rgba(255,255,255,0.4), 0 0 2px rgba(255,255,255,0.2)',\n                      zIndex: 1000,\n                      left: `${dragOffset.x}px`,\n                      top: `${dragOffset.y}px`,\n                      transform: 'translate(-50%, -50%)'\n                    }}>\n                      {pieceSymbols[draggedPiece.piece]}\n                    </div>\n                  )}\n                </div>\n\n                {/* Right rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`right-${i}`} style={{\n                      gridColumn: 10,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* Bottom file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`bottom-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 10,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          <div style={styles.sidebar}>\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Game Status</h3>\n              <p style={{marginBottom: '8px', color: '#6b7280'}}>\n                Current turn: <span style={{textTransform: 'capitalize', fontWeight: '600', color: '#374151'}}>{currentPlayer}</span>\n              </p>\n              <p style={{color: '#6b7280'}}>Move: {Math.ceil(moveHistory.length / 2)}</p>\n              <p style={{marginTop: '8px', fontWeight: '600', color:\n                ((opening.color === 'white' && currentPlayer === 'white') ||\n                 (opening.color === 'black' && currentPlayer === 'black')) ? '#16a34a' : '#ea580c'\n              }}>\n                {((opening.color === 'white' && currentPlayer === 'white') ||\n                  (opening.color === 'black' && currentPlayer === 'black')) ? 'Your turn!' : 'Opponent thinking...'}\n              </p>\n            </div>\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Score</h3>\n              <p style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#374151', marginBottom: '8px'}}>\n                {score.correct}/{score.total}\n              </p>\n              <p style={{fontSize: '0.9rem', color: '#6b7280'}}>\n                {score.total > 0 ? `${Math.round((score.correct / score.total) * 100)}% accuracy` : 'No moves yet'}\n              </p>\n            </div>\n\n            {feedback && (\n              <div style={{\n                borderRadius: '12px',\n                padding: '20px',\n                fontWeight: '600',\n                backgroundColor: feedback.includes('✓') ? '#dcfce7' : feedback.includes('✗') ? '#fef2f2' : '#f0f9ff',\n                color: feedback.includes('✓') ? '#166534' : feedback.includes('✗') ? '#991b1b' : '#1e40af',\n                border: feedback.includes('✓') ? '2px solid #22c55e' : feedback.includes('✗') ? '2px solid #ef4444' : '2px solid #3b82f6',\n                transform: feedback.includes('✗') ? 'scale(1.02)' : 'scale(1)',\n                transition: 'all 0.3s ease'\n              }}>\n                <p style={{ margin: 0 }}>{feedback}</p>\n                {showHint && (\n                  <div style={{ marginTop: '15px', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                    <p style={{\n                      margin: 0,\n                      fontSize: '0.9rem',\n                      color: '#b45309',\n                      backgroundColor: '#fef3c7',\n                      padding: '8px 12px',\n                      borderRadius: '6px',\n                      border: '1px solid #fbbf24'\n                    }}>\n                      💡 Hint: Move from {showHint.notation.split('-')[0]} to {showHint.notation.split('-')[1]}\n                    </p>\n                    {undoStack.length > 0 && (\n                      <button\n                        style={{\n                          padding: '8px 16px',\n                          backgroundColor: '#3b82f6',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '6px',\n                          cursor: 'pointer',\n                          fontSize: '0.9rem',\n                          fontWeight: '600',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          gap: '5px'\n                        }}\n                        onClick={undoLastMove}\n                      >\n                        <Undo2 size={16} />\n                        Try Again\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Move History</h3>\n              <div style={{maxHeight: '200px', overflowY: 'auto', fontSize: '0.9rem'}}>\n                {moveHistory.length === 0 ? (\n                  <p style={{color: '#9ca3af', fontStyle: 'italic'}}>No moves yet</p>\n                ) : (\n                  moveHistory.map((move, index) => (\n                    <div key={index} style={{display: 'flex', marginBottom: '4px'}}>\n                      <span style={{width: '30px', color: '#9ca3af'}}>{Math.ceil((index + 1) / 2)}.</span>\n                      <span style={{color: index % 2 === 0 ? '#374151' : '#6b7280'}}>\n                        {move}\n                      </span>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChessTrainingApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}