{"ast":null,"code":"var _jsxFileName = \"/Users/tgira1018/Documents/GitHub/boardmate/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChessTrainingApp = () => {\n  _s();\n  // Add mobile-specific CSS\n  useEffect(() => {\n    // Add mobile viewport and chess font optimization\n    const style = document.createElement('style');\n    style.textContent = `\n      .chess-piece {\n        font-family: 'Arial Unicode MS', 'Lucida Grande', 'Segoe UI Symbol', 'DejaVu Sans', Arial, sans-serif !important;\n        font-feature-settings: normal !important;\n        -webkit-font-smoothing: antialiased !important;\n        -moz-osx-font-smoothing: grayscale !important;\n        font-variant-emoji: text !important;\n        text-rendering: optimizeLegibility !important;\n        font-size: inherit !important;\n        line-height: 1 !important;\n        vertical-align: baseline !important;\n        font-weight: normal !important;\n        font-style: normal !important;\n        color: inherit !important;\n        -webkit-text-fill-color: inherit !important;\n        -webkit-text-stroke: 0 !important;\n        -webkit-font-feature-settings: normal !important;\n        font-variant: normal !important;\n      }\n\n      .chess-piece-white {\n        /* SVG styling handled in component */\n      }\n\n      .chess-piece-black {\n        /* SVG styling handled in component */\n      }\n\n      body {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        overflow-x: hidden;\n      }\n    `;\n    document.head.appendChild(style);\n\n    // Ensure viewport is set for mobile\n    let viewport = document.querySelector('meta[name=\"viewport\"]');\n    if (!viewport) {\n      viewport = document.createElement('meta');\n      viewport.name = 'viewport';\n      viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';\n      document.head.appendChild(viewport);\n    }\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], [null, null, null, null, null, null, null, null], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [selectedVariation, setSelectedVariation] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({\n    correct: 0,\n    total: 0\n  });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases with all variations\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      variations: {\n        mainLine: {\n          name: \"Main Line (Modern Variation)\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6\": [\"f1-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8\": [\"c4-b3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3,c8-d7\": [\"d1-d2\"]\n          }\n        },\n        maroczyBind: {\n          name: \"Maroczy Bind\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"c2-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8\": [\"f1-e2\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6\": [\"e1-g1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6,e1-g1\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6,e1-g1,c8-d7\": [\"a1-c1\"]\n          }\n        },\n        exchange: {\n          name: \"Exchange Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"d4-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6\": [\"f1-d3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7\": [\"e1-g1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6\": [\"c2-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8,b1-c3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8,b1-c3,d7-d6\": [\"d1-e2\"]\n          }\n        },\n        be3Variation: {\n          name: \"5. Be3 Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6\": [\"f1-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8\": [\"c4-b3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3,c8-d7\": [\"d1-d2\"]\n          }\n        },\n        f3Variation: {\n          name: \"5. f3 Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8\": [\"d1-d2\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6\": [\"e1-c1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6,e1-c1\": [\"c6-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6,e1-c1,c6-d4\": [\"e3-d4\"]\n          }\n        }\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      variations: {\n        classical: {\n          name: \"Classical Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"c1-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3\": [\"d8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3\": [\"g8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1\": [\"c5-b6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6\": [\"f2-f4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6,f2-f4\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6,f2-f4,d7-d6\": [\"g1-h1\"]\n          }\n        },\n        schmidt: {\n          name: \"Schmidt Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6\": [\"e4-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5\": [\"d8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7\": [\"d1-e2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2\": [\"f6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5\": [\"c2-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4\": [\"c8-a6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6\": [\"b2-b3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6,b2-b3\": [\"g7-g6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6,b2-b3,g7-g6\": [\"g2-g3\"]\n          }\n        },\n        fourKnights: {\n          name: \"Scotch Four Knights\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3\": [\"f8-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4\": [\"d4-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6\": [\"f1-d3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5\": [\"e4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5\": [\"c6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5,e1-g1\": [\"e8-g8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5,e1-g1,e8-g8\": [\"c1-g5\"]\n          }\n        },\n        blumenfeld: {\n          name: \"Blumenfeld Scotch\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"c1-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3\": [\"d8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6\": [\"d4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5\": [\"c5-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3\": [\"f2-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3\": [\"f6-h4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4\": [\"g2-g3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3\": [\"h4-d8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8\": [\"d1-g4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4\": [\"g7-g6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4,g7-g6\": [\"g4-f4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4,g7-g6,g4-f4\": [\"d7-d6\"]\n          }\n        },\n        steinitz: {\n          name: \"Steinitz Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"d8-h4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3\": [\"f8-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4\": [\"f1-e2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2\": [\"h4-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4\": [\"d4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5\": [\"b4-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3\": [\"b2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3\": [\"e8-d8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8,e1-g1\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8,e1-g1,g8-f6\": [\"f1-e1\"]\n          }\n        }\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      variations: {\n        mainLine: {\n          name: \"Main Line (Two Knights Defense)\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5\": [\"c4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5\": [\"f6-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4\": [\"c8-d7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7\": [\"b5-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1,f8-c5\": [\"f2-f3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1,f8-c5,f2-f3\": [\"e4-g5\"]\n          }\n        },\n        classical: {\n          name: \"Classical Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6\": [\"c3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4\": [\"c5-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4\": [\"c1-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2\": [\"b4-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2\": [\"b1-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5\": [\"e4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5,e4-d5\": [\"f6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5,e4-d5,f6-d5\": [\"e1-g1\"]\n          }\n        },\n        haxoGambit: {\n          name: \"Haxo Gambit\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3\": [\"d4-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3\": [\"c4-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7\": [\"e8-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7\": [\"d1-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5\": [\"e8-e8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8\": [\"d5-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6\": [\"c5-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6,c5-c3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6,c5-c3,g8-f6\": [\"e1-g1\"]\n          }\n        },\n        maxLange: {\n          name: \"Max Lange Attack\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1\": [\"f6-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4\": [\"f1-e1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5\": [\"c4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5\": [\"d8-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3\": [\"d5-a5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5\": [\"c3-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5,c3-e4\": [\"c8-e6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5,c3-e4,c8-e6\": [\"e4-g5\"]\n          }\n        },\n        solidBe7: {\n          name: \"Solid 4...Be7\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6\": [\"d1-b3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6\": [\"c4-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7\": [\"e8-f8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8\": [\"f3-g5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5\": [\"c6-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5,e1-g1\": [\"h7-h6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5,e1-g1,h7-h6\": [\"f2-f4\"]\n          }\n        }\n      }\n    }\n  };\n\n  // SVG piece components - using inline SVG for consistent rendering\n  const getPieceSVG = piece => {\n    const isWhite = isPieceWhite(piece);\n    const pieceType = piece.toLowerCase();\n    const kingSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m501.6 1811 48.4-354.4-260-269.2s-166.4-288.2 29.9-481C582.2 448.7 826 727.2 826 727.2l195.6-165.7 184 165.7s216.4-232.5 430.4-76c214 156.5 255.4 317.6 117.4 531.6-138.1 214-250.9 280.7-250.9 280.7L1558 1811z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"M977 298v-95h94v95h107v95h-107v153q-48-16-94 0V393H870v-95zm47 314q-47 0-136 121-31-36-50-55 93-140 186-140 92 0 186 140-20 19-50 55-90-121-136-121zm-447 907-26 156 145-84zm410-206q-1-147-36.5-274.5T870 845q-45-88-131.5-153T570 627q-103 0-208 93T257 949q0 109 86.5 236T546 1408q212-88 441-95zm37 530H448l61-365q-325-280-326-535-1-159 125-274.5T575 553q78 0 158.5 47T876 719q61 74 98.5 164.5T1024 1034q12-60 49-150.5t99-164.5q61-72 142-119t159-47q140 0 266 115.5T1865 943q-2 255-326 535l61 365zm0-74h489l-50-298q-216-84-439-84t-439 84l-50 298zm447-250 26 156-145-84zm-410-206q229 7 441 95 115-96 202-223t87-236q0-136-105.5-229T1478 627q-83 0-169.5 65T1178 845q-46 66-81.5 193.5T1061 1313zm-176 233 141-84 137 86-141 84z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this);\n    const queenSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m508.5 1815.6 48.4-356.7-216.3-554.6-135.8-20.7-16.1-126.5 112.7-43.8 78.3 73.7-18.4 99 246.2 197.8 112.8-568.3L635 428l78.3-108 112.8 43.7-23 161 223.2 474 244-490-66.8-105.9 92-92 105.9 73.6L1337 534l103.5 529.2 260-161-16-142.7 131-46 57.6 131.1-207 103.6-175 529.2 48.4 308.4z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"M1024 1769h478q-53-130-43-280-100-39-213-67.5t-222-28.5q-110 0-223 28.5T589 1489q9 150-43 280zm0-450q111 0 223.5 26.5T1468 1413q17-105 60.5-212.5T1634 988l-220 155-123-601-267 555-267-555-123 601-220-155q61 105 104.5 212.5T580 1413q108-41 220.5-67.5T1024 1319zm0 524H441q114-231 57.5-456.5T296 937q-12 2-19 2-54 0-92.5-38.5T146 808t38.5-92.5T277 677t92.5 38.5T408 808q0 20-6 38-4 14-15 33l196 139 100-486q-64-31-72-103-5-44 29-91t88-53q54-5 96 29t48 88q7 68-46 114l198 412 198-412q-54-46-46-114 6-54 48-88t96-29q54 6 87.5 53t29.5 91q-9 72-72 103l100 486 196-139q-12-19-15-33-6-18-6-38 0-54 38.5-92.5T1771 677t92.5 38.5T1902 808t-38.5 92.5T1771 939q-7 0-19-2-147 224-203 449.5t58 456.5zM276 746q-62 0-62 62t62 62q63 0 63-62t-63-62zm466-394q-62 0-62 62t62 62 62-62-62-62zM590 1519l119 72-134 86q19-86 15-158zm1182-773q-63 0-63 62t63 62q62 0 62-62t-62-62zm-466-394q-62 0-62 62t62 62 62-62-62-62zm152 1167-119 72 134 86q-20-86-15-158zm-573 47 139-83 139 86-139 84z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 7\n    }, this);\n    const rookSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m435 1804 16-212 152-115 51-688-148-115-7-276 210-2 4 138 198 2 7-140 212-3 14 145 193-4 5-138h204l-7 285-145 106 42 693 172 124 19 207z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"M1024 1501H643l5-74h752l5 74zm0-661H692l5-74h654l5 74zm0 1003H383l29-264 159-118 50-659-149-107-17-341h289v147h137V354h286v147h137V354h289l-17 341-149 107 50 659 159 118 29 264zm0-74h557l-15-149-161-119-54-735 152-109 13-230h-138v148h-285V427H955v148H670V427H532l13 230 152 109-54 735-161 119-15 149z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 7\n    }, this);\n    const bishopSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m948 366 1-139 148-7 1 147zM564 860c114-267 456-443 456-443s392 176 476 502c-9 209-183 332-183 332l27 221-653 6 46-233s-230-171-169-385zm-101 790c175 6 355 23 425-142h92s0 190-88 246c-163 103-625 38-625 38s-15-146 196-142zm631 37-36-185 102 5s22 153 315 131c381-17 318 153 318 153l-483 5z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"M1024 356q66 0 64-66 1-55-64-55-66 0-64 55-3 66 64 66zm0 1204q0 114-101 199t-223 84H205q0-117 65-179t142-62h250q51 0 88-7t71-60l10-16h76q-7 21-3 13-45 105-109 125t-146 19H409q-52 0-86 40t-34 53h424q66 0 159-65t93-185H624q67-116 72-229-114-119-162-223t-6-224q33-96 118-189t312-247q-17-11-46-36t-29-79q0-58 41-96t100-38q58 0 100 38t41 96q0 54-29 79t-46 36q226 153 311 247t119 189q42 119-6 224t-162 223q4 113 72 229h-341q0 120 93 185t159 65h424q0-13-34-53t-86-40h-240q-83 0-146-19t-109-125q4 8-3-13h76l10 16q33 53 70 60t89 7h250q76 0 142 62t65 179h-495q-123 0-223-84t-101-199zm0-114h283q-28-84-29-154-120-41-254-38-135-3-254 38-2 70-29 154zm0-267q159-1 285 42 189-180 142-346-60-193-427-431-368 238-427 431-48 166 142 346 125-43 285-42zm-47-361V714h94v104h95v89h-95v165h-94V907h-95v-89z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }, this);\n    const knightSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m352 861 787-569 94 148s336 103 398 388c63 286 51 974 51 974l-1088 9s-37-290 184-460c221-171 221-212 221-212s-226-71-295-16-117 138-117 138l-129-67 74-85-88-97-94 56z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"m1151 178-115 154c-74 50-147 98-220 144-73 45-112 81-116 107L304 846l12 297 122-86 51 50-115 82 217 121 56-102c37-68 135-88 292-60l-55 85c-25 37-63 60-115 71a608 608 0 0 0-183 238c-32 82-45 182-39 301h1242c-23-55-42-118-57-190-15-73-17-152-5-237 29-239 13-440-47-603-61-164-205-303-433-418l-96-217zm-17 145 59 133a664 664 0 0 1 262 188c55 72 100 150 134 234 27 97 40 181 41 253 0 71-3 140-9 205-7 65-11 131-13 199-2 67 9 145 32 234H621c-4-84 12-158 48-223s85-124 146-177c78-22 129-56 152-102s53-90 90-131c13-10 27-15 38-15 10-1 21 0 33-2 52-7 95-36 129-85 33-49 51-104 52-165l-19-67c-37 159-99 245-188 257l-45 6c-16 1-33 10-52 26-41-25-87-35-138-31-74 6-129 15-165 27l-108 73-39 45-47-28 78-65-138-144-64 41-4-125 366-241c15-34 58-74 131-120l208-131 49-69zM960 564c-6 0-12 2-18 7L826 671l212 2c23 0 17-21-16-63-24-31-44-46-62-46zM502 868l-33 4-33 56 57 26 46-55-37-31z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 7\n    }, this);\n    const pawnSVG = /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2048 2048\",\n      width: \"100%\",\n      height: \"100%\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#f9f9f9\" : \"#101010\",\n        d: \"m734 981 196-193s-189-82-79-288c79-149 303-114 361 50 63 179-113 240-113 240l226 197Zm-235 799s-8-107 50-154c196-173 338-386 371-599l210 2c33 206 182 447 321 561 101 59 99 199 99 199z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: isWhite ? \"#101010\" : \"#f9f9f9\",\n        d: \"M520 1769h1008q8-97-132-182-132-101-196-239t-80-309H928q-15 170-79 309t-197 239q-141 85-132 182zm504 74H446v-74q-4-80 42-137t125-108q117-91 172-217t78-268H576l284-239q-86-74-86-188 0-103 73-177t177-74q103 0 177 74t73 177q0 114-86 188l284 239h-287q23 141 78 268t172 217q79 51 125 108t42 137v74zM756 974h536l-225-191q134-31 134-171 0-76-52-126t-125-51q-73 0-125 51t-52 126q0 140 134 171z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this);\n\n    // Return the appropriate SVG based on piece type\n    switch (pieceType) {\n      case 'k':\n        return kingSVG;\n      case 'q':\n        return queenSVG;\n      case 'r':\n        return rookSVG;\n      case 'b':\n        return bishopSVG;\n      case 'n':\n        return knightSVG;\n      case 'p':\n        return pawnSVG;\n      default:\n        return kingSVG;\n    }\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    var _openingDatabases$tra;\n    if (trainingMode && ((_openingDatabases$tra = openingDatabases[trainingMode]) === null || _openingDatabases$tra === void 0 ? void 0 : _openingDatabases$tra.color) === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n  const parseSquareName = square => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n  const isPieceWhite = piece => piece && piece === piece.toUpperCase();\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'n':\n        return rowDiff === 2 && colDiff === 1 || rowDiff === 1 && colDiff === 2;\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n      case 'k':\n        // Normal king moves\n        if (rowDiff <= 1 && colDiff <= 1) return true;\n\n        // Castling\n        if (rowDiff === 0 && colDiff === 2) {\n          return canCastle(fromRow, fromCol, toRow, toCol, piece);\n        }\n        return false;\n      default:\n        return false;\n    }\n  };\n  const canCastle = (fromRow, fromCol, toRow, toCol, piece) => {\n    // Basic castling validation\n    const isWhite = isPieceWhite(piece);\n    const kingRow = isWhite ? 7 : 0;\n    const kingCol = 4;\n\n    // King must be on starting square\n    if (fromRow !== kingRow || fromCol !== kingCol) return false;\n\n    // Determine if kingside or queenside castling\n    const isKingside = toCol === 6;\n    const isQueenside = toCol === 2;\n    if (!isKingside && !isQueenside) return false;\n\n    // Check if rook is in correct position\n    const rookCol = isKingside ? 7 : 0;\n    const rook = board[kingRow][rookCol];\n    const expectedRook = isWhite ? 'R' : 'r';\n    if (rook !== expectedRook) return false;\n\n    // Check if squares between king and rook are empty\n    const start = Math.min(kingCol, rookCol);\n    const end = Math.max(kingCol, rookCol);\n    for (let col = start + 1; col < end; col++) {\n      if (board[kingRow][col] !== null) return false;\n    }\n\n    // In a real game, we'd also check:\n    // - King hasn't moved (castling rights)\n    // - Rook hasn't moved (castling rights)\n    // - King not in check\n    // - King doesn't pass through check\n    // - King doesn't end up in check\n    // For training purposes, we'll allow castling if basic conditions are met\n\n    return true;\n  };\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n    return false;\n  };\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n    // Handle castling\n    if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n      // This is a castling move\n      const isKingside = toCol === 6;\n      const rookFromCol = isKingside ? 7 : 0;\n      const rookToCol = isKingside ? 5 : 3;\n\n      // Move the rook\n      newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n      newBoard[fromRow][rookFromCol] = null;\n    }\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n    console.log('Updated move history:', updatedMoveHistory);\n    return {\n      moveNotation,\n      updatedMoveHistory\n    };\n  };\n  const makeOpponentMove = currentMoveHistory => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = variation.moves[nextMoveKey];\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n          // Handle castling for opponent\n          if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n            const isKingside = toCol === 6;\n            const rookFromCol = isKingside ? 7 : 0;\n            const rookToCol = isKingside ? 5 : 3;\n\n            // Move the rook\n            newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n            newBoard[fromRow][rookFromCol] = null;\n          }\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n          return newBoard;\n        });\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = variation.moves[moveKey] || [];\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(variation.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n    if (expectedMoves.includes(userMove)) {\n      setFeedback(' Correct move!');\n      setScore(prev => ({\n        correct: prev.correct + 1,\n        total: prev.total + 1\n      }));\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: {\n          ...score\n        },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(` Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({\n        correct: prev.correct,\n        total: prev.total + 1\n      }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n        try {\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          // Convert to display coordinates\n          const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n          const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n          setShowHint({\n            from: {\n              row: fromDisplayRow,\n              col: fromDisplayCol\n            },\n            to: {\n              row: toDisplayRow,\n              col: toDisplayCol\n            },\n            notation: bestMove\n          });\n          console.log('Setting hint arrow:', {\n            from: {\n              row: fromDisplayRow,\n              col: fromDisplayCol\n            },\n            to: {\n              row: toDisplayRow,\n              col: toDisplayCol\n            },\n            notation: bestMove\n          });\n        } catch (error) {\n          console.error('Error parsing move for hint:', bestMove, error);\n        }\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    var _openingDatabases$tra2, _e$touches$, _e$touches$2;\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra2 = openingDatabases[trainingMode]) === null || _openingDatabases$tra2 === void 0 ? void 0 : _openingDatabases$tra2.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const clientX = e.clientX || e.touches && ((_e$touches$ = e.touches[0]) === null || _e$touches$ === void 0 ? void 0 : _e$touches$.clientX) || 0;\n    const clientY = e.clientY || e.touches && ((_e$touches$2 = e.touches[0]) === null || _e$touches$2 === void 0 ? void 0 : _e$touches$2.clientY) || 0;\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: clientX - rect.left - rect.width / 2,\n      y: clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n  const handleTouchStart = (e, displayRow, displayCol) => {\n    e.preventDefault(); // Prevent scrolling\n    handleMouseDown(e, displayRow, displayCol);\n  };\n  const handleMouseMove = e => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n  const handleTouchMove = e => {\n    if (!draggedPiece) return;\n    e.preventDefault(); // Prevent scrolling\n    handleMouseMove(e);\n  };\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    var _openingDatabases$tra3;\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && ((_openingDatabases$tra3 = openingDatabases[trainingMode]) === null || _openingDatabases$tra3 === void 0 ? void 0 : _openingDatabases$tra3.color) === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n    const {\n      fromRow,\n      fromCol\n    } = draggedPiece;\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const {\n        moveNotation,\n        updatedMoveHistory\n      } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n  const handleTouchEnd = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // For touch, we need to find what element we're over\n    if (e.changedTouches && e.changedTouches[0]) {\n      var _targetElement$datase2;\n      const touch = e.changedTouches[0];\n      const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);\n\n      // Find the chess square element\n      let targetElement = elementBelow;\n      while (targetElement && !((_targetElement$datase = targetElement.dataset) !== null && _targetElement$datase !== void 0 && _targetElement$datase.square)) {\n        var _targetElement$datase;\n        targetElement = targetElement.parentElement;\n      }\n      if (targetElement && (_targetElement$datase2 = targetElement.dataset) !== null && _targetElement$datase2 !== void 0 && _targetElement$datase2.square) {\n        const [touchRow, touchCol] = targetElement.dataset.square.split(',').map(Number);\n        handleMouseUp(e, touchRow, touchCol);\n        return;\n      }\n    }\n\n    // Fallback to provided coordinates\n    handleMouseUp(e, targetDisplayRow, targetDisplayCol);\n  };\n  const handleSquareClick = (displayRow, displayCol) => {\n    var _openingDatabases$tra4;\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && ((_openingDatabases$tra4 = openingDatabases[trainingMode]) === null || _openingDatabases$tra4 === void 0 ? void 0 : _openingDatabases$tra4.color) === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black';\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const {\n          moveNotation,\n          updatedMoveHistory\n        } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n  const startTraining = (mode, variationKey = null) => {\n    console.log('Starting training for mode:', mode, 'variation:', variationKey);\n\n    // If no variation specified, go to variation selection\n    if (!variationKey) {\n      setTrainingMode(mode);\n      setGameMode('variationSelection');\n      return;\n    }\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setSelectedVariation(variationKey);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    const variation = opening.variations[variationKey];\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = variation.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n\n            // Handle castling for first move (unlikely but just in case)\n            if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n              const isKingside = toCol === 6;\n              const rookFromCol = isKingside ? 7 : 0;\n              const rookToCol = isKingside ? 5 : 3;\n              newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n              newBoard[fromRow][rookFromCol] = null;\n            }\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = variation.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n\n            // Handle castling for first move (unlikely but just in case)\n            if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n              const isKingside = toCol === 6;\n              const rookFromCol = isKingside ? 7 : 0;\n              const rookToCol = isKingside ? 5 : 3;\n              newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n              newBoard[fromRow][rookFromCol] = null;\n            }\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setSelectedVariation(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({\n      correct: 0,\n      total: 0\n    });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = e => {\n      if (draggedPiece) {\n        var _e$touches$3, _e$touches$4;\n        const clientX = e.clientX || e.touches && ((_e$touches$3 = e.touches[0]) === null || _e$touches$3 === void 0 ? void 0 : _e$touches$3.clientX) || 0;\n        const clientY = e.clientY || e.touches && ((_e$touches$4 = e.touches[0]) === null || _e$touches$4 === void 0 ? void 0 : _e$touches$4.clientY) || 0;\n        setDragOffset({\n          x: clientX,\n          y: clientY\n        });\n      }\n    };\n    const handleGlobalTouchMove = e => {\n      if (draggedPiece && e.touches && e.touches[0]) {\n        e.preventDefault(); // Prevent scrolling while dragging\n        setDragOffset({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        });\n      }\n    };\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n    const handleGlobalTouchEnd = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    // Mouse events\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n\n    // Touch events\n    document.addEventListener('touchmove', handleGlobalTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', handleGlobalTouchEnd);\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n      document.removeEventListener('touchmove', handleGlobalTouchMove);\n      document.removeEventListener('touchend', handleGlobalTouchEnd);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n  if (gameMode === 'variationSelection') {\n    const opening = openingDatabases[trainingMode];\n    const variations = Object.keys(opening.variations);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.gameHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.navButton,\n            onClick: backToMenu,\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1470,\n              columnNumber: 15\n            }, this), \"Back to Menu\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1469,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.gameTitle,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                fontSize: '2rem',\n                color: '#92400e',\n                marginBottom: '5px'\n              },\n              children: opening.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#a16207'\n              },\n              children: \"Choose a variation to practice\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1478,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1481,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1468,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.grid,\n          children: [variations.map(variationKey => {\n            const variation = opening.variations[variationKey];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.card,\n              onClick: () => startTraining(trainingMode, variationKey),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  ...styles.cardHeader,\n                  color: opening.color === 'black' ? '#dc2626' : '#2563eb'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Target, {\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1490,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  style: {\n                    marginLeft: '10px',\n                    fontSize: '1.2rem'\n                  },\n                  children: variation.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1491,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1489,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.cardText,\n                children: [\"Practice this specific variation of the \", opening.name, \". Learn the key moves and typical responses.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1493,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  ...styles.button,\n                  backgroundColor: opening.color === 'black' ? '#dc2626' : '#2563eb'\n                },\n                children: \"Practice This Line\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1496,\n                columnNumber: 19\n              }, this)]\n            }, variationKey, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1488,\n              columnNumber: 17\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => {\n              const randomVariation = variations[Math.floor(Math.random() * variations.length)];\n              startTraining(trainingMode, randomVariation);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#16a34a'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1509,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  marginLeft: '10px',\n                  fontSize: '1.2rem'\n                },\n                children: \"Random Variation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1510,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Practice a random variation from this opening. Perfect for testing your overall knowledge of the opening.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#16a34a'\n              },\n              children: \"Random Practice\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1515,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1504,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1484,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1467,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1466,\n      columnNumber: 7\n    }, this);\n  }\n  if (gameMode === 'menu') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.header,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: styles.title,\n            children: \"Chess Opening Trainer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.subtitle,\n            children: \"Master your favorite openings against AI opposition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1531,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1529,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.grid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('sicilianDragon'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#dc2626'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Target, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1537,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Sicilian Dragon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1538,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1536,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Practice the Accelerated Dragon as Black. Choose from 5 different variations or practice randomly!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1540,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#dc2626'\n              },\n              children: \"Choose Variation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1541,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1535,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGame'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#2563eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1548,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Game\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1549,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1547,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Learn the Scotch Game as White. Choose from 5 different variations including the Classical and Schmidt lines!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1551,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#2563eb'\n              },\n              children: \"Choose Variation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1552,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.card,\n            onClick: () => startTraining('scotchGambit'),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.cardHeader,\n                color: '#16a34a'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1559,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginLeft: '10px'\n                },\n                children: \"Scotch Gambit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1560,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.cardText,\n              children: \"Master the Scotch Gambit as White. Choose from 5 different variations including the Max Lange Attack!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                ...styles.button,\n                backgroundColor: '#16a34a'\n              },\n              children: \"Choose Variation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1563,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1557,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1534,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'white',\n            borderRadius: '12px',\n            padding: '30px',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.5rem',\n              marginBottom: '20px',\n              color: '#374151'\n            },\n            children: \"How it works\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n              gap: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83C\\uDFAF Choose Your Variation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1573,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"Each opening has 5 different variations to practice. Pick a specific line or practice randomly!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1574,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1572,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83E\\uDD16 Smart AI Responses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1577,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"AI plays realistic variations from grandmaster games. Learn to handle different responses.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1578,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '10px',\n                  color: '#374151'\n                },\n                children: \"\\uD83D\\uDCC8 Immediate Feedback\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1581,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.9rem',\n                  lineHeight: '1.5'\n                },\n                children: \"Get instant feedback on your moves. Make a mistake? Just click \\\"Undo\\\" to try again!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1582,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1580,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1571,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '20px',\n              padding: '15px',\n              backgroundColor: '#f0f9ff',\n              borderRadius: '8px',\n              border: '1px solid #0ea5e9'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#0c4a6e',\n                fontSize: '0.9rem',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDCA1 Tip:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1587,\n                columnNumber: 17\n              }, this), \" Each opening now includes multiple variations like the Classical, Schmidt, and Steinitz lines. Master them all or focus on your favorites!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1585,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1569,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1528,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1527,\n      columnNumber: 7\n    }, this);\n  }\n  const opening = openingDatabases[trainingMode];\n  const variation = opening.variations[selectedVariation];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.navButton,\n          onClick: backToMenu,\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            size: 20,\n            style: {\n              marginRight: '5px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1604,\n            columnNumber: 13\n          }, this), \"Back to Menu\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1603,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.gameTitle,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              fontSize: '2rem',\n              color: '#92400e',\n              marginBottom: '5px'\n            },\n            children: opening.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1609,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#a16207',\n              fontSize: '1rem',\n              fontWeight: '600'\n            },\n            children: variation.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1612,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#a16207',\n              fontSize: '0.9rem'\n            },\n            children: [\"Playing as \", opening.color]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1615,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1608,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              ...styles.navButton,\n              opacity: undoStack.length > 0 ? 1 : 0.5,\n              cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n            },\n            onClick: undoStack.length > 0 ? undoLastMove : undefined,\n            disabled: undoStack.length === 0,\n            children: [/*#__PURE__*/_jsxDEV(Undo2, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1628,\n              columnNumber: 15\n            }, this), \"Undo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1619,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.navButton,\n            onClick: resetGame,\n            children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 20,\n              style: {\n                marginRight: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1633,\n              columnNumber: 15\n            }, this), \"Reset\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1632,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1618,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1602,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.gameLayout,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.boardContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.boardWrapper,\n            children: [trainingMode && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '10px',\n                textAlign: 'center',\n                color: needsReplay ? '#dc2626' : '#a16207',\n                fontSize: '0.9rem',\n                fontWeight: '600',\n                padding: needsReplay ? '8px 16px' : '0',\n                backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                borderRadius: needsReplay ? '8px' : '0',\n                border: needsReplay ? '2px solid #dc2626' : 'none'\n              },\n              children: needsReplay ? ' Wrong move! Follow the yellow arrow to make the correct move.' : openingDatabases[trainingMode].color === 'black' ? ' Playing as Black (Black pieces at bottom)' : ' Playing as White (White pieces at bottom)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1644,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.coordinatesContainer,\n              children: [Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra5;\n                const file = trainingMode && ((_openingDatabases$tra5 = openingDatabases[trainingMode]) === null || _openingDatabases$tra5 === void 0 ? void 0 : _openingDatabases$tra5.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 1,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `top-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1671,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra6;\n                const rank = trainingMode && ((_openingDatabases$tra6 = openingDatabases[trainingMode]) === null || _openingDatabases$tra6 === void 0 ? void 0 : _openingDatabases$tra6.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 1,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `left-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1687,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.board,\n                onMouseMove: handleMouseMove,\n                onTouchMove: handleTouchMove,\n                children: [board.flatMap((row, rowIndex) => row.map((piece, colIndex) => {\n                  // Get display coordinates (potentially flipped)\n                  const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                  const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                  const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                  const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                  // Chess.com style colors\n                  let backgroundColor;\n                  if (isSelected) {\n                    backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                  } else {\n                    backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                  }\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    \"data-square\": `${displayRow},${displayCol}`,\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: isMobile ? '2.2rem' : '2.8rem',\n                      cursor: piece ? 'pointer' : 'default',\n                      transition: 'background-color 0.15s ease, border 0.15s ease',\n                      userSelect: 'none',\n                      fontWeight: 'bold',\n                      width: '100%',\n                      height: '100%',\n                      minWidth: 0,\n                      minHeight: 0,\n                      boxSizing: 'border-box',\n                      backgroundColor,\n                      border: isSelected ? '2px solid #f39c12' : 'none',\n                      // Position this square at its display coordinates\n                      gridColumn: displayCol + 1,\n                      gridRow: displayRow + 1,\n                      opacity: isDragging ? 0.3 : 1,\n                      // Mobile optimization\n                      WebkitTouchCallout: 'none',\n                      WebkitUserSelect: 'none',\n                      touchAction: 'none'\n                    },\n                    onMouseDown: e => handleMouseDown(e, displayRow, displayCol),\n                    onMouseUp: e => handleMouseUp(e, displayRow, displayCol),\n                    onTouchStart: e => handleTouchStart(e, displayRow, displayCol),\n                    onTouchEnd: e => handleTouchEnd(e, displayRow, displayCol),\n                    onClick: () => handleSquareClick(displayRow, displayCol),\n                    onTouchCancel: () => {\n                      setDraggedPiece(null);\n                      setSelectedSquare(null);\n                    },\n                    onMouseEnter: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                      }\n                    },\n                    onMouseLeave: e => {\n                      if (!isSelected && !draggedPiece) {\n                        e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                      }\n                    },\n                    children: piece && !isDragging && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `chess-piece ${isPieceWhite(piece) ? 'chess-piece-white' : 'chess-piece-black'}`,\n                      style: {\n                        width: '80%',\n                        height: '80%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                      },\n                      children: getPieceSVG(piece)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1767,\n                      columnNumber: 29\n                    }, this)\n                  }, `${rowIndex}-${colIndex}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1718,\n                    columnNumber: 25\n                  }, this);\n                })), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    pointerEvents: 'none',\n                    zIndex: 10\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    style: {\n                      width: '100%',\n                      height: '100%'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                      children: /*#__PURE__*/_jsxDEV(\"marker\", {\n                        id: \"arrowhead\",\n                        markerWidth: \"10\",\n                        markerHeight: \"7\",\n                        refX: \"9\",\n                        refY: \"3.5\",\n                        orient: \"auto\",\n                        children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                          points: \"0 0, 10 3.5, 0 7\",\n                          fill: \"#ffeb3b\",\n                          stroke: \"#f39c12\",\n                          strokeWidth: \"1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1800,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1798,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1797,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                      x1: `${(showHint.from.col + 0.5) * 12.5}%`,\n                      y1: `${(showHint.from.row + 0.5) * 12.5}%`,\n                      x2: `${(showHint.to.col + 0.5) * 12.5}%`,\n                      y2: `${(showHint.to.row + 0.5) * 12.5}%`,\n                      stroke: \"#ffeb3b\",\n                      strokeWidth: \"6\",\n                      markerEnd: \"url(#arrowhead)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1803,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1796,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1787,\n                  columnNumber: 21\n                }, this), draggedPiece && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: 'fixed',\n                    pointerEvents: 'none',\n                    width: isMobile ? '44px' : '60px',\n                    height: isMobile ? '44px' : '60px',\n                    zIndex: 1000,\n                    left: `${dragOffset.x}px`,\n                    top: `${dragOffset.y}px`,\n                    transform: 'translate(-50%, -50%)'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `chess-piece ${isPieceWhite(draggedPiece.piece) ? 'chess-piece-white' : 'chess-piece-black'}`,\n                    style: {\n                      width: '100%',\n                      height: '100%',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    },\n                    children: getPieceSVG(draggedPiece.piece)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1828,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1818,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1700,\n                columnNumber: 17\n              }, this), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra7;\n                const rank = trainingMode && ((_openingDatabases$tra7 = openingDatabases[trainingMode]) === null || _openingDatabases$tra7 === void 0 ? void 0 : _openingDatabases$tra7.color) === 'black' ? i + 1 : 8 - i;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: 10,\n                    gridRow: i + 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: rank\n                }, `right-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1848,\n                  columnNumber: 21\n                }, this);\n              }), Array.from({\n                length: 8\n              }, (_, i) => {\n                var _openingDatabases$tra8;\n                const file = trainingMode && ((_openingDatabases$tra8 = openingDatabases[trainingMode]) === null || _openingDatabases$tra8 === void 0 ? void 0 : _openingDatabases$tra8.color) === 'black' ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                : String.fromCharCode(97 + i); // a,b,c,d,e,f,g,h\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    gridColumn: i + 2,\n                    gridRow: 10,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: file\n                }, `bottom-${i}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1866,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1664,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1641,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1640,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.sidebar,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Game Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1883,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginBottom: '8px',\n                color: '#6b7280'\n              },\n              children: [\"Current turn: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  textTransform: 'capitalize',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: currentPlayer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1885,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1884,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#6b7280'\n              },\n              children: [\"Move: \", Math.ceil(moveHistory.length / 2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1887,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: '8px',\n                fontWeight: '600',\n                color: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? '#16a34a' : '#ea580c'\n              },\n              children: opening.color === 'white' && currentPlayer === 'white' || opening.color === 'black' && currentPlayer === 'black' ? 'Your turn!' : 'Opponent thinking...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1888,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1882,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1898,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: 'bold',\n                color: '#374151',\n                marginBottom: '8px'\n              },\n              children: [score.correct, \"/\", score.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1899,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.9rem',\n                color: '#6b7280'\n              },\n              children: score.total > 0 ? `${Math.round(score.correct / score.total * 100)}% accuracy` : 'No moves yet'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1902,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1897,\n            columnNumber: 13\n          }, this), feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderRadius: '12px',\n              padding: '20px',\n              fontWeight: '600',\n              backgroundColor: feedback.includes('') ? '#dcfce7' : feedback.includes('') ? '#fef2f2' : '#f0f9ff',\n              color: feedback.includes('') ? '#166534' : feedback.includes('') ? '#991b1b' : '#1e40af',\n              border: feedback.includes('') ? '2px solid #22c55e' : feedback.includes('') ? '2px solid #ef4444' : '2px solid #3b82f6',\n              transform: feedback.includes('') ? 'scale(1.02)' : 'scale(1)',\n              transition: 'all 0.3s ease'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0\n              },\n              children: feedback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1918,\n              columnNumber: 17\n            }, this), showHint && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '15px',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: 0,\n                  fontSize: '0.9rem',\n                  color: '#b45309',\n                  backgroundColor: '#fef3c7',\n                  padding: '8px 12px',\n                  borderRadius: '6px',\n                  border: '1px solid #fbbf24'\n                },\n                children: [\"\\uD83D\\uDCA1 Hint: Move from \", showHint.notation.split('-')[0], \" to \", showHint.notation.split('-')[1]]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1921,\n                columnNumber: 21\n              }, this), undoStack.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  padding: '8px 16px',\n                  backgroundColor: '#3b82f6',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '5px'\n                },\n                onClick: undoLastMove,\n                children: [/*#__PURE__*/_jsxDEV(Undo2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1950,\n                  columnNumber: 25\n                }, this), \"Try Again\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1933,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1920,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1908,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.infoCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: styles.infoTitle,\n              children: \"Move History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1960,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '200px',\n                overflowY: 'auto',\n                fontSize: '0.9rem'\n              },\n              children: moveHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#9ca3af',\n                  fontStyle: 'italic'\n                },\n                children: \"No moves yet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1963,\n                columnNumber: 19\n              }, this) : moveHistory.map((move, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  marginBottom: '4px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    width: '30px',\n                    color: '#9ca3af'\n                  },\n                  children: [Math.ceil((index + 1) / 2), \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1967,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: index % 2 === 0 ? '#374151' : '#6b7280'\n                  },\n                  children: move\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1968,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1966,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1961,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1959,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1881,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1639,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1601,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1600,\n    columnNumber: 5\n  }, this);\n};\n_s(ChessTrainingApp, \"qXMgC3JomWvR9xwIjKMrFudi6l4=\");\n_c = ChessTrainingApp;\nexport default ChessTrainingApp;\nvar _c;\n$RefreshReg$(_c, \"ChessTrainingApp\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ChevronLeft","RotateCcw","Play","BookOpen","Target","Undo2","jsxDEV","_jsxDEV","ChessTrainingApp","_s","style","document","createElement","textContent","head","appendChild","viewport","querySelector","name","content","removeChild","getInitialBoard","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","board","setBoard","selectedSquare","setSelectedSquare","currentPlayer","setCurrentPlayer","moveHistory","setMoveHistory","gameMode","setGameMode","trainingMode","setTrainingMode","selectedVariation","setSelectedVariation","feedback","setFeedback","score","setScore","correct","total","draggedPiece","setDraggedPiece","dragOffset","setDragOffset","x","y","showHint","setShowHint","needsReplay","setNeedsReplay","undoStack","setUndoStack","timeoutRefs","clearAllTimeouts","current","forEach","clearTimeout","addTimeout","callback","delay","timeoutId","setTimeout","filter","id","push","openingDatabases","sicilianDragon","color","variations","mainLine","moves","maroczyBind","exchange","be3Variation","f3Variation","scotchGame","classical","schmidt","fourKnights","blumenfeld","steinitz","scotchGambit","haxoGambit","maxLange","solidBe7","getPieceSVG","piece","isWhite","isPieceWhite","pieceType","toLowerCase","kingSVG","xmlns","viewBox","width","height","children","fill","d","fileName","_jsxFileName","lineNumber","columnNumber","queenSVG","rookSVG","bishopSVG","knightSVG","pawnSVG","getDisplayCoordinates","row","col","_openingDatabases$tra","getSquareName","String","fromCharCode","parseSquareName","square","charCodeAt","parseInt","toUpperCase","isValidMove","fromRow","fromCol","toRow","toCol","targetPiece","rowDiff","Math","abs","colDiff","piece_type","direction","startRow","isPathBlocked","canCastle","kingRow","kingCol","isKingside","isQueenside","rookCol","rook","expectedRook","start","min","end","max","rowDir","colDir","currentRow","currentCol","makeMove","newBoard","map","console","log","rookFromCol","rookToCol","moveNotation","updatedMoveHistory","prevPlayer","makeOpponentMove","currentMoveHistory","opening","variation","nextMoveKey","join","opponentMoves","length","opponentMove","floor","random","fromSquare","toSquare","split","currentBoard","prevHistory","updatedHistory","undoLastMove","lastState","prevStack","slice","checkMove","userMove","moveKey","expectedMoves","Object","keys","includes","prev","expectedMovesText","bestMove","fromDisplayRow","fromDisplayCol","toDisplayRow","toDisplayCol","from","to","notation","error","handleMouseDown","e","displayRow","displayCol","_openingDatabases$tra2","_e$touches$","_e$touches$2","isUserTurn","preventDefault","rect","currentTarget","getBoundingClientRect","clientX","touches","clientY","left","top","handleTouchStart","handleMouseMove","handleTouchMove","handleMouseUp","targetDisplayRow","targetDisplayCol","_openingDatabases$tra3","targetRow","targetCol","handleTouchEnd","changedTouches","_targetElement$datase2","touch","elementBelow","elementFromPoint","targetElement","_targetElement$datase","dataset","parentElement","touchRow","touchCol","Number","handleSquareClick","_openingDatabases$tra4","fromPiece","startTraining","mode","variationKey","freshBoard","firstMove","resetGame","backToMenu","handleGlobalMouseMove","_e$touches$3","_e$touches$4","handleGlobalTouchMove","handleGlobalMouseUp","handleGlobalTouchEnd","passive","styles","container","minHeight","background","padding","fontFamily","wrapper","maxWidth","margin","header","textAlign","marginBottom","title","fontSize","fontWeight","subtitle","grid","display","gridTemplateColumns","gap","card","borderRadius","boxShadow","cursor","transition","cardHeader","alignItems","cardText","lineHeight","button","border","gameHeader","justifyContent","flexWrap","navButton","gameTitle","gameLayout","boardContainer","flexDirection","boardWrapper","position","coordinatesContainer","gridTemplateRows","overflow","gridColumn","gridRow","userSelect","minWidth","boxSizing","sidebar","infoCard","infoTitle","onClick","size","marginRight","marginLeft","backgroundColor","randomVariation","marginTop","opacity","undefined","disabled","Array","_","i","_openingDatabases$tra5","file","_openingDatabases$tra6","rank","onMouseMove","onTouchMove","flatMap","rowIndex","colIndex","isLightSquare","isSelected","isDragging","WebkitTouchCallout","WebkitUserSelect","touchAction","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","onMouseEnter","target","onMouseLeave","className","pointerEvents","zIndex","markerWidth","markerHeight","refX","refY","orient","points","stroke","strokeWidth","x1","y1","x2","y2","markerEnd","transform","_openingDatabases$tra7","_openingDatabases$tra8","textTransform","ceil","round","maxHeight","overflowY","fontStyle","move","index","_c","$RefreshReg$"],"sources":["/Users/tgira1018/Documents/GitHub/boardmate/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { ChevronLeft, RotateCcw, Play, BookOpen, Target, Undo2 } from 'lucide-react';\n\nconst ChessTrainingApp = () => {\n  // Add mobile-specific CSS\n  useEffect(() => {\n    // Add mobile viewport and chess font optimization\n    const style = document.createElement('style');\n    style.textContent = `\n      .chess-piece {\n        font-family: 'Arial Unicode MS', 'Lucida Grande', 'Segoe UI Symbol', 'DejaVu Sans', Arial, sans-serif !important;\n        font-feature-settings: normal !important;\n        -webkit-font-smoothing: antialiased !important;\n        -moz-osx-font-smoothing: grayscale !important;\n        font-variant-emoji: text !important;\n        text-rendering: optimizeLegibility !important;\n        font-size: inherit !important;\n        line-height: 1 !important;\n        vertical-align: baseline !important;\n        font-weight: normal !important;\n        font-style: normal !important;\n        color: inherit !important;\n        -webkit-text-fill-color: inherit !important;\n        -webkit-text-stroke: 0 !important;\n        -webkit-font-feature-settings: normal !important;\n        font-variant: normal !important;\n      }\n\n      .chess-piece-white {\n        /* SVG styling handled in component */\n      }\n\n      .chess-piece-black {\n        /* SVG styling handled in component */\n      }\n\n      body {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        overflow-x: hidden;\n      }\n    `;\n    document.head.appendChild(style);\n\n    // Ensure viewport is set for mobile\n    let viewport = document.querySelector('meta[name=\"viewport\"]');\n    if (!viewport) {\n      viewport = document.createElement('meta');\n      viewport.name = 'viewport';\n      viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';\n      document.head.appendChild(viewport);\n    }\n\n    return () => {\n      document.head.removeChild(style);\n    };\n  }, []);\n\n  // Initial board setup - function to always get fresh copy\n  const getInitialBoard = () => [\n    ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],\n    ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    [null, null, null, null, null, null, null, null],\n    ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n    ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']\n  ];\n\n  // State for responsive design\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const [board, setBoard] = useState(() => getInitialBoard());\n  const [selectedSquare, setSelectedSquare] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('white');\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [gameMode, setGameMode] = useState('menu');\n  const [trainingMode, setTrainingMode] = useState(null);\n  const [selectedVariation, setSelectedVariation] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState({ correct: 0, total: 0 });\n  const [draggedPiece, setDraggedPiece] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [showHint, setShowHint] = useState(null);\n  const [needsReplay, setNeedsReplay] = useState(false);\n\n  // Undo functionality - minimal addition\n  const [undoStack, setUndoStack] = useState([]);\n\n  // Add timeout refs for cleanup\n  const timeoutRefs = useRef([]);\n\n  const clearAllTimeouts = () => {\n    timeoutRefs.current.forEach(clearTimeout);\n    timeoutRefs.current = [];\n  };\n\n  const addTimeout = (callback, delay) => {\n    const timeoutId = setTimeout(() => {\n      callback();\n      timeoutRefs.current = timeoutRefs.current.filter(id => id !== timeoutId);\n    }, delay);\n    timeoutRefs.current.push(timeoutId);\n    return timeoutId;\n  };\n\n  // Opening databases with all variations\n  const openingDatabases = {\n    sicilianDragon: {\n      name: \"Sicilian Defence - Accelerated Dragon\",\n      color: \"black\",\n      variations: {\n        mainLine: {\n          name: \"Main Line (Modern Variation)\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6\": [\"f1-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8\": [\"c4-b3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,b1-c3,f8-g7,c1-e3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3,c8-d7\": [\"d1-d2\"]\n          }\n        },\n        maroczyBind: {\n          name: \"Maroczy Bind\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"c2-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8\": [\"f1-e2\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6\": [\"e1-g1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6,e1-g1\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c2-c4,f8-g7,c1-e3,g8-f6,b1-c3,e8-g8,f1-e2,d7-d6,e1-g1,c8-d7\": [\"a1-c1\"]\n          }\n        },\n        exchange: {\n          name: \"Exchange Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"d4-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6\": [\"f1-d3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7\": [\"e1-g1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6\": [\"c2-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8,b1-c3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,d4-c6,b7-c6,f1-d3,f8-g7,e1-g1,g8-f6,c2-c4,e8-g8,b1-c3,d7-d6\": [\"d1-e2\"]\n          }\n        },\n        be3Variation: {\n          name: \"5. Be3 Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6\": [\"f1-c4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8\": [\"c4-b3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3\": [\"c8-d7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,c1-e3,f8-g7,b1-c3,g8-f6,f1-c4,e8-g8,c4-b3,d7-d6,f2-f3,c8-d7\": [\"d1-d2\"]\n          }\n        },\n        f3Variation: {\n          name: \"5. f3 Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"c7-c5\"],\n            \"e2-e4,c7-c5\": [\"g1-f3\"],\n            \"e2-e4,c7-c5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4\": [\"c5-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4\": [\"f3-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4\": [\"g7-g6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6\": [\"f2-f3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3\": [\"f8-g7\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7\": [\"b1-c3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3\": [\"g8-f6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6\": [\"c1-e3\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3\": [\"e8-g8\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8\": [\"d1-d2\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2\": [\"d7-d6\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6\": [\"e1-c1\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6,e1-c1\": [\"c6-d4\"],\n            \"e2-e4,c7-c5,g1-f3,b8-c6,d2-d4,c5-d4,f3-d4,g7-g6,f2-f3,f8-g7,b1-c3,g8-f6,c1-e3,e8-g8,d1-d2,d7-d6,e1-c1,c6-d4\": [\"e3-d4\"]\n          }\n        }\n      }\n    },\n    scotchGame: {\n      name: \"Scotch Game\",\n      color: \"white\",\n      variations: {\n        classical: {\n          name: \"Classical Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"c1-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3\": [\"d8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3\": [\"g8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4\": [\"e8-g8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1\": [\"c5-b6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6\": [\"f2-f4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6,f2-f4\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,c2-c3,g8-e7,f1-c4,e8-g8,e1-g1,c5-b6,f2-f4,d7-d6\": [\"g1-h1\"]\n          }\n        },\n        schmidt: {\n          name: \"Schmidt Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"d4-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6\": [\"e4-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5\": [\"d8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7\": [\"d1-e2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2\": [\"f6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5\": [\"c2-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4\": [\"c8-a6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6\": [\"b2-b3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6,b2-b3\": [\"g7-g6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,d4-c6,b7-c6,e4-e5,d8-e7,d1-e2,f6-d5,c2-c4,c8-a6,b2-b3,g7-g6\": [\"g2-g3\"]\n          }\n        },\n        fourKnights: {\n          name: \"Scotch Four Knights\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3\": [\"f8-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4\": [\"d4-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6\": [\"f1-d3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5\": [\"e4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5\": [\"c6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5,e1-g1\": [\"e8-g8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,g8-f6,b1-c3,f8-b4,d4-c6,b7-c6,f1-d3,d7-d5,e4-d5,c6-d5,e1-g1,e8-g8\": [\"c1-g5\"]\n          }\n        },\n        blumenfeld: {\n          name: \"Blumenfeld Scotch\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5\": [\"c1-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3\": [\"d8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6\": [\"d4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5\": [\"c5-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3\": [\"f2-e3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3\": [\"f6-h4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4\": [\"g2-g3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3\": [\"h4-d8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8\": [\"d1-g4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4\": [\"g7-g6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4,g7-g6\": [\"g4-f4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,f8-c5,c1-e3,d8-f6,d4-b5,c5-e3,f2-e3,f6-h4,g2-g3,h4-d8,d1-g4,g7-g6,g4-f4\": [\"d7-d6\"]\n          }\n        },\n        steinitz: {\n          name: \"Steinitz Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4\": [\"d8-h4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3\": [\"f8-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4\": [\"f1-e2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2\": [\"h4-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4\": [\"d4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5\": [\"b4-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3\": [\"b2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3\": [\"e8-d8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8,e1-g1\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f3-d4,d8-h4,b1-c3,f8-b4,f1-e2,h4-e4,d4-b5,b4-c3,b2-c3,e8-d8,e1-g1,g8-f6\": [\"f1-e1\"]\n          }\n        }\n      }\n    },\n    scotchGambit: {\n      name: \"Scotch Gambit\",\n      color: \"white\",\n      variations: {\n        mainLine: {\n          name: \"Main Line (Two Knights Defense)\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e4-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5\": [\"c4-b5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5\": [\"f6-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4\": [\"f3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4\": [\"c8-d7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7\": [\"b5-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6\": [\"b7-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1,f8-c5\": [\"f2-f3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e4-e5,d7-d5,c4-b5,f6-e4,f3-d4,c8-d7,b5-c6,b7-c6,e1-g1,f8-c5,f2-f3\": [\"e4-g5\"]\n          }\n        },\n        classical: {\n          name: \"Classical Variation\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6\": [\"c3-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4\": [\"c5-b4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4\": [\"c1-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2\": [\"b4-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2\": [\"b1-d2\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5\": [\"e4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5,e4-d5\": [\"f6-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,g8-f6,c3-d4,c5-b4,c1-d2,b4-d2,b1-d2,d7-d5,e4-d5,f6-d5\": [\"e1-g1\"]\n          }\n        },\n        haxoGambit: {\n          name: \"Haxo Gambit\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3\": [\"d4-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3\": [\"c4-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7\": [\"e8-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7\": [\"d1-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5\": [\"e8-e8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8\": [\"d5-c5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6\": [\"c5-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6,c5-c3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-c5,c2-c3,d4-c3,c4-f7,e8-f7,d1-d5,e8-e8,d5-c5,d7-d6,c5-c3,g8-f6\": [\"e1-g1\"]\n          }\n        },\n        maxLange: {\n          name: \"Max Lange Attack\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1\": [\"f6-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4\": [\"f1-e1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1\": [\"d7-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5\": [\"c4-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5\": [\"d8-d5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5\": [\"b1-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3\": [\"d5-a5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5\": [\"c3-e4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5,c3-e4\": [\"c8-e6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,g8-f6,e1-g1,f6-e4,f1-e1,d7-d5,c4-d5,d8-d5,b1-c3,d5-a5,c3-e4,c8-e6\": [\"e4-g5\"]\n          }\n        },\n        solidBe7: {\n          name: \"Solid 4...Be7\",\n          moves: {\n            \"\": [\"e2-e4\"],\n            \"e2-e4\": [\"e7-e5\"],\n            \"e2-e4,e7-e5\": [\"g1-f3\"],\n            \"e2-e4,e7-e5,g1-f3\": [\"b8-c6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6\": [\"d2-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4\": [\"e5-d4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4\": [\"f1-c4\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4\": [\"f8-e7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7\": [\"c2-c3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3\": [\"d7-d6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6\": [\"d1-b3\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3\": [\"g8-f6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6\": [\"c4-f7\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7\": [\"e8-f8\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8\": [\"f3-g5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5\": [\"c6-e5\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5\": [\"e1-g1\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5,e1-g1\": [\"h7-h6\"],\n            \"e2-e4,e7-e5,g1-f3,b8-c6,d2-d4,e5-d4,f1-c4,f8-e7,c2-c3,d7-d6,d1-b3,g8-f6,c4-f7,e8-f8,f3-g5,c6-e5,e1-g1,h7-h6\": [\"f2-f4\"]\n          }\n        }\n      }\n    }\n  };\n\n  // SVG piece components - using inline SVG for consistent rendering\n  const getPieceSVG = (piece) => {\n    const isWhite = isPieceWhite(piece);\n    const pieceType = piece.toLowerCase();\n\n    const kingSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m501.6 1811 48.4-354.4-260-269.2s-166.4-288.2 29.9-481C582.2 448.7 826 727.2 826 727.2l195.6-165.7 184 165.7s216.4-232.5 430.4-76c214 156.5 255.4 317.6 117.4 531.6-138.1 214-250.9 280.7-250.9 280.7L1558 1811z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"M977 298v-95h94v95h107v95h-107v153q-48-16-94 0V393H870v-95zm47 314q-47 0-136 121-31-36-50-55 93-140 186-140 92 0 186 140-20 19-50 55-90-121-136-121zm-447 907-26 156 145-84zm410-206q-1-147-36.5-274.5T870 845q-45-88-131.5-153T570 627q-103 0-208 93T257 949q0 109 86.5 236T546 1408q212-88 441-95zm37 530H448l61-365q-325-280-326-535-1-159 125-274.5T575 553q78 0 158.5 47T876 719q61 74 98.5 164.5T1024 1034q12-60 49-150.5t99-164.5q61-72 142-119t159-47q140 0 266 115.5T1865 943q-2 255-326 535l61 365zm0-74h489l-50-298q-216-84-439-84t-439 84l-50 298zm447-250 26 156-145-84zm-410-206q229 7 441 95 115-96 202-223t87-236q0-136-105.5-229T1478 627q-83 0-169.5 65T1178 845q-46 66-81.5 193.5T1061 1313zm-176 233 141-84 137 86-141 84z\"/>\n      </svg>\n    );\n\n    const queenSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m508.5 1815.6 48.4-356.7-216.3-554.6-135.8-20.7-16.1-126.5 112.7-43.8 78.3 73.7-18.4 99 246.2 197.8 112.8-568.3L635 428l78.3-108 112.8 43.7-23 161 223.2 474 244-490-66.8-105.9 92-92 105.9 73.6L1337 534l103.5 529.2 260-161-16-142.7 131-46 57.6 131.1-207 103.6-175 529.2 48.4 308.4z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"M1024 1769h478q-53-130-43-280-100-39-213-67.5t-222-28.5q-110 0-223 28.5T589 1489q9 150-43 280zm0-450q111 0 223.5 26.5T1468 1413q17-105 60.5-212.5T1634 988l-220 155-123-601-267 555-267-555-123 601-220-155q61 105 104.5 212.5T580 1413q108-41 220.5-67.5T1024 1319zm0 524H441q114-231 57.5-456.5T296 937q-12 2-19 2-54 0-92.5-38.5T146 808t38.5-92.5T277 677t92.5 38.5T408 808q0 20-6 38-4 14-15 33l196 139 100-486q-64-31-72-103-5-44 29-91t88-53q54-5 96 29t48 88q7 68-46 114l198 412 198-412q-54-46-46-114 6-54 48-88t96-29q54 6 87.5 53t29.5 91q-9 72-72 103l100 486 196-139q-12-19-15-33-6-18-6-38 0-54 38.5-92.5T1771 677t92.5 38.5T1902 808t-38.5 92.5T1771 939q-7 0-19-2-147 224-203 449.5t58 456.5zM276 746q-62 0-62 62t62 62q63 0 63-62t-63-62zm466-394q-62 0-62 62t62 62 62-62-62-62zM590 1519l119 72-134 86q19-86 15-158zm1182-773q-63 0-63 62t63 62q62 0 62-62t-62-62zm-466-394q-62 0-62 62t62 62 62-62-62-62zm152 1167-119 72 134 86q-20-86-15-158zm-573 47 139-83 139 86-139 84z\"/>\n      </svg>\n    );\n\n    const rookSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m435 1804 16-212 152-115 51-688-148-115-7-276 210-2 4 138 198 2 7-140 212-3 14 145 193-4 5-138h204l-7 285-145 106 42 693 172 124 19 207z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"M1024 1501H643l5-74h752l5 74zm0-661H692l5-74h654l5 74zm0 1003H383l29-264 159-118 50-659-149-107-17-341h289v147h137V354h286v147h137V354h289l-17 341-149 107 50 659 159 118 29 264zm0-74h557l-15-149-161-119-54-735 152-109 13-230h-138v148h-285V427H955v148H670V427H532l13 230 152 109-54 735-161 119-15 149z\"/>\n      </svg>\n    );\n\n    const bishopSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m948 366 1-139 148-7 1 147zM564 860c114-267 456-443 456-443s392 176 476 502c-9 209-183 332-183 332l27 221-653 6 46-233s-230-171-169-385zm-101 790c175 6 355 23 425-142h92s0 190-88 246c-163 103-625 38-625 38s-15-146 196-142zm631 37-36-185 102 5s22 153 315 131c381-17 318 153 318 153l-483 5z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"M1024 356q66 0 64-66 1-55-64-55-66 0-64 55-3 66 64 66zm0 1204q0 114-101 199t-223 84H205q0-117 65-179t142-62h250q51 0 88-7t71-60l10-16h76q-7 21-3 13-45 105-109 125t-146 19H409q-52 0-86 40t-34 53h424q66 0 159-65t93-185H624q67-116 72-229-114-119-162-223t-6-224q33-96 118-189t312-247q-17-11-46-36t-29-79q0-58 41-96t100-38q58 0 100 38t41 96q0 54-29 79t-46 36q226 153 311 247t119 189q42 119-6 224t-162 223q4 113 72 229h-341q0 120 93 185t159 65h424q0-13-34-53t-86-40h-240q-83 0-146-19t-109-125q4 8-3-13h76l10 16q33 53 70 60t89 7h250q76 0 142 62t65 179h-495q-123 0-223-84t-101-199zm0-114h283q-28-84-29-154-120-41-254-38-135-3-254 38-2 70-29 154zm0-267q159-1 285 42 189-180 142-346-60-193-427-431-368 238-427 431-48 166 142 346 125-43 285-42zm-47-361V714h94v104h95v89h-95v165h-94V907h-95v-89z\"/>\n      </svg>\n    );\n\n    const knightSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m352 861 787-569 94 148s336 103 398 388c63 286 51 974 51 974l-1088 9s-37-290 184-460c221-171 221-212 221-212s-226-71-295-16-117 138-117 138l-129-67 74-85-88-97-94 56z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"m1151 178-115 154c-74 50-147 98-220 144-73 45-112 81-116 107L304 846l12 297 122-86 51 50-115 82 217 121 56-102c37-68 135-88 292-60l-55 85c-25 37-63 60-115 71a608 608 0 0 0-183 238c-32 82-45 182-39 301h1242c-23-55-42-118-57-190-15-73-17-152-5-237 29-239 13-440-47-603-61-164-205-303-433-418l-96-217zm-17 145 59 133a664 664 0 0 1 262 188c55 72 100 150 134 234 27 97 40 181 41 253 0 71-3 140-9 205-7 65-11 131-13 199-2 67 9 145 32 234H621c-4-84 12-158 48-223s85-124 146-177c78-22 129-56 152-102s53-90 90-131c13-10 27-15 38-15 10-1 21 0 33-2 52-7 95-36 129-85 33-49 51-104 52-165l-19-67c-37 159-99 245-188 257l-45 6c-16 1-33 10-52 26-41-25-87-35-138-31-74 6-129 15-165 27l-108 73-39 45-47-28 78-65-138-144-64 41-4-125 366-241c15-34 58-74 131-120l208-131 49-69zM960 564c-6 0-12 2-18 7L826 671l212 2c23 0 17-21-16-63-24-31-44-46-62-46zM502 868l-33 4-33 56 57 26 46-55-37-31z\"/>\n      </svg>\n    );\n\n    const pawnSVG = (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2048 2048\" width=\"100%\" height=\"100%\">\n        <path fill={isWhite ? \"#f9f9f9\" : \"#101010\"} d=\"m734 981 196-193s-189-82-79-288c79-149 303-114 361 50 63 179-113 240-113 240l226 197Zm-235 799s-8-107 50-154c196-173 338-386 371-599l210 2c33 206 182 447 321 561 101 59 99 199 99 199z\"/>\n        <path fill={isWhite ? \"#101010\" : \"#f9f9f9\"} d=\"M520 1769h1008q8-97-132-182-132-101-196-239t-80-309H928q-15 170-79 309t-197 239q-141 85-132 182zm504 74H446v-74q-4-80 42-137t125-108q117-91 172-217t78-268H576l284-239q-86-74-86-188 0-103 73-177t177-74q103 0 177 74t73 177q0 114-86 188l284 239h-287q23 141 78 268t172 217q79 51 125 108t42 137v74zM756 974h536l-225-191q134-31 134-171 0-76-52-126t-125-51q-73 0-125 51t-52 126q0 140 134 171z\"/>\n      </svg>\n    );\n\n    // Return the appropriate SVG based on piece type\n    switch (pieceType) {\n      case 'k': return kingSVG;\n      case 'q': return queenSVG;\n      case 'r': return rookSVG;\n      case 'b': return bishopSVG;\n      case 'n': return knightSVG;\n      case 'p': return pawnSVG;\n      default: return kingSVG;\n    }\n  };\n\n  // Helper function to get display coordinates (flipped for black)\n  const getDisplayCoordinates = (row, col) => {\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      // Flip the board when playing as black\n      return [7 - row, 7 - col];\n    }\n    return [row, col];\n  };\n\n  // Helper functions\n  const getSquareName = (row, col) => {\n    return String.fromCharCode(97 + col) + (8 - row);\n  };\n\n  const parseSquareName = (square) => {\n    const col = square.charCodeAt(0) - 97;\n    const row = 8 - parseInt(square[1]);\n    return [row, col];\n  };\n\n  const isPieceWhite = (piece) => piece && piece === piece.toUpperCase();\n\n  const isValidMove = (fromRow, fromCol, toRow, toCol, piece) => {\n    if (toRow < 0 || toRow >= 8 || toCol < 0 || toCol >= 8) return false;\n\n    const targetPiece = board[toRow][toCol];\n    if (targetPiece && isPieceWhite(piece) === isPieceWhite(targetPiece)) return false;\n\n    const rowDiff = Math.abs(toRow - fromRow);\n    const colDiff = Math.abs(toCol - fromCol);\n    const piece_type = piece.toLowerCase();\n\n    switch (piece_type) {\n      case 'p':\n        const direction = isPieceWhite(piece) ? -1 : 1;\n        const startRow = isPieceWhite(piece) ? 6 : 1;\n\n        if (toCol === fromCol) {\n          if (toRow === fromRow + direction && !targetPiece) return true;\n          if (fromRow === startRow && toRow === fromRow + 2 * direction && !targetPiece) return true;\n        } else if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction) {\n          return !!targetPiece;\n        }\n        return false;\n\n      case 'r':\n        return (rowDiff === 0 || colDiff === 0) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'n':\n        return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);\n\n      case 'b':\n        return rowDiff === colDiff && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'q':\n        return (rowDiff === 0 || colDiff === 0 || rowDiff === colDiff) && !isPathBlocked(fromRow, fromCol, toRow, toCol);\n\n      case 'k':\n        // Normal king moves\n        if (rowDiff <= 1 && colDiff <= 1) return true;\n\n        // Castling\n        if (rowDiff === 0 && colDiff === 2) {\n          return canCastle(fromRow, fromCol, toRow, toCol, piece);\n        }\n        return false;\n\n      default:\n        return false;\n    }\n  };\n\n  const canCastle = (fromRow, fromCol, toRow, toCol, piece) => {\n    // Basic castling validation\n    const isWhite = isPieceWhite(piece);\n    const kingRow = isWhite ? 7 : 0;\n    const kingCol = 4;\n\n    // King must be on starting square\n    if (fromRow !== kingRow || fromCol !== kingCol) return false;\n\n    // Determine if kingside or queenside castling\n    const isKingside = toCol === 6;\n    const isQueenside = toCol === 2;\n\n    if (!isKingside && !isQueenside) return false;\n\n    // Check if rook is in correct position\n    const rookCol = isKingside ? 7 : 0;\n    const rook = board[kingRow][rookCol];\n    const expectedRook = isWhite ? 'R' : 'r';\n\n    if (rook !== expectedRook) return false;\n\n    // Check if squares between king and rook are empty\n    const start = Math.min(kingCol, rookCol);\n    const end = Math.max(kingCol, rookCol);\n\n    for (let col = start + 1; col < end; col++) {\n      if (board[kingRow][col] !== null) return false;\n    }\n\n    // In a real game, we'd also check:\n    // - King hasn't moved (castling rights)\n    // - Rook hasn't moved (castling rights)\n    // - King not in check\n    // - King doesn't pass through check\n    // - King doesn't end up in check\n    // For training purposes, we'll allow castling if basic conditions are met\n\n    return true;\n  };\n\n  const isPathBlocked = (fromRow, fromCol, toRow, toCol) => {\n    const rowDir = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;\n    const colDir = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;\n\n    let currentRow = fromRow + rowDir;\n    let currentCol = fromCol + colDir;\n\n    while (currentRow !== toRow || currentCol !== toCol) {\n      if (board[currentRow][currentCol]) return true;\n      currentRow += rowDir;\n      currentCol += colDir;\n    }\n\n    return false;\n  };\n\n  const makeMove = (fromRow, fromCol, toRow, toCol) => {\n    const newBoard = board.map(row => [...row]);\n    const piece = newBoard[fromRow][fromCol];\n\n    console.log(`Making move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n    // Handle castling\n    if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n      // This is a castling move\n      const isKingside = toCol === 6;\n      const rookFromCol = isKingside ? 7 : 0;\n      const rookToCol = isKingside ? 5 : 3;\n\n      // Move the rook\n      newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n      newBoard[fromRow][rookFromCol] = null;\n    }\n\n    newBoard[toRow][toCol] = piece;\n    newBoard[fromRow][fromCol] = null;\n\n    const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n    const updatedMoveHistory = [...moveHistory, moveNotation];\n\n    setBoard(newBoard);\n    setMoveHistory(updatedMoveHistory);\n    setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n\n    console.log('Updated move history:', updatedMoveHistory);\n\n    return { moveNotation, updatedMoveHistory };\n  };\n\n  const makeOpponentMove = (currentMoveHistory) => {\n    console.log('makeOpponentMove called');\n    console.log('Current moveHistory when making opponent move:', currentMoveHistory);\n\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n    const nextMoveKey = currentMoveHistory.join(',');\n    const opponentMoves = variation.moves[nextMoveKey];\n\n    console.log('Looking for opponent move with key:', `\"${nextMoveKey}\"`);\n    console.log('Available moves for this key:', opponentMoves);\n\n    if (opponentMoves && opponentMoves.length > 0) {\n      // Wait a bit to simulate thinking time\n      addTimeout(() => {\n        const opponentMove = opponentMoves[Math.floor(Math.random() * opponentMoves.length)];\n        console.log('Selected opponent move:', opponentMove);\n        const [fromSquare, toSquare] = opponentMove.split('-');\n        const [fromRow, fromCol] = parseSquareName(fromSquare);\n        const [toRow, toCol] = parseSquareName(toSquare);\n\n        console.log(`Opponent moving from ${fromSquare} to ${toSquare}`);\n\n        // Make the opponent move with a single state update\n        setBoard(currentBoard => {\n          const newBoard = currentBoard.map(row => [...row]);\n          const piece = newBoard[fromRow][fromCol];\n\n          console.log(`Making opponent move: ${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)} (${piece})`);\n\n          // Handle castling for opponent\n          if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n            const isKingside = toCol === 6;\n            const rookFromCol = isKingside ? 7 : 0;\n            const rookToCol = isKingside ? 5 : 3;\n\n            // Move the rook\n            newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n            newBoard[fromRow][rookFromCol] = null;\n          }\n\n          newBoard[toRow][toCol] = piece;\n          newBoard[fromRow][fromCol] = null;\n\n          return newBoard;\n        });\n\n        const moveNotation = `${getSquareName(fromRow, fromCol)}-${getSquareName(toRow, toCol)}`;\n\n        setMoveHistory(prevHistory => {\n          const updatedHistory = [...prevHistory, moveNotation];\n          console.log('Updated move history after opponent move:', updatedHistory);\n          return updatedHistory;\n        });\n\n        setCurrentPlayer(prevPlayer => prevPlayer === 'white' ? 'black' : 'white');\n        setFeedback('Your turn!');\n\n      }, 800);\n    } else {\n      console.log('No opponent moves found for key:', `\"${nextMoveKey}\"`);\n      setFeedback('End of opening line - great job!');\n    }\n  };\n\n  const undoLastMove = () => {\n    if (undoStack.length === 0) return;\n\n    const lastState = undoStack[undoStack.length - 1];\n\n    // Clear timeouts to prevent conflicts\n    clearAllTimeouts();\n\n    // Restore the previous state\n    setBoard(lastState.board);\n    setMoveHistory(lastState.moveHistory);\n    setCurrentPlayer(lastState.currentPlayer);\n    setScore(lastState.score);\n    setShowHint(lastState.showHint);\n    setNeedsReplay(lastState.needsReplay);\n\n    // Remove the last state from history\n    setUndoStack(prevStack => prevStack.slice(0, -1));\n\n    setFeedback('Move undone. Try again!');\n    setSelectedSquare(null);\n    setDraggedPiece(null);\n\n    // Clear feedback after a moment\n    addTimeout(() => {\n      setFeedback('');\n    }, 2000);\n  };\n\n  const checkMove = (userMove, currentMoveHistory) => {\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n    // Use the moveHistory that was passed in, excluding the user's move we just made\n    const moveKey = currentMoveHistory.slice(0, -1).join(',');\n    const expectedMoves = variation.moves[moveKey] || [];\n\n    console.log('Checking user move:', userMove);\n    console.log('Current move history:', currentMoveHistory);\n    console.log('Move key for lookup:', `\"${moveKey}\"`);\n    console.log('Expected moves:', expectedMoves);\n    console.log('Available keys in database:', Object.keys(variation.moves));\n    console.log('Move is correct?', expectedMoves.includes(userMove));\n\n    // Clear any existing hints\n    setShowHint(null);\n    setNeedsReplay(false);\n\n    if (expectedMoves.includes(userMove)) {\n      setFeedback(' Correct move!');\n      setScore(prev => ({ correct: prev.correct + 1, total: prev.total + 1 }));\n\n      console.log('Move was correct, calling makeOpponentMove...');\n\n      // Wait for move to be processed, then make opponent move\n      addTimeout(() => {\n        setFeedback('Opponent is thinking...');\n        // Wait a bit more for React state to update, then pass the current move history\n        addTimeout(() => {\n          makeOpponentMove(currentMoveHistory);\n        }, 300);\n      }, 500);\n    } else {\n      console.log('Move was incorrect, NOT calling makeOpponentMove');\n\n      // Save state for undo ONLY when user makes wrong move\n      setUndoStack(prevStack => [...prevStack, {\n        board: board.map(row => [...row]),\n        moveHistory: [...moveHistory],\n        currentPlayer,\n        score: { ...score },\n        showHint: null,\n        needsReplay: false\n      }]);\n\n      // Better error handling for empty expected moves\n      const expectedMovesText = expectedMoves.length > 0 ? expectedMoves.join(' or ') : 'No valid moves found';\n      setFeedback(` Wrong move! Expected: ${expectedMovesText}. Click \"Undo\" to try again.`);\n      setScore(prev => ({ correct: prev.correct, total: prev.total + 1 }));\n      setNeedsReplay(true);\n\n      // Show hint arrow for the best move only if we have expected moves\n      if (expectedMoves.length > 0) {\n        const bestMove = expectedMoves[0];\n        const [fromSquare, toSquare] = bestMove.split('-');\n\n        try {\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          // Convert to display coordinates\n          const [fromDisplayRow, fromDisplayCol] = getDisplayCoordinates(fromRow, fromCol);\n          const [toDisplayRow, toDisplayCol] = getDisplayCoordinates(toRow, toCol);\n\n          setShowHint({\n            from: { row: fromDisplayRow, col: fromDisplayCol },\n            to: { row: toDisplayRow, col: toDisplayCol },\n            notation: bestMove\n          });\n\n          console.log('Setting hint arrow:', {\n            from: { row: fromDisplayRow, col: fromDisplayCol },\n            to: { row: toDisplayRow, col: toDisplayCol },\n            notation: bestMove\n          });\n        } catch (error) {\n          console.error('Error parsing move for hint:', bestMove, error);\n        }\n      } else {\n        console.log('No expected moves found - cannot show hint arrow');\n      }\n\n      // Clear feedback after longer delay to give user time to see the hint\n      addTimeout(() => {\n        setFeedback('');\n        setShowHint(null);\n        setNeedsReplay(false);\n      }, 5000);\n    }\n  };\n\n  const handleMouseDown = (e, displayRow, displayCol) => {\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn and they're clicking their piece\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn || !piece || isPieceWhite(piece) !== (currentPlayer === 'white')) {\n      return;\n    }\n\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const clientX = e.clientX || (e.touches && e.touches[0]?.clientX) || 0;\n    const clientY = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;\n\n    setDraggedPiece({\n      piece,\n      fromRow: row,\n      fromCol: col,\n      displayRow,\n      displayCol\n    });\n    setDragOffset({\n      x: clientX - rect.left - rect.width / 2,\n      y: clientY - rect.top - rect.height / 2\n    });\n    setSelectedSquare([row, col]);\n  };\n\n  const handleTouchStart = (e, displayRow, displayCol) => {\n    e.preventDefault(); // Prevent scrolling\n    handleMouseDown(e, displayRow, displayCol);\n  };\n\n  const handleMouseMove = (e) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n  };\n\n  const handleTouchMove = (e) => {\n    if (!draggedPiece) return;\n    e.preventDefault(); // Prevent scrolling\n    handleMouseMove(e);\n  };\n\n  const handleMouseUp = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // Convert target display coordinates to actual board coordinates\n    let targetRow, targetCol;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      targetRow = 7 - targetDisplayRow;\n      targetCol = 7 - targetDisplayCol;\n    } else {\n      targetRow = targetDisplayRow;\n      targetCol = targetDisplayCol;\n    }\n\n    const { fromRow, fromCol } = draggedPiece;\n\n    if (isValidMove(fromRow, fromCol, targetRow, targetCol, draggedPiece.piece)) {\n      const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, targetRow, targetCol);\n      checkMove(moveNotation, updatedMoveHistory);\n    }\n\n    setDraggedPiece(null);\n    setSelectedSquare(null);\n  };\n\n  const handleTouchEnd = (e, targetDisplayRow, targetDisplayCol) => {\n    if (!draggedPiece) return;\n    e.preventDefault();\n\n    // For touch, we need to find what element we're over\n    if (e.changedTouches && e.changedTouches[0]) {\n      const touch = e.changedTouches[0];\n      const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);\n\n      // Find the chess square element\n      let targetElement = elementBelow;\n      while (targetElement && !targetElement.dataset?.square) {\n        targetElement = targetElement.parentElement;\n      }\n\n      if (targetElement && targetElement.dataset?.square) {\n        const [touchRow, touchCol] = targetElement.dataset.square.split(',').map(Number);\n        handleMouseUp(e, touchRow, touchCol);\n        return;\n      }\n    }\n\n    // Fallback to provided coordinates\n    handleMouseUp(e, targetDisplayRow, targetDisplayCol);\n  };\n\n  const handleSquareClick = (displayRow, displayCol) => {\n    if (draggedPiece) return; // Ignore clicks during drag\n\n    if (gameMode !== 'training') return;\n\n    // Convert display coordinates to actual board coordinates\n    let row, col;\n    if (trainingMode && openingDatabases[trainingMode]?.color === 'black') {\n      row = 7 - displayRow;\n      col = 7 - displayCol;\n    } else {\n      row = displayRow;\n      col = displayCol;\n    }\n\n    const opening = openingDatabases[trainingMode];\n    const piece = board[row][col];\n\n    // Check if it's the user's turn\n    const isUserTurn = (opening.color === 'white' && currentPlayer === 'white') ||\n                       (opening.color === 'black' && currentPlayer === 'black');\n\n    if (!isUserTurn) {\n      setFeedback('Wait for opponent to move...');\n      addTimeout(() => setFeedback(''), 1000);\n      return;\n    }\n\n    if (selectedSquare) {\n      const [fromRow, fromCol] = selectedSquare;\n      const fromPiece = board[fromRow][fromCol];\n\n      if (row === fromRow && col === fromCol) {\n        setSelectedSquare(null);\n        return;\n      }\n\n      if (isValidMove(fromRow, fromCol, row, col, fromPiece)) {\n        const { moveNotation, updatedMoveHistory } = makeMove(fromRow, fromCol, row, col);\n        checkMove(moveNotation, updatedMoveHistory);\n        setSelectedSquare(null);\n      } else {\n        setSelectedSquare(piece && isPieceWhite(piece) === (currentPlayer === 'white') ? [row, col] : null);\n      }\n    } else {\n      if (piece && isPieceWhite(piece) === (currentPlayer === 'white')) {\n        setSelectedSquare([row, col]);\n      }\n    }\n  };\n\n  const startTraining = (mode, variationKey = null) => {\n    console.log('Starting training for mode:', mode, 'variation:', variationKey);\n\n    // If no variation specified, go to variation selection\n    if (!variationKey) {\n      setTrainingMode(mode);\n      setGameMode('variationSelection');\n      return;\n    }\n\n    // Clear any existing timeouts\n    clearAllTimeouts();\n\n    const freshBoard = getInitialBoard();\n    console.log('Starting with fresh board:', freshBoard);\n\n    // Reset all state immediately\n    setTrainingMode(mode);\n    setSelectedVariation(variationKey);\n    setGameMode('training');\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setScore({ correct: 0, total: 0 });\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n\n    // Set the correct starting player based on opening\n    const opening = openingDatabases[mode];\n    const variation = opening.variations[variationKey];\n\n    if (opening.color === 'black') {\n      // If training as black, white moves first\n      console.log('Training as black - white will move first');\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after a short delay\n      addTimeout(() => {\n        console.log('Making automatic first white move');\n        const firstMove = variation.moves[\"\"][0]; // Should be \"e2-e4\"\n        console.log('First move from database:', firstMove);\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Making first move: ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly to avoid state timing issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n\n            // Handle castling for first move (unlikely but just in case)\n            if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n              const isKingside = toCol === 6;\n              const rookFromCol = isKingside ? 7 : 0;\n              const rookToCol = isKingside ? 5 : 3;\n\n              newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n              newBoard[fromRow][rookFromCol] = null;\n            }\n\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      // If training as white, user moves first\n      console.log('Training as white - you move first');\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const resetGame = () => {\n    console.log('Resetting game');\n\n    // Clear all pending timeouts first\n    clearAllTimeouts();\n\n    // Force immediate state reset with fresh board\n    const freshBoard = getInitialBoard();\n    console.log('Resetting board to:', freshBoard);\n\n    // Reset all state at once\n    setBoard(freshBoard);\n    setMoveHistory([]);\n    setSelectedSquare(null);\n    setFeedback('');\n    setDraggedPiece(null);\n    setShowHint(null);\n    setNeedsReplay(false);\n    setUndoStack([]);\n    setScore({ correct: 0, total: 0 });\n\n    // Restart the training mode\n    const opening = openingDatabases[trainingMode];\n    const variation = opening.variations[selectedVariation];\n\n    if (opening.color === 'black') {\n      setCurrentPlayer('white');\n      setFeedback('White is making the first move...');\n\n      // Make the first white move automatically after reset\n      addTimeout(() => {\n        const firstMove = variation.moves[\"\"][0]; // Should be \"e2-e4\"\n\n        if (firstMove) {\n          const [fromSquare, toSquare] = firstMove.split('-');\n          const [fromRow, fromCol] = parseSquareName(fromSquare);\n          const [toRow, toCol] = parseSquareName(toSquare);\n\n          console.log(`Reset: Making first move ${fromSquare} to ${toSquare}`);\n\n          // Make the move directly without using makeMove to avoid moveHistory issues\n          setBoard(currentBoard => {\n            const newBoard = currentBoard.map(row => [...row]);\n            const piece = newBoard[fromRow][fromCol];\n\n            // Handle castling for first move (unlikely but just in case)\n            if (piece && piece.toLowerCase() === 'k' && Math.abs(toCol - fromCol) === 2) {\n              const isKingside = toCol === 6;\n              const rookFromCol = isKingside ? 7 : 0;\n              const rookToCol = isKingside ? 5 : 3;\n\n              newBoard[toRow][rookToCol] = newBoard[fromRow][rookFromCol];\n              newBoard[fromRow][rookFromCol] = null;\n            }\n\n            newBoard[toRow][toCol] = piece;\n            newBoard[fromRow][fromCol] = null;\n            return newBoard;\n          });\n\n          setMoveHistory([`${fromSquare}-${toSquare}`]);\n          setCurrentPlayer('black');\n          setFeedback('Your turn! Play 1...c5 for the Sicilian Defense.');\n        }\n      }, 1000);\n    } else {\n      setCurrentPlayer('white');\n      setFeedback('Your turn! Make your opening move.');\n    }\n  };\n\n  const backToMenu = () => {\n    clearAllTimeouts();\n    setGameMode('menu');\n    setTrainingMode(null);\n    setSelectedVariation(null);\n    setBoard(getInitialBoard()); // Reset board when going back to menu\n    setMoveHistory([]);\n    setScore({ correct: 0, total: 0 });\n    setUndoStack([]);\n  };\n\n  // Handle global mouse events for drag and drop\n  useEffect(() => {\n    const handleGlobalMouseMove = (e) => {\n      if (draggedPiece) {\n        const clientX = e.clientX || (e.touches && e.touches[0]?.clientX) || 0;\n        const clientY = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;\n        setDragOffset({\n          x: clientX,\n          y: clientY\n        });\n      }\n    };\n\n    const handleGlobalTouchMove = (e) => {\n      if (draggedPiece && e.touches && e.touches[0]) {\n        e.preventDefault(); // Prevent scrolling while dragging\n        setDragOffset({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        });\n      }\n    };\n\n    const handleGlobalMouseUp = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    const handleGlobalTouchEnd = () => {\n      if (draggedPiece) {\n        setDraggedPiece(null);\n        setSelectedSquare(null);\n      }\n    };\n\n    // Mouse events\n    document.addEventListener('mousemove', handleGlobalMouseMove);\n    document.addEventListener('mouseup', handleGlobalMouseUp);\n\n    // Touch events\n    document.addEventListener('touchmove', handleGlobalTouchMove, { passive: false });\n    document.addEventListener('touchend', handleGlobalTouchEnd);\n\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n      document.removeEventListener('touchmove', handleGlobalTouchMove);\n      document.removeEventListener('touchend', handleGlobalTouchEnd);\n    };\n  }, [draggedPiece]);\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      clearAllTimeouts();\n    };\n  }, []);\n\n  // Styles\n  const styles = {\n    container: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #fef7cd 0%, #fed7aa 100%)',\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", sans-serif'\n    },\n    wrapper: {\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    header: {\n      textAlign: 'center',\n      marginBottom: '40px'\n    },\n    title: {\n      fontSize: '2.5rem',\n      color: '#92400e',\n      marginBottom: '10px',\n      fontWeight: 'bold'\n    },\n    subtitle: {\n      color: '#a16207',\n      fontSize: '1.1rem'\n    },\n    grid: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n      gap: '30px',\n      marginBottom: '40px'\n    },\n    card: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '30px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      cursor: 'pointer',\n      transition: 'transform 0.2s'\n    },\n    cardHeader: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '20px',\n      fontSize: '1.5rem',\n      fontWeight: '600'\n    },\n    cardText: {\n      color: '#6b7280',\n      marginBottom: '20px',\n      lineHeight: '1.6'\n    },\n    button: {\n      width: '100%',\n      padding: '12px 20px',\n      border: 'none',\n      borderRadius: '8px',\n      fontWeight: '600',\n      fontSize: '1rem',\n      cursor: 'pointer',\n      color: 'white'\n    },\n    gameHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '30px',\n      flexWrap: 'wrap',\n      gap: '20px'\n    },\n    navButton: {\n      display: 'flex',\n      alignItems: 'center',\n      background: 'none',\n      border: 'none',\n      color: '#a16207',\n      fontSize: '1rem',\n      cursor: 'pointer'\n    },\n    gameTitle: {\n      textAlign: 'center'\n    },\n    gameLayout: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-start',\n      gap: '30px',\n      flexWrap: 'wrap'\n    },\n    boardContainer: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px'\n    },\n    boardWrapper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    coordinatesContainer: {\n      display: 'grid',\n      gridTemplateColumns: '30px repeat(8, 1fr) 30px',\n      gridTemplateRows: '30px repeat(8, 1fr) 30px',\n      width: isMobile ? '410px' : '560px',\n      height: isMobile ? '410px' : '560px',\n      fontSize: '14px',\n      fontWeight: '600',\n      color: '#8B4513'\n    },\n    board: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(8, 1fr)',\n      gridTemplateRows: 'repeat(8, 1fr)',\n      width: isMobile ? '350px' : '500px',\n      height: isMobile ? '350px' : '500px',\n      border: '3px solid #8B4513',\n      borderRadius: '4px',\n      overflow: 'hidden',\n      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\n      gridColumn: '2 / 10',\n      gridRow: '2 / 10',\n      position: 'relative'\n    },\n    square: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontSize: isMobile ? '2.8rem' : '3.8rem',\n      cursor: 'pointer',\n      transition: 'background-color 0.15s ease, border 0.15s ease',\n      userSelect: 'none',\n      fontWeight: 'bold',\n      width: '100%',\n      height: '100%',\n      minWidth: 0,\n      minHeight: 0,\n      boxSizing: 'border-box'\n    },\n    sidebar: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px',\n      width: isMobile ? '100%' : '350px',\n      maxWidth: '500px'\n    },\n    infoCard: {\n      background: 'white',\n      borderRadius: '12px',\n      padding: '20px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n    },\n    infoTitle: {\n      fontSize: '1.2rem',\n      fontWeight: '600',\n      marginBottom: '15px',\n      color: '#374151'\n    }\n  };\n\n  if (gameMode === 'variationSelection') {\n    const opening = openingDatabases[trainingMode];\n    const variations = Object.keys(opening.variations);\n\n    return (\n      <div style={styles.container}>\n        <div style={styles.wrapper}>\n          <div style={styles.gameHeader}>\n            <button style={styles.navButton} onClick={backToMenu}>\n              <ChevronLeft size={20} style={{marginRight: '5px'}} />\n              Back to Menu\n            </button>\n\n            <div style={styles.gameTitle}>\n              <h2 style={{fontSize: '2rem', color: '#92400e', marginBottom: '5px'}}>\n                {opening.name}\n              </h2>\n              <p style={{color: '#a16207'}}>Choose a variation to practice</p>\n            </div>\n\n            <div></div>\n          </div>\n\n          <div style={styles.grid}>\n            {variations.map((variationKey) => {\n              const variation = opening.variations[variationKey];\n              return (\n                <div key={variationKey} style={styles.card} onClick={() => startTraining(trainingMode, variationKey)}>\n                  <div style={{...styles.cardHeader, color: opening.color === 'black' ? '#dc2626' : '#2563eb'}}>\n                    <Target size={24} />\n                    <h3 style={{marginLeft: '10px', fontSize: '1.2rem'}}>{variation.name}</h3>\n                  </div>\n                  <p style={styles.cardText}>\n                    Practice this specific variation of the {opening.name}. Learn the key moves and typical responses.\n                  </p>\n                  <button style={{...styles.button, backgroundColor: opening.color === 'black' ? '#dc2626' : '#2563eb'}}>\n                    Practice This Line\n                  </button>\n                </div>\n              );\n            })}\n\n            {/* Random variation option */}\n            <div style={styles.card} onClick={() => {\n              const randomVariation = variations[Math.floor(Math.random() * variations.length)];\n              startTraining(trainingMode, randomVariation);\n            }}>\n              <div style={{...styles.cardHeader, color: '#16a34a'}}>\n                <Play size={24} />\n                <h3 style={{marginLeft: '10px', fontSize: '1.2rem'}}>Random Variation</h3>\n              </div>\n              <p style={styles.cardText}>\n                Practice a random variation from this opening. Perfect for testing your overall knowledge of the opening.\n              </p>\n              <button style={{...styles.button, backgroundColor: '#16a34a'}}>\n                Random Practice\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (gameMode === 'menu') {\n    return (\n      <div style={styles.container}>\n        <div style={styles.wrapper}>\n          <div style={styles.header}>\n            <h1 style={styles.title}>Chess Opening Trainer</h1>\n            <p style={styles.subtitle}>Master your favorite openings against AI opposition</p>\n          </div>\n\n          <div style={styles.grid}>\n            <div style={styles.card} onClick={() => startTraining('sicilianDragon')}>\n              <div style={{...styles.cardHeader, color: '#dc2626'}}>\n                <Target size={24} />\n                <h2 style={{marginLeft: '10px'}}>Sicilian Dragon</h2>\n              </div>\n              <p style={styles.cardText}>Practice the Accelerated Dragon as Black. Choose from 5 different variations or practice randomly!</p>\n              <button style={{...styles.button, backgroundColor: '#dc2626'}}>\n                Choose Variation\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGame')}>\n              <div style={{...styles.cardHeader, color: '#2563eb'}}>\n                <BookOpen size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Game</h2>\n              </div>\n              <p style={styles.cardText}>Learn the Scotch Game as White. Choose from 5 different variations including the Classical and Schmidt lines!</p>\n              <button style={{...styles.button, backgroundColor: '#2563eb'}}>\n                Choose Variation\n              </button>\n            </div>\n\n            <div style={styles.card} onClick={() => startTraining('scotchGambit')}>\n              <div style={{...styles.cardHeader, color: '#16a34a'}}>\n                <Play size={24} />\n                <h2 style={{marginLeft: '10px'}}>Scotch Gambit</h2>\n              </div>\n              <p style={styles.cardText}>Master the Scotch Gambit as White. Choose from 5 different variations including the Max Lange Attack!</p>\n              <button style={{...styles.button, backgroundColor: '#16a34a'}}>\n                Choose Variation\n              </button>\n            </div>\n          </div>\n\n          <div style={{background: 'white', borderRadius: '12px', padding: '30px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'}}>\n            <h3 style={{fontSize: '1.5rem', marginBottom: '20px', color: '#374151'}}>How it works</h3>\n            <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px'}}>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}> Choose Your Variation</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>Each opening has 5 different variations to practice. Pick a specific line or practice randomly!</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}> Smart AI Responses</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>AI plays realistic variations from grandmaster games. Learn to handle different responses.</p>\n              </div>\n              <div>\n                <h4 style={{fontWeight: '600', marginBottom: '10px', color: '#374151'}}> Immediate Feedback</h4>\n                <p style={{color: '#6b7280', fontSize: '0.9rem', lineHeight: '1.5'}}>Get instant feedback on your moves. Make a mistake? Just click \"Undo\" to try again!</p>\n              </div>\n            </div>\n            <div style={{marginTop: '20px', padding: '15px', backgroundColor: '#f0f9ff', borderRadius: '8px', border: '1px solid #0ea5e9'}}>\n              <p style={{color: '#0c4a6e', fontSize: '0.9rem', textAlign: 'center'}}>\n                <strong> Tip:</strong> Each opening now includes multiple variations like the Classical, Schmidt, and Steinitz lines. Master them all or focus on your favorites!\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const opening = openingDatabases[trainingMode];\n  const variation = opening.variations[selectedVariation];\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.wrapper}>\n        <div style={styles.gameHeader}>\n          <button style={styles.navButton} onClick={backToMenu}>\n            <ChevronLeft size={20} style={{marginRight: '5px'}} />\n            Back to Menu\n          </button>\n\n          <div style={styles.gameTitle}>\n            <h2 style={{fontSize: '2rem', color: '#92400e', marginBottom: '5px'}}>\n              {opening.name}\n            </h2>\n            <p style={{color: '#a16207', fontSize: '1rem', fontWeight: '600'}}>\n              {variation.name}\n            </p>\n            <p style={{color: '#a16207', fontSize: '0.9rem'}}>Playing as {opening.color}</p>\n          </div>\n\n          <div style={{display: 'flex', gap: '15px'}}>\n            <button\n              style={{\n                ...styles.navButton,\n                opacity: undoStack.length > 0 ? 1 : 0.5,\n                cursor: undoStack.length > 0 ? 'pointer' : 'not-allowed'\n              }}\n              onClick={undoStack.length > 0 ? undoLastMove : undefined}\n              disabled={undoStack.length === 0}\n            >\n              <Undo2 size={20} style={{marginRight: '5px'}} />\n              Undo\n            </button>\n\n            <button style={styles.navButton} onClick={resetGame}>\n              <RotateCcw size={20} style={{marginRight: '5px'}} />\n              Reset\n            </button>\n          </div>\n        </div>\n\n        <div style={styles.gameLayout}>\n          <div style={styles.boardContainer}>\n            <div style={styles.boardWrapper}>\n              {/* Board orientation indicator */}\n              {trainingMode && (\n                <div style={{\n                  marginBottom: '10px',\n                  textAlign: 'center',\n                  color: needsReplay ? '#dc2626' : '#a16207',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  padding: needsReplay ? '8px 16px' : '0',\n                  backgroundColor: needsReplay ? '#fef2f2' : 'transparent',\n                  borderRadius: needsReplay ? '8px' : '0',\n                  border: needsReplay ? '2px solid #dc2626' : 'none'\n                }}>\n                  {needsReplay ? ' Wrong move! Follow the yellow arrow to make the correct move.' :\n                   (openingDatabases[trainingMode].color === 'black'\n                    ? ' Playing as Black (Black pieces at bottom)'\n                    : ' Playing as White (White pieces at bottom)'\n                  )}\n                </div>\n              )}\n\n              {/* Board with coordinates */}\n              <div style={styles.coordinatesContainer}>\n                {/* Top file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`top-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n\n                {/* Left rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`left-${i}`} style={{\n                      gridColumn: 1,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* The chess board */}\n                <div style={styles.board} onMouseMove={handleMouseMove} onTouchMove={handleTouchMove}>\n                  {board.flatMap((row, rowIndex) =>\n                    row.map((piece, colIndex) => {\n                      // Get display coordinates (potentially flipped)\n                      const [displayRow, displayCol] = getDisplayCoordinates(rowIndex, colIndex);\n                      const isLightSquare = (displayRow + displayCol) % 2 === 0;\n                      const isSelected = selectedSquare && selectedSquare[0] === rowIndex && selectedSquare[1] === colIndex;\n                      const isDragging = draggedPiece && draggedPiece.fromRow === rowIndex && draggedPiece.fromCol === colIndex;\n\n                      // Chess.com style colors\n                      let backgroundColor;\n                      if (isSelected) {\n                        backgroundColor = '#f7dc6f'; // Yellow highlight for selected\n                      } else {\n                        backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863'; // Chess.com colors\n                      }\n\n                      return (\n                        <div\n                          key={`${rowIndex}-${colIndex}`}\n                          data-square={`${displayRow},${displayCol}`}\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            fontSize: isMobile ? '2.2rem' : '2.8rem',\n                            cursor: piece ? 'pointer' : 'default',\n                            transition: 'background-color 0.15s ease, border 0.15s ease',\n                            userSelect: 'none',\n                            fontWeight: 'bold',\n                            width: '100%',\n                            height: '100%',\n                            minWidth: 0,\n                            minHeight: 0,\n                            boxSizing: 'border-box',\n                            backgroundColor,\n                            border: isSelected ? '2px solid #f39c12' : 'none',\n                            // Position this square at its display coordinates\n                            gridColumn: displayCol + 1,\n                            gridRow: displayRow + 1,\n                            opacity: isDragging ? 0.3 : 1,\n                            // Mobile optimization\n                            WebkitTouchCallout: 'none',\n                            WebkitUserSelect: 'none',\n                            touchAction: 'none'\n                          }}\n                          onMouseDown={(e) => handleMouseDown(e, displayRow, displayCol)}\n                          onMouseUp={(e) => handleMouseUp(e, displayRow, displayCol)}\n                          onTouchStart={(e) => handleTouchStart(e, displayRow, displayCol)}\n                          onTouchEnd={(e) => handleTouchEnd(e, displayRow, displayCol)}\n                          onClick={() => handleSquareClick(displayRow, displayCol)}\n                          onTouchCancel={() => {\n                            setDraggedPiece(null);\n                            setSelectedSquare(null);\n                          }}\n                          onMouseEnter={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#ead5aa' : '#a67c52';\n                            }\n                          }}\n                          onMouseLeave={(e) => {\n                            if (!isSelected && !draggedPiece) {\n                              e.target.style.backgroundColor = isLightSquare ? '#f0d9b5' : '#b58863';\n                            }\n                          }}\n                        >\n                          {piece && !isDragging && (\n                            <div\n                              className={`chess-piece ${isPieceWhite(piece) ? 'chess-piece-white' : 'chess-piece-black'}`}\n                              style={{\n                                width: '80%',\n                                height: '80%',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center'\n                              }}\n                            >\n                              {getPieceSVG(piece)}\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })\n                  )}\n\n                  {/* Hint Arrow */}\n                  {showHint && (\n                    <div style={{\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                      pointerEvents: 'none',\n                      zIndex: 10\n                    }}>\n                      <svg style={{ width: '100%', height: '100%' }}>\n                        <defs>\n                          <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\"\n                                  refX=\"9\" refY=\"3.5\" orient=\"auto\">\n                            <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#ffeb3b\" stroke=\"#f39c12\" strokeWidth=\"1\"/>\n                          </marker>\n                        </defs>\n                        <line\n                          x1={`${(showHint.from.col + 0.5) * 12.5}%`}\n                          y1={`${(showHint.from.row + 0.5) * 12.5}%`}\n                          x2={`${(showHint.to.col + 0.5) * 12.5}%`}\n                          y2={`${(showHint.to.row + 0.5) * 12.5}%`}\n                          stroke=\"#ffeb3b\"\n                          strokeWidth=\"6\"\n                          markerEnd=\"url(#arrowhead)\"\n                        />\n                      </svg>\n                    </div>\n                  )}\n\n                  {/* Dragged piece */}\n                  {draggedPiece && (\n                    <div style={{\n                      position: 'fixed',\n                      pointerEvents: 'none',\n                      width: isMobile ? '44px' : '60px',\n                      height: isMobile ? '44px' : '60px',\n                      zIndex: 1000,\n                      left: `${dragOffset.x}px`,\n                      top: `${dragOffset.y}px`,\n                      transform: 'translate(-50%, -50%)'\n                    }}>\n                      <div\n                        className={`chess-piece ${isPieceWhite(draggedPiece.piece) ? 'chess-piece-white' : 'chess-piece-black'}`}\n                        style={{\n                          width: '100%',\n                          height: '100%',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center'\n                        }}\n                      >\n                        {getPieceSVG(draggedPiece.piece)}\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Right rank numbers */}\n                {Array.from({length: 8}, (_, i) => {\n                  const rank = trainingMode && openingDatabases[trainingMode]?.color === 'black' ? i + 1 : 8 - i;\n                  return (\n                    <div key={`right-${i}`} style={{\n                      gridColumn: 10,\n                      gridRow: i + 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {rank}\n                    </div>\n                  );\n                })}\n\n                {/* Bottom file letters */}\n                {Array.from({length: 8}, (_, i) => {\n                  const file = trainingMode && openingDatabases[trainingMode]?.color === 'black'\n                    ? String.fromCharCode(104 - i) // h,g,f,e,d,c,b,a\n                    : String.fromCharCode(97 + i);  // a,b,c,d,e,f,g,h\n                  return (\n                    <div key={`bottom-${i}`} style={{\n                      gridColumn: i + 2,\n                      gridRow: 10,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center'\n                    }}>\n                      {file}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          <div style={styles.sidebar}>\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Game Status</h3>\n              <p style={{marginBottom: '8px', color: '#6b7280'}}>\n                Current turn: <span style={{textTransform: 'capitalize', fontWeight: '600', color: '#374151'}}>{currentPlayer}</span>\n              </p>\n              <p style={{color: '#6b7280'}}>Move: {Math.ceil(moveHistory.length / 2)}</p>\n              <p style={{marginTop: '8px', fontWeight: '600', color:\n                ((opening.color === 'white' && currentPlayer === 'white') ||\n                 (opening.color === 'black' && currentPlayer === 'black')) ? '#16a34a' : '#ea580c'\n              }}>\n                {((opening.color === 'white' && currentPlayer === 'white') ||\n                  (opening.color === 'black' && currentPlayer === 'black')) ? 'Your turn!' : 'Opponent thinking...'}\n              </p>\n            </div>\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Score</h3>\n              <p style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#374151', marginBottom: '8px'}}>\n                {score.correct}/{score.total}\n              </p>\n              <p style={{fontSize: '0.9rem', color: '#6b7280'}}>\n                {score.total > 0 ? `${Math.round((score.correct / score.total) * 100)}% accuracy` : 'No moves yet'}\n              </p>\n            </div>\n\n            {feedback && (\n              <div style={{\n                borderRadius: '12px',\n                padding: '20px',\n                fontWeight: '600',\n                backgroundColor: feedback.includes('') ? '#dcfce7' : feedback.includes('') ? '#fef2f2' : '#f0f9ff',\n                color: feedback.includes('') ? '#166534' : feedback.includes('') ? '#991b1b' : '#1e40af',\n                border: feedback.includes('') ? '2px solid #22c55e' : feedback.includes('') ? '2px solid #ef4444' : '2px solid #3b82f6',\n                transform: feedback.includes('') ? 'scale(1.02)' : 'scale(1)',\n                transition: 'all 0.3s ease'\n              }}>\n                <p style={{ margin: 0 }}>{feedback}</p>\n                {showHint && (\n                  <div style={{ marginTop: '15px', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                    <p style={{\n                      margin: 0,\n                      fontSize: '0.9rem',\n                      color: '#b45309',\n                      backgroundColor: '#fef3c7',\n                      padding: '8px 12px',\n                      borderRadius: '6px',\n                      border: '1px solid #fbbf24'\n                    }}>\n                       Hint: Move from {showHint.notation.split('-')[0]} to {showHint.notation.split('-')[1]}\n                    </p>\n                    {undoStack.length > 0 && (\n                      <button\n                        style={{\n                          padding: '8px 16px',\n                          backgroundColor: '#3b82f6',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '6px',\n                          cursor: 'pointer',\n                          fontSize: '0.9rem',\n                          fontWeight: '600',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          gap: '5px'\n                        }}\n                        onClick={undoLastMove}\n                      >\n                        <Undo2 size={16} />\n                        Try Again\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div style={styles.infoCard}>\n              <h3 style={styles.infoTitle}>Move History</h3>\n              <div style={{maxHeight: '200px', overflowY: 'auto', fontSize: '0.9rem'}}>\n                {moveHistory.length === 0 ? (\n                  <p style={{color: '#9ca3af', fontStyle: 'italic'}}>No moves yet</p>\n                ) : (\n                  moveHistory.map((move, index) => (\n                    <div key={index} style={{display: 'flex', marginBottom: '4px'}}>\n                      <span style={{width: '30px', color: '#9ca3af'}}>{Math.ceil((index + 1) / 2)}.</span>\n                      <span style={{color: index % 2 === 0 ? '#374151' : '#6b7280'}}>\n                        {move}\n                      </span>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChessTrainingApp;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,SAAS,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErF,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B;EACAX,SAAS,CAAC,MAAM;IACd;IACA,MAAMY,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC7CF,KAAK,CAACG,WAAW,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;IACDF,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,KAAK,CAAC;;IAEhC;IACA,IAAIM,QAAQ,GAAGL,QAAQ,CAACM,aAAa,CAAC,uBAAuB,CAAC;IAC9D,IAAI,CAACD,QAAQ,EAAE;MACbA,QAAQ,GAAGL,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;MACzCI,QAAQ,CAACE,IAAI,GAAG,UAAU;MAC1BF,QAAQ,CAACG,OAAO,GAAG,4EAA4E;MAC/FR,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACC,QAAQ,CAAC;IACrC;IAEA,OAAO,MAAM;MACXL,QAAQ,CAACG,IAAI,CAACM,WAAW,CAACV,KAAK,CAAC;IAClC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMW,eAAe,GAAGA,CAAA,KAAM,CAC5B,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EACxC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EACxC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAChD,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAChD,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAChD,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAChD,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EACxC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CACzC;;EAED;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC2B,MAAM,CAACC,UAAU,IAAI,GAAG,CAAC;EAElE3B,SAAS,CAAC,MAAM;IACd,MAAM4B,YAAY,GAAGA,CAAA,KAAM;MACzBH,WAAW,CAACC,MAAM,CAACC,UAAU,IAAI,GAAG,CAAC;IACvC,CAAC;IACDD,MAAM,CAACG,gBAAgB,CAAC,QAAQ,EAAED,YAAY,CAAC;IAC/C,OAAO,MAAMF,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEF,YAAY,CAAC;EACjE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM,CAACG,KAAK,EAAEC,QAAQ,CAAC,GAAGjC,QAAQ,CAAC,MAAMwB,eAAe,CAAC,CAAC,CAAC;EAC3D,MAAM,CAACU,cAAc,EAAEC,iBAAiB,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACoC,aAAa,EAAEC,gBAAgB,CAAC,GAAGrC,QAAQ,CAAC,OAAO,CAAC;EAC3D,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwC,QAAQ,EAAEC,WAAW,CAAC,GAAGzC,QAAQ,CAAC,MAAM,CAAC;EAChD,MAAM,CAAC0C,YAAY,EAAEC,eAAe,CAAC,GAAG3C,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC4C,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;EAChE,MAAM,CAAC8C,QAAQ,EAAEC,WAAW,CAAC,GAAG/C,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgD,KAAK,EAAEC,QAAQ,CAAC,GAAGjD,QAAQ,CAAC;IAAEkD,OAAO,EAAE,CAAC;IAAEC,KAAK,EAAE;EAAE,CAAC,CAAC;EAC5D,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGrD,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACsD,UAAU,EAAEC,aAAa,CAAC,GAAGvD,QAAQ,CAAC;IAAEwD,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC5D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG3D,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC4D,WAAW,EAAEC,cAAc,CAAC,GAAG7D,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACA,MAAM,CAAC8D,SAAS,EAAEC,YAAY,CAAC,GAAG/D,QAAQ,CAAC,EAAE,CAAC;;EAE9C;EACA,MAAMgE,WAAW,GAAG9D,MAAM,CAAC,EAAE,CAAC;EAE9B,MAAM+D,gBAAgB,GAAGA,CAAA,KAAM;IAC7BD,WAAW,CAACE,OAAO,CAACC,OAAO,CAACC,YAAY,CAAC;IACzCJ,WAAW,CAACE,OAAO,GAAG,EAAE;EAC1B,CAAC;EAED,MAAMG,UAAU,GAAGA,CAACC,QAAQ,EAAEC,KAAK,KAAK;IACtC,MAAMC,SAAS,GAAGC,UAAU,CAAC,MAAM;MACjCH,QAAQ,CAAC,CAAC;MACVN,WAAW,CAACE,OAAO,GAAGF,WAAW,CAACE,OAAO,CAACQ,MAAM,CAACC,EAAE,IAAIA,EAAE,KAAKH,SAAS,CAAC;IAC1E,CAAC,EAAED,KAAK,CAAC;IACTP,WAAW,CAACE,OAAO,CAACU,IAAI,CAACJ,SAAS,CAAC;IACnC,OAAOA,SAAS;EAClB,CAAC;;EAED;EACA,MAAMK,gBAAgB,GAAG;IACvBC,cAAc,EAAE;MACdzD,IAAI,EAAE,uCAAuC;MAC7C0D,KAAK,EAAE,OAAO;MACdC,UAAU,EAAE;QACVC,QAAQ,EAAE;UACR5D,IAAI,EAAE,8BAA8B;UACpC6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDC,WAAW,EAAE;UACX9D,IAAI,EAAE,cAAc;UACpB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDE,QAAQ,EAAE;UACR/D,IAAI,EAAE,oBAAoB;UAC1B6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDG,YAAY,EAAE;UACZhE,IAAI,EAAE,kBAAkB;UACxB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDI,WAAW,EAAE;UACXjE,IAAI,EAAE,iBAAiB;UACvB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF;MACF;IACF,CAAC;IACDK,UAAU,EAAE;MACVlE,IAAI,EAAE,aAAa;MACnB0D,KAAK,EAAE,OAAO;MACdC,UAAU,EAAE;QACVQ,SAAS,EAAE;UACTnE,IAAI,EAAE,qBAAqB;UAC3B6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDO,OAAO,EAAE;UACPpE,IAAI,EAAE,mBAAmB;UACzB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDQ,WAAW,EAAE;UACXrE,IAAI,EAAE,qBAAqB;UAC3B6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDS,UAAU,EAAE;UACVtE,IAAI,EAAE,mBAAmB;UACzB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO,CAAC;YACxH,mHAAmH,EAAE,CAAC,OAAO;UAC/H;QACF,CAAC;QACDU,QAAQ,EAAE;UACRvE,IAAI,EAAE,oBAAoB;UAC1B6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF;MACF;IACF,CAAC;IACDW,YAAY,EAAE;MACZxE,IAAI,EAAE,eAAe;MACrB0D,KAAK,EAAE,OAAO;MACdC,UAAU,EAAE;QACVC,QAAQ,EAAE;UACR5D,IAAI,EAAE,iCAAiC;UACvC6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO,CAAC;YACxH,mHAAmH,EAAE,CAAC,OAAO;UAC/H;QACF,CAAC;QACDM,SAAS,EAAE;UACTnE,IAAI,EAAE,qBAAqB;UAC3B6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDY,UAAU,EAAE;UACVzE,IAAI,EAAE,aAAa;UACnB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDa,QAAQ,EAAE;UACR1E,IAAI,EAAE,kBAAkB;UACxB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF,CAAC;QACDc,QAAQ,EAAE;UACR3E,IAAI,EAAE,eAAe;UACrB6D,KAAK,EAAE;YACL,EAAE,EAAE,CAAC,OAAO,CAAC;YACb,OAAO,EAAE,CAAC,OAAO,CAAC;YAClB,aAAa,EAAE,CAAC,OAAO,CAAC;YACxB,mBAAmB,EAAE,CAAC,OAAO,CAAC;YAC9B,yBAAyB,EAAE,CAAC,OAAO,CAAC;YACpC,+BAA+B,EAAE,CAAC,OAAO,CAAC;YAC1C,qCAAqC,EAAE,CAAC,OAAO,CAAC;YAChD,2CAA2C,EAAE,CAAC,OAAO,CAAC;YACtD,iDAAiD,EAAE,CAAC,OAAO,CAAC;YAC5D,uDAAuD,EAAE,CAAC,OAAO,CAAC;YAClE,6DAA6D,EAAE,CAAC,OAAO,CAAC;YACxE,mEAAmE,EAAE,CAAC,OAAO,CAAC;YAC9E,yEAAyE,EAAE,CAAC,OAAO,CAAC;YACpF,+EAA+E,EAAE,CAAC,OAAO,CAAC;YAC1F,qFAAqF,EAAE,CAAC,OAAO,CAAC;YAChG,2FAA2F,EAAE,CAAC,OAAO,CAAC;YACtG,iGAAiG,EAAE,CAAC,OAAO,CAAC;YAC5G,uGAAuG,EAAE,CAAC,OAAO,CAAC;YAClH,6GAA6G,EAAE,CAAC,OAAO;UACzH;QACF;MACF;IACF;EACF,CAAC;;EAED;EACA,MAAMe,WAAW,GAAIC,KAAK,IAAK;IAC7B,MAAMC,OAAO,GAAGC,YAAY,CAACF,KAAK,CAAC;IACnC,MAAMG,SAAS,GAAGH,KAAK,CAACI,WAAW,CAAC,CAAC;IAErC,MAAMC,OAAO,gBACX7F,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAkN;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eACnQxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAgtB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9vB,CACN;IAED,MAAMC,QAAQ,gBACZzG,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAA0R;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAC3UxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAk8B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACh/B,CACN;IAED,MAAME,OAAO,gBACX1G,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAA0I;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAC3LxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAA8S;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5V,CACN;IAED,MAAMG,SAAS,gBACb3G,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAkS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eACnVxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAixB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/zB,CACN;IAED,MAAMI,SAAS,gBACb5G,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAwK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eACzNxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAs2B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACp5B,CACN;IAED,MAAMK,OAAO,gBACX7G,OAAA;MAAK8F,KAAK,EAAC,4BAA4B;MAACC,OAAO,EAAC,eAAe;MAACC,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAAC,QAAA,gBACxFlG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAyL;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,eAC1OxG,OAAA;QAAMmG,IAAI,EAAEV,OAAO,GAAG,SAAS,GAAG,SAAU;QAACW,CAAC,EAAC;MAAmY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjb,CACN;;IAED;IACA,QAAQb,SAAS;MACf,KAAK,GAAG;QAAE,OAAOE,OAAO;MACxB,KAAK,GAAG;QAAE,OAAOY,QAAQ;MACzB,KAAK,GAAG;QAAE,OAAOC,OAAO;MACxB,KAAK,GAAG;QAAE,OAAOC,SAAS;MAC1B,KAAK,GAAG;QAAE,OAAOC,SAAS;MAC1B,KAAK,GAAG;QAAE,OAAOC,OAAO;MACxB;QAAS,OAAOhB,OAAO;IACzB;EACF,CAAC;;EAED;EACA,MAAMiB,qBAAqB,GAAGA,CAACC,GAAG,EAAEC,GAAG,KAAK;IAAA,IAAAC,qBAAA;IAC1C,IAAIjF,YAAY,IAAI,EAAAiF,qBAAA,GAAA9C,gBAAgB,CAACnC,YAAY,CAAC,cAAAiF,qBAAA,uBAA9BA,qBAAA,CAAgC5C,KAAK,MAAK,OAAO,EAAE;MACrE;MACA,OAAO,CAAC,CAAC,GAAG0C,GAAG,EAAE,CAAC,GAAGC,GAAG,CAAC;IAC3B;IACA,OAAO,CAACD,GAAG,EAAEC,GAAG,CAAC;EACnB,CAAC;;EAED;EACA,MAAME,aAAa,GAAGA,CAACH,GAAG,EAAEC,GAAG,KAAK;IAClC,OAAOG,MAAM,CAACC,YAAY,CAAC,EAAE,GAAGJ,GAAG,CAAC,IAAI,CAAC,GAAGD,GAAG,CAAC;EAClD,CAAC;EAED,MAAMM,eAAe,GAAIC,MAAM,IAAK;IAClC,MAAMN,GAAG,GAAGM,MAAM,CAACC,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE;IACrC,MAAMR,GAAG,GAAG,CAAC,GAAGS,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,CAAC;IACnC,OAAO,CAACP,GAAG,EAAEC,GAAG,CAAC;EACnB,CAAC;EAED,MAAMtB,YAAY,GAAIF,KAAK,IAAKA,KAAK,IAAIA,KAAK,KAAKA,KAAK,CAACiC,WAAW,CAAC,CAAC;EAEtE,MAAMC,WAAW,GAAGA,CAACC,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAEtC,KAAK,KAAK;IAC7D,IAAIqC,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,CAAC,IAAIC,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,CAAC,EAAE,OAAO,KAAK;IAEpE,MAAMC,WAAW,GAAGzG,KAAK,CAACuG,KAAK,CAAC,CAACC,KAAK,CAAC;IACvC,IAAIC,WAAW,IAAIrC,YAAY,CAACF,KAAK,CAAC,KAAKE,YAAY,CAACqC,WAAW,CAAC,EAAE,OAAO,KAAK;IAElF,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAACL,KAAK,GAAGF,OAAO,CAAC;IACzC,MAAMQ,OAAO,GAAGF,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC;IACzC,MAAMQ,UAAU,GAAG5C,KAAK,CAACI,WAAW,CAAC,CAAC;IAEtC,QAAQwC,UAAU;MAChB,KAAK,GAAG;QACN,MAAMC,SAAS,GAAG3C,YAAY,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;QAC9C,MAAM8C,QAAQ,GAAG5C,YAAY,CAACF,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;QAE5C,IAAIsC,KAAK,KAAKF,OAAO,EAAE;UACrB,IAAIC,KAAK,KAAKF,OAAO,GAAGU,SAAS,IAAI,CAACN,WAAW,EAAE,OAAO,IAAI;UAC9D,IAAIJ,OAAO,KAAKW,QAAQ,IAAIT,KAAK,KAAKF,OAAO,GAAG,CAAC,GAAGU,SAAS,IAAI,CAACN,WAAW,EAAE,OAAO,IAAI;QAC5F,CAAC,MAAM,IAAIE,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC,KAAK,CAAC,IAAIC,KAAK,KAAKF,OAAO,GAAGU,SAAS,EAAE;UAC3E,OAAO,CAAC,CAACN,WAAW;QACtB;QACA,OAAO,KAAK;MAEd,KAAK,GAAG;QACN,OAAO,CAACC,OAAO,KAAK,CAAC,IAAIG,OAAO,KAAK,CAAC,KAAK,CAACI,aAAa,CAACZ,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,CAAC;MAE3F,KAAK,GAAG;QACN,OAAQE,OAAO,KAAK,CAAC,IAAIG,OAAO,KAAK,CAAC,IAAMH,OAAO,KAAK,CAAC,IAAIG,OAAO,KAAK,CAAE;MAE7E,KAAK,GAAG;QACN,OAAOH,OAAO,KAAKG,OAAO,IAAI,CAACI,aAAa,CAACZ,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,CAAC;MAE9E,KAAK,GAAG;QACN,OAAO,CAACE,OAAO,KAAK,CAAC,IAAIG,OAAO,KAAK,CAAC,IAAIH,OAAO,KAAKG,OAAO,KAAK,CAACI,aAAa,CAACZ,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,CAAC;MAElH,KAAK,GAAG;QACN;QACA,IAAIE,OAAO,IAAI,CAAC,IAAIG,OAAO,IAAI,CAAC,EAAE,OAAO,IAAI;;QAE7C;QACA,IAAIH,OAAO,KAAK,CAAC,IAAIG,OAAO,KAAK,CAAC,EAAE;UAClC,OAAOK,SAAS,CAACb,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAEtC,KAAK,CAAC;QACzD;QACA,OAAO,KAAK;MAEd;QACE,OAAO,KAAK;IAChB;EACF,CAAC;EAED,MAAMgD,SAAS,GAAGA,CAACb,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAEtC,KAAK,KAAK;IAC3D;IACA,MAAMC,OAAO,GAAGC,YAAY,CAACF,KAAK,CAAC;IACnC,MAAMiD,OAAO,GAAGhD,OAAO,GAAG,CAAC,GAAG,CAAC;IAC/B,MAAMiD,OAAO,GAAG,CAAC;;IAEjB;IACA,IAAIf,OAAO,KAAKc,OAAO,IAAIb,OAAO,KAAKc,OAAO,EAAE,OAAO,KAAK;;IAE5D;IACA,MAAMC,UAAU,GAAGb,KAAK,KAAK,CAAC;IAC9B,MAAMc,WAAW,GAAGd,KAAK,KAAK,CAAC;IAE/B,IAAI,CAACa,UAAU,IAAI,CAACC,WAAW,EAAE,OAAO,KAAK;;IAE7C;IACA,MAAMC,OAAO,GAAGF,UAAU,GAAG,CAAC,GAAG,CAAC;IAClC,MAAMG,IAAI,GAAGxH,KAAK,CAACmH,OAAO,CAAC,CAACI,OAAO,CAAC;IACpC,MAAME,YAAY,GAAGtD,OAAO,GAAG,GAAG,GAAG,GAAG;IAExC,IAAIqD,IAAI,KAAKC,YAAY,EAAE,OAAO,KAAK;;IAEvC;IACA,MAAMC,KAAK,GAAGf,IAAI,CAACgB,GAAG,CAACP,OAAO,EAAEG,OAAO,CAAC;IACxC,MAAMK,GAAG,GAAGjB,IAAI,CAACkB,GAAG,CAACT,OAAO,EAAEG,OAAO,CAAC;IAEtC,KAAK,IAAI7B,GAAG,GAAGgC,KAAK,GAAG,CAAC,EAAEhC,GAAG,GAAGkC,GAAG,EAAElC,GAAG,EAAE,EAAE;MAC1C,IAAI1F,KAAK,CAACmH,OAAO,CAAC,CAACzB,GAAG,CAAC,KAAK,IAAI,EAAE,OAAO,KAAK;IAChD;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,OAAO,IAAI;EACb,CAAC;EAED,MAAMuB,aAAa,GAAGA,CAACZ,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,KAAK;IACxD,MAAMsB,MAAM,GAAGvB,KAAK,GAAGF,OAAO,GAAG,CAAC,GAAGE,KAAK,GAAGF,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC;IAC7D,MAAM0B,MAAM,GAAGvB,KAAK,GAAGF,OAAO,GAAG,CAAC,GAAGE,KAAK,GAAGF,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC;IAE7D,IAAI0B,UAAU,GAAG3B,OAAO,GAAGyB,MAAM;IACjC,IAAIG,UAAU,GAAG3B,OAAO,GAAGyB,MAAM;IAEjC,OAAOC,UAAU,KAAKzB,KAAK,IAAI0B,UAAU,KAAKzB,KAAK,EAAE;MACnD,IAAIxG,KAAK,CAACgI,UAAU,CAAC,CAACC,UAAU,CAAC,EAAE,OAAO,IAAI;MAC9CD,UAAU,IAAIF,MAAM;MACpBG,UAAU,IAAIF,MAAM;IACtB;IAEA,OAAO,KAAK;EACd,CAAC;EAED,MAAMG,QAAQ,GAAGA,CAAC7B,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,KAAK;IACnD,MAAM2B,QAAQ,GAAGnI,KAAK,CAACoI,GAAG,CAAC3C,GAAG,IAAI,CAAC,GAAGA,GAAG,CAAC,CAAC;IAC3C,MAAMvB,KAAK,GAAGiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC;IAExC+B,OAAO,CAACC,GAAG,CAAC,gBAAgB1C,aAAa,CAACS,OAAO,EAAEC,OAAO,CAAC,IAAIV,aAAa,CAACW,KAAK,EAAEC,KAAK,CAAC,KAAKtC,KAAK,GAAG,CAAC;;IAExG;IACA,IAAIA,KAAK,IAAIA,KAAK,CAACI,WAAW,CAAC,CAAC,KAAK,GAAG,IAAIqC,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC,KAAK,CAAC,EAAE;MAC3E;MACA,MAAMe,UAAU,GAAGb,KAAK,KAAK,CAAC;MAC9B,MAAM+B,WAAW,GAAGlB,UAAU,GAAG,CAAC,GAAG,CAAC;MACtC,MAAMmB,SAAS,GAAGnB,UAAU,GAAG,CAAC,GAAG,CAAC;;MAEpC;MACAc,QAAQ,CAAC5B,KAAK,CAAC,CAACiC,SAAS,CAAC,GAAGL,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC;MAC3DJ,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC,GAAG,IAAI;IACvC;IAEAJ,QAAQ,CAAC5B,KAAK,CAAC,CAACC,KAAK,CAAC,GAAGtC,KAAK;IAC9BiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC,GAAG,IAAI;IAEjC,MAAMmC,YAAY,GAAG,GAAG7C,aAAa,CAACS,OAAO,EAAEC,OAAO,CAAC,IAAIV,aAAa,CAACW,KAAK,EAAEC,KAAK,CAAC,EAAE;IACxF,MAAMkC,kBAAkB,GAAG,CAAC,GAAGpI,WAAW,EAAEmI,YAAY,CAAC;IAEzDxI,QAAQ,CAACkI,QAAQ,CAAC;IAClB5H,cAAc,CAACmI,kBAAkB,CAAC;IAClCrI,gBAAgB,CAACsI,UAAU,IAAIA,UAAU,KAAK,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;IAE1EN,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEI,kBAAkB,CAAC;IAExD,OAAO;MAAED,YAAY;MAAEC;IAAmB,CAAC;EAC7C,CAAC;EAED,MAAME,gBAAgB,GAAIC,kBAAkB,IAAK;IAC/CR,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtCD,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAEO,kBAAkB,CAAC;IAEjF,MAAMC,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMqI,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAACpC,iBAAiB,CAAC;IACvD,MAAMoI,WAAW,GAAGH,kBAAkB,CAACI,IAAI,CAAC,GAAG,CAAC;IAChD,MAAMC,aAAa,GAAGH,SAAS,CAAC7F,KAAK,CAAC8F,WAAW,CAAC;IAElDX,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAE,IAAIU,WAAW,GAAG,CAAC;IACtEX,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEY,aAAa,CAAC;IAE3D,IAAIA,aAAa,IAAIA,aAAa,CAACC,MAAM,GAAG,CAAC,EAAE;MAC7C;MACA9G,UAAU,CAAC,MAAM;QACf,MAAM+G,YAAY,GAAGF,aAAa,CAACvC,IAAI,CAAC0C,KAAK,CAAC1C,IAAI,CAAC2C,MAAM,CAAC,CAAC,GAAGJ,aAAa,CAACC,MAAM,CAAC,CAAC;QACpFd,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEc,YAAY,CAAC;QACpD,MAAM,CAACG,UAAU,EAAEC,QAAQ,CAAC,GAAGJ,YAAY,CAACK,KAAK,CAAC,GAAG,CAAC;QACtD,MAAM,CAACpD,OAAO,EAAEC,OAAO,CAAC,GAAGP,eAAe,CAACwD,UAAU,CAAC;QACtD,MAAM,CAAChD,KAAK,EAAEC,KAAK,CAAC,GAAGT,eAAe,CAACyD,QAAQ,CAAC;QAEhDnB,OAAO,CAACC,GAAG,CAAC,wBAAwBiB,UAAU,OAAOC,QAAQ,EAAE,CAAC;;QAEhE;QACAvJ,QAAQ,CAACyJ,YAAY,IAAI;UACvB,MAAMvB,QAAQ,GAAGuB,YAAY,CAACtB,GAAG,CAAC3C,GAAG,IAAI,CAAC,GAAGA,GAAG,CAAC,CAAC;UAClD,MAAMvB,KAAK,GAAGiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC;UAExC+B,OAAO,CAACC,GAAG,CAAC,yBAAyB1C,aAAa,CAACS,OAAO,EAAEC,OAAO,CAAC,IAAIV,aAAa,CAACW,KAAK,EAAEC,KAAK,CAAC,KAAKtC,KAAK,GAAG,CAAC;;UAEjH;UACA,IAAIA,KAAK,IAAIA,KAAK,CAACI,WAAW,CAAC,CAAC,KAAK,GAAG,IAAIqC,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC,KAAK,CAAC,EAAE;YAC3E,MAAMe,UAAU,GAAGb,KAAK,KAAK,CAAC;YAC9B,MAAM+B,WAAW,GAAGlB,UAAU,GAAG,CAAC,GAAG,CAAC;YACtC,MAAMmB,SAAS,GAAGnB,UAAU,GAAG,CAAC,GAAG,CAAC;;YAEpC;YACAc,QAAQ,CAAC5B,KAAK,CAAC,CAACiC,SAAS,CAAC,GAAGL,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC;YAC3DJ,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC,GAAG,IAAI;UACvC;UAEAJ,QAAQ,CAAC5B,KAAK,CAAC,CAACC,KAAK,CAAC,GAAGtC,KAAK;UAC9BiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC,GAAG,IAAI;UAEjC,OAAO6B,QAAQ;QACjB,CAAC,CAAC;QAEF,MAAMM,YAAY,GAAG,GAAG7C,aAAa,CAACS,OAAO,EAAEC,OAAO,CAAC,IAAIV,aAAa,CAACW,KAAK,EAAEC,KAAK,CAAC,EAAE;QAExFjG,cAAc,CAACoJ,WAAW,IAAI;UAC5B,MAAMC,cAAc,GAAG,CAAC,GAAGD,WAAW,EAAElB,YAAY,CAAC;UACrDJ,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEsB,cAAc,CAAC;UACxE,OAAOA,cAAc;QACvB,CAAC,CAAC;QAEFvJ,gBAAgB,CAACsI,UAAU,IAAIA,UAAU,KAAK,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;QAC1E5H,WAAW,CAAC,YAAY,CAAC;MAE3B,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,MAAM;MACLsH,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE,IAAIU,WAAW,GAAG,CAAC;MACnEjI,WAAW,CAAC,kCAAkC,CAAC;IACjD;EACF,CAAC;EAED,MAAM8I,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAI/H,SAAS,CAACqH,MAAM,KAAK,CAAC,EAAE;IAE5B,MAAMW,SAAS,GAAGhI,SAAS,CAACA,SAAS,CAACqH,MAAM,GAAG,CAAC,CAAC;;IAEjD;IACAlH,gBAAgB,CAAC,CAAC;;IAElB;IACAhC,QAAQ,CAAC6J,SAAS,CAAC9J,KAAK,CAAC;IACzBO,cAAc,CAACuJ,SAAS,CAACxJ,WAAW,CAAC;IACrCD,gBAAgB,CAACyJ,SAAS,CAAC1J,aAAa,CAAC;IACzCa,QAAQ,CAAC6I,SAAS,CAAC9I,KAAK,CAAC;IACzBW,WAAW,CAACmI,SAAS,CAACpI,QAAQ,CAAC;IAC/BG,cAAc,CAACiI,SAAS,CAAClI,WAAW,CAAC;;IAErC;IACAG,YAAY,CAACgI,SAAS,IAAIA,SAAS,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAEjDjJ,WAAW,CAAC,yBAAyB,CAAC;IACtCZ,iBAAiB,CAAC,IAAI,CAAC;IACvBkB,eAAe,CAAC,IAAI,CAAC;;IAErB;IACAgB,UAAU,CAAC,MAAM;MACftB,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,MAAMkJ,SAAS,GAAGA,CAACC,QAAQ,EAAErB,kBAAkB,KAAK;IAClD,MAAMC,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMqI,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAACpC,iBAAiB,CAAC;IACvD;IACA,MAAMuJ,OAAO,GAAGtB,kBAAkB,CAACmB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACf,IAAI,CAAC,GAAG,CAAC;IACzD,MAAMmB,aAAa,GAAGrB,SAAS,CAAC7F,KAAK,CAACiH,OAAO,CAAC,IAAI,EAAE;IAEpD9B,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE4B,QAAQ,CAAC;IAC5C7B,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEO,kBAAkB,CAAC;IACxDR,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI6B,OAAO,GAAG,CAAC;IACnD9B,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE8B,aAAa,CAAC;IAC7C/B,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE+B,MAAM,CAACC,IAAI,CAACvB,SAAS,CAAC7F,KAAK,CAAC,CAAC;IACxEmF,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE8B,aAAa,CAACG,QAAQ,CAACL,QAAQ,CAAC,CAAC;;IAEjE;IACAvI,WAAW,CAAC,IAAI,CAAC;IACjBE,cAAc,CAAC,KAAK,CAAC;IAErB,IAAIuI,aAAa,CAACG,QAAQ,CAACL,QAAQ,CAAC,EAAE;MACpCnJ,WAAW,CAAC,iBAAiB,CAAC;MAC9BE,QAAQ,CAACuJ,IAAI,KAAK;QAAEtJ,OAAO,EAAEsJ,IAAI,CAACtJ,OAAO,GAAG,CAAC;QAAEC,KAAK,EAAEqJ,IAAI,CAACrJ,KAAK,GAAG;MAAE,CAAC,CAAC,CAAC;MAExEkH,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;;MAE5D;MACAjG,UAAU,CAAC,MAAM;QACftB,WAAW,CAAC,yBAAyB,CAAC;QACtC;QACAsB,UAAU,CAAC,MAAM;UACfuG,gBAAgB,CAACC,kBAAkB,CAAC;QACtC,CAAC,EAAE,GAAG,CAAC;MACT,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,MAAM;MACLR,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;;MAE/D;MACAvG,YAAY,CAACgI,SAAS,IAAI,CAAC,GAAGA,SAAS,EAAE;QACvC/J,KAAK,EAAEA,KAAK,CAACoI,GAAG,CAAC3C,GAAG,IAAI,CAAC,GAAGA,GAAG,CAAC,CAAC;QACjCnF,WAAW,EAAE,CAAC,GAAGA,WAAW,CAAC;QAC7BF,aAAa;QACbY,KAAK,EAAE;UAAE,GAAGA;QAAM,CAAC;QACnBU,QAAQ,EAAE,IAAI;QACdE,WAAW,EAAE;MACf,CAAC,CAAC,CAAC;;MAEH;MACA,MAAM6I,iBAAiB,GAAGL,aAAa,CAACjB,MAAM,GAAG,CAAC,GAAGiB,aAAa,CAACnB,IAAI,CAAC,MAAM,CAAC,GAAG,sBAAsB;MACxGlI,WAAW,CAAC,2BAA2B0J,iBAAiB,8BAA8B,CAAC;MACvFxJ,QAAQ,CAACuJ,IAAI,KAAK;QAAEtJ,OAAO,EAAEsJ,IAAI,CAACtJ,OAAO;QAAEC,KAAK,EAAEqJ,IAAI,CAACrJ,KAAK,GAAG;MAAE,CAAC,CAAC,CAAC;MACpEU,cAAc,CAAC,IAAI,CAAC;;MAEpB;MACA,IAAIuI,aAAa,CAACjB,MAAM,GAAG,CAAC,EAAE;QAC5B,MAAMuB,QAAQ,GAAGN,aAAa,CAAC,CAAC,CAAC;QACjC,MAAM,CAACb,UAAU,EAAEC,QAAQ,CAAC,GAAGkB,QAAQ,CAACjB,KAAK,CAAC,GAAG,CAAC;QAElD,IAAI;UACF,MAAM,CAACpD,OAAO,EAAEC,OAAO,CAAC,GAAGP,eAAe,CAACwD,UAAU,CAAC;UACtD,MAAM,CAAChD,KAAK,EAAEC,KAAK,CAAC,GAAGT,eAAe,CAACyD,QAAQ,CAAC;;UAEhD;UACA,MAAM,CAACmB,cAAc,EAAEC,cAAc,CAAC,GAAGpF,qBAAqB,CAACa,OAAO,EAAEC,OAAO,CAAC;UAChF,MAAM,CAACuE,YAAY,EAAEC,YAAY,CAAC,GAAGtF,qBAAqB,CAACe,KAAK,EAAEC,KAAK,CAAC;UAExE7E,WAAW,CAAC;YACVoJ,IAAI,EAAE;cAAEtF,GAAG,EAAEkF,cAAc;cAAEjF,GAAG,EAAEkF;YAAe,CAAC;YAClDI,EAAE,EAAE;cAAEvF,GAAG,EAAEoF,YAAY;cAAEnF,GAAG,EAAEoF;YAAa,CAAC;YAC5CG,QAAQ,EAAEP;UACZ,CAAC,CAAC;UAEFrC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;YACjCyC,IAAI,EAAE;cAAEtF,GAAG,EAAEkF,cAAc;cAAEjF,GAAG,EAAEkF;YAAe,CAAC;YAClDI,EAAE,EAAE;cAAEvF,GAAG,EAAEoF,YAAY;cAAEnF,GAAG,EAAEoF;YAAa,CAAC;YAC5CG,QAAQ,EAAEP;UACZ,CAAC,CAAC;QACJ,CAAC,CAAC,OAAOQ,KAAK,EAAE;UACd7C,OAAO,CAAC6C,KAAK,CAAC,8BAA8B,EAAER,QAAQ,EAAEQ,KAAK,CAAC;QAChE;MACF,CAAC,MAAM;QACL7C,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;MACjE;;MAEA;MACAjG,UAAU,CAAC,MAAM;QACftB,WAAW,CAAC,EAAE,CAAC;QACfY,WAAW,CAAC,IAAI,CAAC;QACjBE,cAAc,CAAC,KAAK,CAAC;MACvB,CAAC,EAAE,IAAI,CAAC;IACV;EACF,CAAC;EAED,MAAMsJ,eAAe,GAAGA,CAACC,CAAC,EAAEC,UAAU,EAAEC,UAAU,KAAK;IAAA,IAAAC,sBAAA,EAAAC,WAAA,EAAAC,YAAA;IACrD,IAAIjL,QAAQ,KAAK,UAAU,EAAE;;IAE7B;IACA,IAAIiF,GAAG,EAAEC,GAAG;IACZ,IAAIhF,YAAY,IAAI,EAAA6K,sBAAA,GAAA1I,gBAAgB,CAACnC,YAAY,CAAC,cAAA6K,sBAAA,uBAA9BA,sBAAA,CAAgCxI,KAAK,MAAK,OAAO,EAAE;MACrE0C,GAAG,GAAG,CAAC,GAAG4F,UAAU;MACpB3F,GAAG,GAAG,CAAC,GAAG4F,UAAU;IACtB,CAAC,MAAM;MACL7F,GAAG,GAAG4F,UAAU;MAChB3F,GAAG,GAAG4F,UAAU;IAClB;IAEA,MAAMxC,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMwD,KAAK,GAAGlE,KAAK,CAACyF,GAAG,CAAC,CAACC,GAAG,CAAC;;IAE7B;IACA,MAAMgG,UAAU,GAAI5C,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAO,IACtD0I,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAQ;IAE3E,IAAI,CAACsL,UAAU,IAAI,CAACxH,KAAK,IAAIE,YAAY,CAACF,KAAK,CAAC,MAAM9D,aAAa,KAAK,OAAO,CAAC,EAAE;MAChF;IACF;IAEAgL,CAAC,CAACO,cAAc,CAAC,CAAC;IAClB,MAAMC,IAAI,GAAGR,CAAC,CAACS,aAAa,CAACC,qBAAqB,CAAC,CAAC;IACpD,MAAMC,OAAO,GAAGX,CAAC,CAACW,OAAO,IAAKX,CAAC,CAACY,OAAO,MAAAR,WAAA,GAAIJ,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,cAAAR,WAAA,uBAAZA,WAAA,CAAcO,OAAO,CAAC,IAAI,CAAC;IACtE,MAAME,OAAO,GAAGb,CAAC,CAACa,OAAO,IAAKb,CAAC,CAACY,OAAO,MAAAP,YAAA,GAAIL,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,cAAAP,YAAA,uBAAZA,YAAA,CAAcQ,OAAO,CAAC,IAAI,CAAC;IAEtE5K,eAAe,CAAC;MACd6C,KAAK;MACLmC,OAAO,EAAEZ,GAAG;MACZa,OAAO,EAAEZ,GAAG;MACZ2F,UAAU;MACVC;IACF,CAAC,CAAC;IACF/J,aAAa,CAAC;MACZC,CAAC,EAAEuK,OAAO,GAAGH,IAAI,CAACM,IAAI,GAAGN,IAAI,CAAClH,KAAK,GAAG,CAAC;MACvCjD,CAAC,EAAEwK,OAAO,GAAGL,IAAI,CAACO,GAAG,GAAGP,IAAI,CAACjH,MAAM,GAAG;IACxC,CAAC,CAAC;IACFxE,iBAAiB,CAAC,CAACsF,GAAG,EAAEC,GAAG,CAAC,CAAC;EAC/B,CAAC;EAED,MAAM0G,gBAAgB,GAAGA,CAAChB,CAAC,EAAEC,UAAU,EAAEC,UAAU,KAAK;IACtDF,CAAC,CAACO,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBR,eAAe,CAACC,CAAC,EAAEC,UAAU,EAAEC,UAAU,CAAC;EAC5C,CAAC;EAED,MAAMe,eAAe,GAAIjB,CAAC,IAAK;IAC7B,IAAI,CAAChK,YAAY,EAAE;IACnBgK,CAAC,CAACO,cAAc,CAAC,CAAC;EACpB,CAAC;EAED,MAAMW,eAAe,GAAIlB,CAAC,IAAK;IAC7B,IAAI,CAAChK,YAAY,EAAE;IACnBgK,CAAC,CAACO,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBU,eAAe,CAACjB,CAAC,CAAC;EACpB,CAAC;EAED,MAAMmB,aAAa,GAAGA,CAACnB,CAAC,EAAEoB,gBAAgB,EAAEC,gBAAgB,KAAK;IAAA,IAAAC,sBAAA;IAC/D,IAAI,CAACtL,YAAY,EAAE;IACnBgK,CAAC,CAACO,cAAc,CAAC,CAAC;;IAElB;IACA,IAAIgB,SAAS,EAAEC,SAAS;IACxB,IAAIlM,YAAY,IAAI,EAAAgM,sBAAA,GAAA7J,gBAAgB,CAACnC,YAAY,CAAC,cAAAgM,sBAAA,uBAA9BA,sBAAA,CAAgC3J,KAAK,MAAK,OAAO,EAAE;MACrE4J,SAAS,GAAG,CAAC,GAAGH,gBAAgB;MAChCI,SAAS,GAAG,CAAC,GAAGH,gBAAgB;IAClC,CAAC,MAAM;MACLE,SAAS,GAAGH,gBAAgB;MAC5BI,SAAS,GAAGH,gBAAgB;IAC9B;IAEA,MAAM;MAAEpG,OAAO;MAAEC;IAAQ,CAAC,GAAGlF,YAAY;IAEzC,IAAIgF,WAAW,CAACC,OAAO,EAAEC,OAAO,EAAEqG,SAAS,EAAEC,SAAS,EAAExL,YAAY,CAAC8C,KAAK,CAAC,EAAE;MAC3E,MAAM;QAAEuE,YAAY;QAAEC;MAAmB,CAAC,GAAGR,QAAQ,CAAC7B,OAAO,EAAEC,OAAO,EAAEqG,SAAS,EAAEC,SAAS,CAAC;MAC7F3C,SAAS,CAACxB,YAAY,EAAEC,kBAAkB,CAAC;IAC7C;IAEArH,eAAe,CAAC,IAAI,CAAC;IACrBlB,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;EAED,MAAM0M,cAAc,GAAGA,CAACzB,CAAC,EAAEoB,gBAAgB,EAAEC,gBAAgB,KAAK;IAChE,IAAI,CAACrL,YAAY,EAAE;IACnBgK,CAAC,CAACO,cAAc,CAAC,CAAC;;IAElB;IACA,IAAIP,CAAC,CAAC0B,cAAc,IAAI1B,CAAC,CAAC0B,cAAc,CAAC,CAAC,CAAC,EAAE;MAAA,IAAAC,sBAAA;MAC3C,MAAMC,KAAK,GAAG5B,CAAC,CAAC0B,cAAc,CAAC,CAAC,CAAC;MACjC,MAAMG,YAAY,GAAGnO,QAAQ,CAACoO,gBAAgB,CAACF,KAAK,CAACjB,OAAO,EAAEiB,KAAK,CAACf,OAAO,CAAC;;MAE5E;MACA,IAAIkB,aAAa,GAAGF,YAAY;MAChC,OAAOE,aAAa,IAAI,GAAAC,qBAAA,GAACD,aAAa,CAACE,OAAO,cAAAD,qBAAA,eAArBA,qBAAA,CAAuBpH,MAAM,GAAE;QAAA,IAAAoH,qBAAA;QACtDD,aAAa,GAAGA,aAAa,CAACG,aAAa;MAC7C;MAEA,IAAIH,aAAa,KAAAJ,sBAAA,GAAII,aAAa,CAACE,OAAO,cAAAN,sBAAA,eAArBA,sBAAA,CAAuB/G,MAAM,EAAE;QAClD,MAAM,CAACuH,QAAQ,EAAEC,QAAQ,CAAC,GAAGL,aAAa,CAACE,OAAO,CAACrH,MAAM,CAACyD,KAAK,CAAC,GAAG,CAAC,CAACrB,GAAG,CAACqF,MAAM,CAAC;QAChFlB,aAAa,CAACnB,CAAC,EAAEmC,QAAQ,EAAEC,QAAQ,CAAC;QACpC;MACF;IACF;;IAEA;IACAjB,aAAa,CAACnB,CAAC,EAAEoB,gBAAgB,EAAEC,gBAAgB,CAAC;EACtD,CAAC;EAED,MAAMiB,iBAAiB,GAAGA,CAACrC,UAAU,EAAEC,UAAU,KAAK;IAAA,IAAAqC,sBAAA;IACpD,IAAIvM,YAAY,EAAE,OAAO,CAAC;;IAE1B,IAAIZ,QAAQ,KAAK,UAAU,EAAE;;IAE7B;IACA,IAAIiF,GAAG,EAAEC,GAAG;IACZ,IAAIhF,YAAY,IAAI,EAAAiN,sBAAA,GAAA9K,gBAAgB,CAACnC,YAAY,CAAC,cAAAiN,sBAAA,uBAA9BA,sBAAA,CAAgC5K,KAAK,MAAK,OAAO,EAAE;MACrE0C,GAAG,GAAG,CAAC,GAAG4F,UAAU;MACpB3F,GAAG,GAAG,CAAC,GAAG4F,UAAU;IACtB,CAAC,MAAM;MACL7F,GAAG,GAAG4F,UAAU;MAChB3F,GAAG,GAAG4F,UAAU;IAClB;IAEA,MAAMxC,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMwD,KAAK,GAAGlE,KAAK,CAACyF,GAAG,CAAC,CAACC,GAAG,CAAC;;IAE7B;IACA,MAAMgG,UAAU,GAAI5C,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAO,IACtD0I,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAQ;IAE3E,IAAI,CAACsL,UAAU,EAAE;MACf3K,WAAW,CAAC,8BAA8B,CAAC;MAC3CsB,UAAU,CAAC,MAAMtB,WAAW,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;MACvC;IACF;IAEA,IAAIb,cAAc,EAAE;MAClB,MAAM,CAACmG,OAAO,EAAEC,OAAO,CAAC,GAAGpG,cAAc;MACzC,MAAM0N,SAAS,GAAG5N,KAAK,CAACqG,OAAO,CAAC,CAACC,OAAO,CAAC;MAEzC,IAAIb,GAAG,KAAKY,OAAO,IAAIX,GAAG,KAAKY,OAAO,EAAE;QACtCnG,iBAAiB,CAAC,IAAI,CAAC;QACvB;MACF;MAEA,IAAIiG,WAAW,CAACC,OAAO,EAAEC,OAAO,EAAEb,GAAG,EAAEC,GAAG,EAAEkI,SAAS,CAAC,EAAE;QACtD,MAAM;UAAEnF,YAAY;UAAEC;QAAmB,CAAC,GAAGR,QAAQ,CAAC7B,OAAO,EAAEC,OAAO,EAAEb,GAAG,EAAEC,GAAG,CAAC;QACjFuE,SAAS,CAACxB,YAAY,EAAEC,kBAAkB,CAAC;QAC3CvI,iBAAiB,CAAC,IAAI,CAAC;MACzB,CAAC,MAAM;QACLA,iBAAiB,CAAC+D,KAAK,IAAIE,YAAY,CAACF,KAAK,CAAC,MAAM9D,aAAa,KAAK,OAAO,CAAC,GAAG,CAACqF,GAAG,EAAEC,GAAG,CAAC,GAAG,IAAI,CAAC;MACrG;IACF,CAAC,MAAM;MACL,IAAIxB,KAAK,IAAIE,YAAY,CAACF,KAAK,CAAC,MAAM9D,aAAa,KAAK,OAAO,CAAC,EAAE;QAChED,iBAAiB,CAAC,CAACsF,GAAG,EAAEC,GAAG,CAAC,CAAC;MAC/B;IACF;EACF,CAAC;EAED,MAAMmI,aAAa,GAAGA,CAACC,IAAI,EAAEC,YAAY,GAAG,IAAI,KAAK;IACnD1F,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEwF,IAAI,EAAE,YAAY,EAAEC,YAAY,CAAC;;IAE5E;IACA,IAAI,CAACA,YAAY,EAAE;MACjBpN,eAAe,CAACmN,IAAI,CAAC;MACrBrN,WAAW,CAAC,oBAAoB,CAAC;MACjC;IACF;;IAEA;IACAwB,gBAAgB,CAAC,CAAC;IAElB,MAAM+L,UAAU,GAAGxO,eAAe,CAAC,CAAC;IACpC6I,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE0F,UAAU,CAAC;;IAErD;IACArN,eAAe,CAACmN,IAAI,CAAC;IACrBjN,oBAAoB,CAACkN,YAAY,CAAC;IAClCtN,WAAW,CAAC,UAAU,CAAC;IACvBR,QAAQ,CAAC+N,UAAU,CAAC;IACpBzN,cAAc,CAAC,EAAE,CAAC;IAClBJ,iBAAiB,CAAC,IAAI,CAAC;IACvBY,WAAW,CAAC,EAAE,CAAC;IACfE,QAAQ,CAAC;MAAEC,OAAO,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC,CAAC;IAClCE,eAAe,CAAC,IAAI,CAAC;IACrBM,WAAW,CAAC,IAAI,CAAC;IACjBE,cAAc,CAAC,KAAK,CAAC;IACrBE,YAAY,CAAC,EAAE,CAAC;;IAEhB;IACA,MAAM+G,OAAO,GAAGjG,gBAAgB,CAACiL,IAAI,CAAC;IACtC,MAAM/E,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAAC+K,YAAY,CAAC;IAElD,IAAIjF,OAAO,CAAC/F,KAAK,KAAK,OAAO,EAAE;MAC7B;MACAsF,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MACxDjI,gBAAgB,CAAC,OAAO,CAAC;MACzBU,WAAW,CAAC,mCAAmC,CAAC;;MAEhD;MACAsB,UAAU,CAAC,MAAM;QACfgG,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;QAChD,MAAM2F,SAAS,GAAGlF,SAAS,CAAC7F,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1CmF,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE2F,SAAS,CAAC;QAEnD,IAAIA,SAAS,EAAE;UACb,MAAM,CAAC1E,UAAU,EAAEC,QAAQ,CAAC,GAAGyE,SAAS,CAACxE,KAAK,CAAC,GAAG,CAAC;UACnD,MAAM,CAACpD,OAAO,EAAEC,OAAO,CAAC,GAAGP,eAAe,CAACwD,UAAU,CAAC;UACtD,MAAM,CAAChD,KAAK,EAAEC,KAAK,CAAC,GAAGT,eAAe,CAACyD,QAAQ,CAAC;UAEhDnB,OAAO,CAACC,GAAG,CAAC,sBAAsBiB,UAAU,OAAOC,QAAQ,EAAE,CAAC;;UAE9D;UACAvJ,QAAQ,CAACyJ,YAAY,IAAI;YACvB,MAAMvB,QAAQ,GAAGuB,YAAY,CAACtB,GAAG,CAAC3C,GAAG,IAAI,CAAC,GAAGA,GAAG,CAAC,CAAC;YAClD,MAAMvB,KAAK,GAAGiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC;;YAExC;YACA,IAAIpC,KAAK,IAAIA,KAAK,CAACI,WAAW,CAAC,CAAC,KAAK,GAAG,IAAIqC,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC,KAAK,CAAC,EAAE;cAC3E,MAAMe,UAAU,GAAGb,KAAK,KAAK,CAAC;cAC9B,MAAM+B,WAAW,GAAGlB,UAAU,GAAG,CAAC,GAAG,CAAC;cACtC,MAAMmB,SAAS,GAAGnB,UAAU,GAAG,CAAC,GAAG,CAAC;cAEpCc,QAAQ,CAAC5B,KAAK,CAAC,CAACiC,SAAS,CAAC,GAAGL,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC;cAC3DJ,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC,GAAG,IAAI;YACvC;YAEAJ,QAAQ,CAAC5B,KAAK,CAAC,CAACC,KAAK,CAAC,GAAGtC,KAAK;YAC9BiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC,GAAG,IAAI;YACjC,OAAO6B,QAAQ;UACjB,CAAC,CAAC;UAEF5H,cAAc,CAAC,CAAC,GAAGgJ,UAAU,IAAIC,QAAQ,EAAE,CAAC,CAAC;UAC7CnJ,gBAAgB,CAAC,OAAO,CAAC;UACzBU,WAAW,CAAC,kDAAkD,CAAC;QACjE;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,MAAM;MACL;MACAsH,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;MACjDjI,gBAAgB,CAAC,OAAO,CAAC;MACzBU,WAAW,CAAC,oCAAoC,CAAC;IACnD;EACF,CAAC;EAED,MAAMmN,SAAS,GAAGA,CAAA,KAAM;IACtB7F,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;;IAE7B;IACArG,gBAAgB,CAAC,CAAC;;IAElB;IACA,MAAM+L,UAAU,GAAGxO,eAAe,CAAC,CAAC;IACpC6I,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE0F,UAAU,CAAC;;IAE9C;IACA/N,QAAQ,CAAC+N,UAAU,CAAC;IACpBzN,cAAc,CAAC,EAAE,CAAC;IAClBJ,iBAAiB,CAAC,IAAI,CAAC;IACvBY,WAAW,CAAC,EAAE,CAAC;IACfM,eAAe,CAAC,IAAI,CAAC;IACrBM,WAAW,CAAC,IAAI,CAAC;IACjBE,cAAc,CAAC,KAAK,CAAC;IACrBE,YAAY,CAAC,EAAE,CAAC;IAChBd,QAAQ,CAAC;MAAEC,OAAO,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC,CAAC;;IAElC;IACA,MAAM2H,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMqI,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAACpC,iBAAiB,CAAC;IAEvD,IAAIkI,OAAO,CAAC/F,KAAK,KAAK,OAAO,EAAE;MAC7B1C,gBAAgB,CAAC,OAAO,CAAC;MACzBU,WAAW,CAAC,mCAAmC,CAAC;;MAEhD;MACAsB,UAAU,CAAC,MAAM;QACf,MAAM4L,SAAS,GAAGlF,SAAS,CAAC7F,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAE1C,IAAI+K,SAAS,EAAE;UACb,MAAM,CAAC1E,UAAU,EAAEC,QAAQ,CAAC,GAAGyE,SAAS,CAACxE,KAAK,CAAC,GAAG,CAAC;UACnD,MAAM,CAACpD,OAAO,EAAEC,OAAO,CAAC,GAAGP,eAAe,CAACwD,UAAU,CAAC;UACtD,MAAM,CAAChD,KAAK,EAAEC,KAAK,CAAC,GAAGT,eAAe,CAACyD,QAAQ,CAAC;UAEhDnB,OAAO,CAACC,GAAG,CAAC,4BAA4BiB,UAAU,OAAOC,QAAQ,EAAE,CAAC;;UAEpE;UACAvJ,QAAQ,CAACyJ,YAAY,IAAI;YACvB,MAAMvB,QAAQ,GAAGuB,YAAY,CAACtB,GAAG,CAAC3C,GAAG,IAAI,CAAC,GAAGA,GAAG,CAAC,CAAC;YAClD,MAAMvB,KAAK,GAAGiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC;;YAExC;YACA,IAAIpC,KAAK,IAAIA,KAAK,CAACI,WAAW,CAAC,CAAC,KAAK,GAAG,IAAIqC,IAAI,CAACC,GAAG,CAACJ,KAAK,GAAGF,OAAO,CAAC,KAAK,CAAC,EAAE;cAC3E,MAAMe,UAAU,GAAGb,KAAK,KAAK,CAAC;cAC9B,MAAM+B,WAAW,GAAGlB,UAAU,GAAG,CAAC,GAAG,CAAC;cACtC,MAAMmB,SAAS,GAAGnB,UAAU,GAAG,CAAC,GAAG,CAAC;cAEpCc,QAAQ,CAAC5B,KAAK,CAAC,CAACiC,SAAS,CAAC,GAAGL,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC;cAC3DJ,QAAQ,CAAC9B,OAAO,CAAC,CAACkC,WAAW,CAAC,GAAG,IAAI;YACvC;YAEAJ,QAAQ,CAAC5B,KAAK,CAAC,CAACC,KAAK,CAAC,GAAGtC,KAAK;YAC9BiE,QAAQ,CAAC9B,OAAO,CAAC,CAACC,OAAO,CAAC,GAAG,IAAI;YACjC,OAAO6B,QAAQ;UACjB,CAAC,CAAC;UAEF5H,cAAc,CAAC,CAAC,GAAGgJ,UAAU,IAAIC,QAAQ,EAAE,CAAC,CAAC;UAC7CnJ,gBAAgB,CAAC,OAAO,CAAC;UACzBU,WAAW,CAAC,kDAAkD,CAAC;QACjE;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,MAAM;MACLV,gBAAgB,CAAC,OAAO,CAAC;MACzBU,WAAW,CAAC,oCAAoC,CAAC;IACnD;EACF,CAAC;EAED,MAAMoN,UAAU,GAAGA,CAAA,KAAM;IACvBlM,gBAAgB,CAAC,CAAC;IAClBxB,WAAW,CAAC,MAAM,CAAC;IACnBE,eAAe,CAAC,IAAI,CAAC;IACrBE,oBAAoB,CAAC,IAAI,CAAC;IAC1BZ,QAAQ,CAACT,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7Be,cAAc,CAAC,EAAE,CAAC;IAClBU,QAAQ,CAAC;MAAEC,OAAO,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC,CAAC;IAClCY,YAAY,CAAC,EAAE,CAAC;EAClB,CAAC;;EAED;EACA9D,SAAS,CAAC,MAAM;IACd,MAAMmQ,qBAAqB,GAAIhD,CAAC,IAAK;MACnC,IAAIhK,YAAY,EAAE;QAAA,IAAAiN,YAAA,EAAAC,YAAA;QAChB,MAAMvC,OAAO,GAAGX,CAAC,CAACW,OAAO,IAAKX,CAAC,CAACY,OAAO,MAAAqC,YAAA,GAAIjD,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,cAAAqC,YAAA,uBAAZA,YAAA,CAActC,OAAO,CAAC,IAAI,CAAC;QACtE,MAAME,OAAO,GAAGb,CAAC,CAACa,OAAO,IAAKb,CAAC,CAACY,OAAO,MAAAsC,YAAA,GAAIlD,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,cAAAsC,YAAA,uBAAZA,YAAA,CAAcrC,OAAO,CAAC,IAAI,CAAC;QACtE1K,aAAa,CAAC;UACZC,CAAC,EAAEuK,OAAO;UACVtK,CAAC,EAAEwK;QACL,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMsC,qBAAqB,GAAInD,CAAC,IAAK;MACnC,IAAIhK,YAAY,IAAIgK,CAAC,CAACY,OAAO,IAAIZ,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,EAAE;QAC7CZ,CAAC,CAACO,cAAc,CAAC,CAAC,CAAC,CAAC;QACpBpK,aAAa,CAAC;UACZC,CAAC,EAAE4J,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,CAACD,OAAO;UACvBtK,CAAC,EAAE2J,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,CAACC;QAClB,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMuC,mBAAmB,GAAGA,CAAA,KAAM;MAChC,IAAIpN,YAAY,EAAE;QAChBC,eAAe,CAAC,IAAI,CAAC;QACrBlB,iBAAiB,CAAC,IAAI,CAAC;MACzB;IACF,CAAC;IAED,MAAMsO,oBAAoB,GAAGA,CAAA,KAAM;MACjC,IAAIrN,YAAY,EAAE;QAChBC,eAAe,CAAC,IAAI,CAAC;QACrBlB,iBAAiB,CAAC,IAAI,CAAC;MACzB;IACF,CAAC;;IAED;IACArB,QAAQ,CAACgB,gBAAgB,CAAC,WAAW,EAAEsO,qBAAqB,CAAC;IAC7DtP,QAAQ,CAACgB,gBAAgB,CAAC,SAAS,EAAE0O,mBAAmB,CAAC;;IAEzD;IACA1P,QAAQ,CAACgB,gBAAgB,CAAC,WAAW,EAAEyO,qBAAqB,EAAE;MAAEG,OAAO,EAAE;IAAM,CAAC,CAAC;IACjF5P,QAAQ,CAACgB,gBAAgB,CAAC,UAAU,EAAE2O,oBAAoB,CAAC;IAE3D,OAAO,MAAM;MACX3P,QAAQ,CAACiB,mBAAmB,CAAC,WAAW,EAAEqO,qBAAqB,CAAC;MAChEtP,QAAQ,CAACiB,mBAAmB,CAAC,SAAS,EAAEyO,mBAAmB,CAAC;MAC5D1P,QAAQ,CAACiB,mBAAmB,CAAC,WAAW,EAAEwO,qBAAqB,CAAC;MAChEzP,QAAQ,CAACiB,mBAAmB,CAAC,UAAU,EAAE0O,oBAAoB,CAAC;IAChE,CAAC;EACH,CAAC,EAAE,CAACrN,YAAY,CAAC,CAAC;;EAElB;EACAnD,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXgE,gBAAgB,CAAC,CAAC;IACpB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM0M,MAAM,GAAG;IACbC,SAAS,EAAE;MACTC,SAAS,EAAE,OAAO;MAClBC,UAAU,EAAE,mDAAmD;MAC/DC,OAAO,EAAE,MAAM;MACfC,UAAU,EAAE;IACd,CAAC;IACDC,OAAO,EAAE;MACPC,QAAQ,EAAE,QAAQ;MAClBC,MAAM,EAAE;IACV,CAAC;IACDC,MAAM,EAAE;MACNC,SAAS,EAAE,QAAQ;MACnBC,YAAY,EAAE;IAChB,CAAC;IACDC,KAAK,EAAE;MACLC,QAAQ,EAAE,QAAQ;MAClBzM,KAAK,EAAE,SAAS;MAChBuM,YAAY,EAAE,MAAM;MACpBG,UAAU,EAAE;IACd,CAAC;IACDC,QAAQ,EAAE;MACR3M,KAAK,EAAE,SAAS;MAChByM,QAAQ,EAAE;IACZ,CAAC;IACDG,IAAI,EAAE;MACJC,OAAO,EAAE,MAAM;MACfC,mBAAmB,EAAE,sCAAsC;MAC3DC,GAAG,EAAE,MAAM;MACXR,YAAY,EAAE;IAChB,CAAC;IACDS,IAAI,EAAE;MACJjB,UAAU,EAAE,OAAO;MACnBkB,YAAY,EAAE,MAAM;MACpBjB,OAAO,EAAE,MAAM;MACfkB,SAAS,EAAE,8BAA8B;MACzCC,MAAM,EAAE,SAAS;MACjBC,UAAU,EAAE;IACd,CAAC;IACDC,UAAU,EAAE;MACVR,OAAO,EAAE,MAAM;MACfS,UAAU,EAAE,QAAQ;MACpBf,YAAY,EAAE,MAAM;MACpBE,QAAQ,EAAE,QAAQ;MAClBC,UAAU,EAAE;IACd,CAAC;IACDa,QAAQ,EAAE;MACRvN,KAAK,EAAE,SAAS;MAChBuM,YAAY,EAAE,MAAM;MACpBiB,UAAU,EAAE;IACd,CAAC;IACDC,MAAM,EAAE;MACN9L,KAAK,EAAE,MAAM;MACbqK,OAAO,EAAE,WAAW;MACpB0B,MAAM,EAAE,MAAM;MACdT,YAAY,EAAE,KAAK;MACnBP,UAAU,EAAE,KAAK;MACjBD,QAAQ,EAAE,MAAM;MAChBU,MAAM,EAAE,SAAS;MACjBnN,KAAK,EAAE;IACT,CAAC;IACD2N,UAAU,EAAE;MACVd,OAAO,EAAE,MAAM;MACfe,cAAc,EAAE,eAAe;MAC/BN,UAAU,EAAE,QAAQ;MACpBf,YAAY,EAAE,MAAM;MACpBsB,QAAQ,EAAE,MAAM;MAChBd,GAAG,EAAE;IACP,CAAC;IACDe,SAAS,EAAE;MACTjB,OAAO,EAAE,MAAM;MACfS,UAAU,EAAE,QAAQ;MACpBvB,UAAU,EAAE,MAAM;MAClB2B,MAAM,EAAE,MAAM;MACd1N,KAAK,EAAE,SAAS;MAChByM,QAAQ,EAAE,MAAM;MAChBU,MAAM,EAAE;IACV,CAAC;IACDY,SAAS,EAAE;MACTzB,SAAS,EAAE;IACb,CAAC;IACD0B,UAAU,EAAE;MACVnB,OAAO,EAAE,MAAM;MACfe,cAAc,EAAE,QAAQ;MACxBN,UAAU,EAAE,YAAY;MACxBP,GAAG,EAAE,MAAM;MACXc,QAAQ,EAAE;IACZ,CAAC;IACDI,cAAc,EAAE;MACdpB,OAAO,EAAE,MAAM;MACfqB,aAAa,EAAE,QAAQ;MACvBZ,UAAU,EAAE,QAAQ;MACpBP,GAAG,EAAE;IACP,CAAC;IACDoB,YAAY,EAAE;MACZtB,OAAO,EAAE,MAAM;MACfqB,aAAa,EAAE,QAAQ;MACvBZ,UAAU,EAAE,QAAQ;MACpBc,QAAQ,EAAE;IACZ,CAAC;IACDC,oBAAoB,EAAE;MACpBxB,OAAO,EAAE,MAAM;MACfC,mBAAmB,EAAE,0BAA0B;MAC/CwB,gBAAgB,EAAE,0BAA0B;MAC5C3M,KAAK,EAAEjF,QAAQ,GAAG,OAAO,GAAG,OAAO;MACnCkF,MAAM,EAAElF,QAAQ,GAAG,OAAO,GAAG,OAAO;MACpC+P,QAAQ,EAAE,MAAM;MAChBC,UAAU,EAAE,KAAK;MACjB1M,KAAK,EAAE;IACT,CAAC;IACD/C,KAAK,EAAE;MACL4P,OAAO,EAAE,MAAM;MACfC,mBAAmB,EAAE,gBAAgB;MACrCwB,gBAAgB,EAAE,gBAAgB;MAClC3M,KAAK,EAAEjF,QAAQ,GAAG,OAAO,GAAG,OAAO;MACnCkF,MAAM,EAAElF,QAAQ,GAAG,OAAO,GAAG,OAAO;MACpCgR,MAAM,EAAE,mBAAmB;MAC3BT,YAAY,EAAE,KAAK;MACnBsB,QAAQ,EAAE,QAAQ;MAClBrB,SAAS,EAAE,+BAA+B;MAC1CsB,UAAU,EAAE,QAAQ;MACpBC,OAAO,EAAE,QAAQ;MACjBL,QAAQ,EAAE;IACZ,CAAC;IACDnL,MAAM,EAAE;MACN4J,OAAO,EAAE,MAAM;MACfS,UAAU,EAAE,QAAQ;MACpBM,cAAc,EAAE,QAAQ;MACxBnB,QAAQ,EAAE/P,QAAQ,GAAG,QAAQ,GAAG,QAAQ;MACxCyQ,MAAM,EAAE,SAAS;MACjBC,UAAU,EAAE,gDAAgD;MAC5DsB,UAAU,EAAE,MAAM;MAClBhC,UAAU,EAAE,MAAM;MAClB/K,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,MAAM;MACd+M,QAAQ,EAAE,CAAC;MACX7C,SAAS,EAAE,CAAC;MACZ8C,SAAS,EAAE;IACb,CAAC;IACDC,OAAO,EAAE;MACPhC,OAAO,EAAE,MAAM;MACfqB,aAAa,EAAE,QAAQ;MACvBnB,GAAG,EAAE,MAAM;MACXpL,KAAK,EAAEjF,QAAQ,GAAG,MAAM,GAAG,OAAO;MAClCyP,QAAQ,EAAE;IACZ,CAAC;IACD2C,QAAQ,EAAE;MACR/C,UAAU,EAAE,OAAO;MACnBkB,YAAY,EAAE,MAAM;MACpBjB,OAAO,EAAE,MAAM;MACfkB,SAAS,EAAE;IACb,CAAC;IACD6B,SAAS,EAAE;MACTtC,QAAQ,EAAE,QAAQ;MAClBC,UAAU,EAAE,KAAK;MACjBH,YAAY,EAAE,MAAM;MACpBvM,KAAK,EAAE;IACT;EACF,CAAC;EAED,IAAIvC,QAAQ,KAAK,oBAAoB,EAAE;IACrC,MAAMsI,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;IAC9C,MAAMsC,UAAU,GAAGqH,MAAM,CAACC,IAAI,CAACxB,OAAO,CAAC9F,UAAU,CAAC;IAElD,oBACEtE,OAAA;MAAKG,KAAK,EAAE8P,MAAM,CAACC,SAAU;MAAAhK,QAAA,eAC3BlG,OAAA;QAAKG,KAAK,EAAE8P,MAAM,CAACM,OAAQ;QAAArK,QAAA,gBACzBlG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAAC+B,UAAW;UAAA9L,QAAA,gBAC5BlG,OAAA;YAAQG,KAAK,EAAE8P,MAAM,CAACkC,SAAU;YAACkB,OAAO,EAAE5D,UAAW;YAAAvJ,QAAA,gBACnDlG,OAAA,CAACP,WAAW;cAAC6T,IAAI,EAAE,EAAG;cAACnT,KAAK,EAAE;gBAACoT,WAAW,EAAE;cAAK;YAAE;cAAAlN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAExD;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACmC,SAAU;YAAAlM,QAAA,gBAC3BlG,OAAA;cAAIG,KAAK,EAAE;gBAAC2Q,QAAQ,EAAE,MAAM;gBAAEzM,KAAK,EAAE,SAAS;gBAAEuM,YAAY,EAAE;cAAK,CAAE;cAAA1K,QAAA,EAClEkE,OAAO,CAACzJ;YAAI;cAAA0F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACX,CAAC,eACLxG,OAAA;cAAGG,KAAK,EAAE;gBAACkE,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,EAAC;YAA8B;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC,eAENxG,OAAA;YAAAqG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eAENxG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACgB,IAAK;UAAA/K,QAAA,GACrB5B,UAAU,CAACoF,GAAG,CAAE2F,YAAY,IAAK;YAChC,MAAMhF,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAAC+K,YAAY,CAAC;YAClD,oBACErP,OAAA;cAAwBG,KAAK,EAAE8P,MAAM,CAACoB,IAAK;cAACgC,OAAO,EAAEA,CAAA,KAAMlE,aAAa,CAACnN,YAAY,EAAEqN,YAAY,CAAE;cAAAnJ,QAAA,gBACnGlG,OAAA;gBAAKG,KAAK,EAAE;kBAAC,GAAG8P,MAAM,CAACyB,UAAU;kBAAErN,KAAK,EAAE+F,OAAO,CAAC/F,KAAK,KAAK,OAAO,GAAG,SAAS,GAAG;gBAAS,CAAE;gBAAA6B,QAAA,gBAC3FlG,OAAA,CAACH,MAAM;kBAACyT,IAAI,EAAE;gBAAG;kBAAAjN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACpBxG,OAAA;kBAAIG,KAAK,EAAE;oBAACqT,UAAU,EAAE,MAAM;oBAAE1C,QAAQ,EAAE;kBAAQ,CAAE;kBAAA5K,QAAA,EAAEmE,SAAS,CAAC1J;gBAAI;kBAAA0F,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE,CAAC,eACNxG,OAAA;gBAAGG,KAAK,EAAE8P,MAAM,CAAC2B,QAAS;gBAAA1L,QAAA,GAAC,0CACe,EAACkE,OAAO,CAACzJ,IAAI,EAAC,8CACxD;cAAA;gBAAA0F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACJxG,OAAA;gBAAQG,KAAK,EAAE;kBAAC,GAAG8P,MAAM,CAAC6B,MAAM;kBAAE2B,eAAe,EAAErJ,OAAO,CAAC/F,KAAK,KAAK,OAAO,GAAG,SAAS,GAAG;gBAAS,CAAE;gBAAA6B,QAAA,EAAC;cAEvG;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA,GAVD6I,YAAY;cAAAhJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAWjB,CAAC;UAEV,CAAC,CAAC,eAGFxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACoB,IAAK;YAACgC,OAAO,EAAEA,CAAA,KAAM;cACtC,MAAMK,eAAe,GAAGpP,UAAU,CAAC2D,IAAI,CAAC0C,KAAK,CAAC1C,IAAI,CAAC2C,MAAM,CAAC,CAAC,GAAGtG,UAAU,CAACmG,MAAM,CAAC,CAAC;cACjF0E,aAAa,CAACnN,YAAY,EAAE0R,eAAe,CAAC;YAC9C,CAAE;YAAAxN,QAAA,gBACAlG,OAAA;cAAKG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAACyB,UAAU;gBAAErN,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,gBACnDlG,OAAA,CAACL,IAAI;gBAAC2T,IAAI,EAAE;cAAG;gBAAAjN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAClBxG,OAAA;gBAAIG,KAAK,EAAE;kBAACqT,UAAU,EAAE,MAAM;kBAAE1C,QAAQ,EAAE;gBAAQ,CAAE;gBAAA5K,QAAA,EAAC;cAAgB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvE,CAAC,eACNxG,OAAA;cAAGG,KAAK,EAAE8P,MAAM,CAAC2B,QAAS;cAAA1L,QAAA,EAAC;YAE3B;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACJxG,OAAA;cAAQG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAAC6B,MAAM;gBAAE2B,eAAe,EAAE;cAAS,CAAE;cAAAvN,QAAA,EAAC;YAE/D;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI1E,QAAQ,KAAK,MAAM,EAAE;IACvB,oBACE9B,OAAA;MAAKG,KAAK,EAAE8P,MAAM,CAACC,SAAU;MAAAhK,QAAA,eAC3BlG,OAAA;QAAKG,KAAK,EAAE8P,MAAM,CAACM,OAAQ;QAAArK,QAAA,gBACzBlG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACS,MAAO;UAAAxK,QAAA,gBACxBlG,OAAA;YAAIG,KAAK,EAAE8P,MAAM,CAACY,KAAM;YAAA3K,QAAA,EAAC;UAAqB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnDxG,OAAA;YAAGG,KAAK,EAAE8P,MAAM,CAACe,QAAS;YAAA9K,QAAA,EAAC;UAAmD;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/E,CAAC,eAENxG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACgB,IAAK;UAAA/K,QAAA,gBACtBlG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACoB,IAAK;YAACgC,OAAO,EAAEA,CAAA,KAAMlE,aAAa,CAAC,gBAAgB,CAAE;YAAAjJ,QAAA,gBACtElG,OAAA;cAAKG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAACyB,UAAU;gBAAErN,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,gBACnDlG,OAAA,CAACH,MAAM;gBAACyT,IAAI,EAAE;cAAG;gBAAAjN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACpBxG,OAAA;gBAAIG,KAAK,EAAE;kBAACqT,UAAU,EAAE;gBAAM,CAAE;gBAAAtN,QAAA,EAAC;cAAe;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClD,CAAC,eACNxG,OAAA;cAAGG,KAAK,EAAE8P,MAAM,CAAC2B,QAAS;cAAA1L,QAAA,EAAC;YAAkG;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACjIxG,OAAA;cAAQG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAAC6B,MAAM;gBAAE2B,eAAe,EAAE;cAAS,CAAE;cAAAvN,QAAA,EAAC;YAE/D;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACoB,IAAK;YAACgC,OAAO,EAAEA,CAAA,KAAMlE,aAAa,CAAC,YAAY,CAAE;YAAAjJ,QAAA,gBAClElG,OAAA;cAAKG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAACyB,UAAU;gBAAErN,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,gBACnDlG,OAAA,CAACJ,QAAQ;gBAAC0T,IAAI,EAAE;cAAG;gBAAAjN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACtBxG,OAAA;gBAAIG,KAAK,EAAE;kBAACqT,UAAU,EAAE;gBAAM,CAAE;gBAAAtN,QAAA,EAAC;cAAW;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9C,CAAC,eACNxG,OAAA;cAAGG,KAAK,EAAE8P,MAAM,CAAC2B,QAAS;cAAA1L,QAAA,EAAC;YAA6G;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAC5IxG,OAAA;cAAQG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAAC6B,MAAM;gBAAE2B,eAAe,EAAE;cAAS,CAAE;cAAAvN,QAAA,EAAC;YAE/D;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACoB,IAAK;YAACgC,OAAO,EAAEA,CAAA,KAAMlE,aAAa,CAAC,cAAc,CAAE;YAAAjJ,QAAA,gBACpElG,OAAA;cAAKG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAACyB,UAAU;gBAAErN,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,gBACnDlG,OAAA,CAACL,IAAI;gBAAC2T,IAAI,EAAE;cAAG;gBAAAjN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAClBxG,OAAA;gBAAIG,KAAK,EAAE;kBAACqT,UAAU,EAAE;gBAAM,CAAE;gBAAAtN,QAAA,EAAC;cAAa;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChD,CAAC,eACNxG,OAAA;cAAGG,KAAK,EAAE8P,MAAM,CAAC2B,QAAS;cAAA1L,QAAA,EAAC;YAAqG;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACpIxG,OAAA;cAAQG,KAAK,EAAE;gBAAC,GAAG8P,MAAM,CAAC6B,MAAM;gBAAE2B,eAAe,EAAE;cAAS,CAAE;cAAAvN,QAAA,EAAC;YAE/D;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENxG,OAAA;UAAKG,KAAK,EAAE;YAACiQ,UAAU,EAAE,OAAO;YAAEkB,YAAY,EAAE,MAAM;YAAEjB,OAAO,EAAE,MAAM;YAAEkB,SAAS,EAAE;UAA8B,CAAE;UAAArL,QAAA,gBAClHlG,OAAA;YAAIG,KAAK,EAAE;cAAC2Q,QAAQ,EAAE,QAAQ;cAAEF,YAAY,EAAE,MAAM;cAAEvM,KAAK,EAAE;YAAS,CAAE;YAAA6B,QAAA,EAAC;UAAY;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC1FxG,OAAA;YAAKG,KAAK,EAAE;cAAC+Q,OAAO,EAAE,MAAM;cAAEC,mBAAmB,EAAE,sCAAsC;cAAEC,GAAG,EAAE;YAAM,CAAE;YAAAlL,QAAA,gBACtGlG,OAAA;cAAAkG,QAAA,gBACElG,OAAA;gBAAIG,KAAK,EAAE;kBAAC4Q,UAAU,EAAE,KAAK;kBAAEH,YAAY,EAAE,MAAM;kBAAEvM,KAAK,EAAE;gBAAS,CAAE;gBAAA6B,QAAA,EAAC;cAAwB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACrGxG,OAAA;gBAAGG,KAAK,EAAE;kBAACkE,KAAK,EAAE,SAAS;kBAAEyM,QAAQ,EAAE,QAAQ;kBAAEe,UAAU,EAAE;gBAAK,CAAE;gBAAA3L,QAAA,EAAC;cAA+F;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrK,CAAC,eACNxG,OAAA;cAAAkG,QAAA,gBACElG,OAAA;gBAAIG,KAAK,EAAE;kBAAC4Q,UAAU,EAAE,KAAK;kBAAEH,YAAY,EAAE,MAAM;kBAAEvM,KAAK,EAAE;gBAAS,CAAE;gBAAA6B,QAAA,EAAC;cAAqB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClGxG,OAAA;gBAAGG,KAAK,EAAE;kBAACkE,KAAK,EAAE,SAAS;kBAAEyM,QAAQ,EAAE,QAAQ;kBAAEe,UAAU,EAAE;gBAAK,CAAE;gBAAA3L,QAAA,EAAC;cAA0F;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChK,CAAC,eACNxG,OAAA;cAAAkG,QAAA,gBACElG,OAAA;gBAAIG,KAAK,EAAE;kBAAC4Q,UAAU,EAAE,KAAK;kBAAEH,YAAY,EAAE,MAAM;kBAAEvM,KAAK,EAAE;gBAAS,CAAE;gBAAA6B,QAAA,EAAC;cAAqB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClGxG,OAAA;gBAAGG,KAAK,EAAE;kBAACkE,KAAK,EAAE,SAAS;kBAAEyM,QAAQ,EAAE,QAAQ;kBAAEe,UAAU,EAAE;gBAAK,CAAE;gBAAA3L,QAAA,EAAC;cAAmF;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzJ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNxG,OAAA;YAAKG,KAAK,EAAE;cAACwT,SAAS,EAAE,MAAM;cAAEtD,OAAO,EAAE,MAAM;cAAEoD,eAAe,EAAE,SAAS;cAAEnC,YAAY,EAAE,KAAK;cAAES,MAAM,EAAE;YAAmB,CAAE;YAAA7L,QAAA,eAC7HlG,OAAA;cAAGG,KAAK,EAAE;gBAACkE,KAAK,EAAE,SAAS;gBAAEyM,QAAQ,EAAE,QAAQ;gBAAEH,SAAS,EAAE;cAAQ,CAAE;cAAAzK,QAAA,gBACpElG,OAAA;gBAAAkG,QAAA,EAAQ;cAAO;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,+IAC1B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,MAAM4D,OAAO,GAAGjG,gBAAgB,CAACnC,YAAY,CAAC;EAC9C,MAAMqI,SAAS,GAAGD,OAAO,CAAC9F,UAAU,CAACpC,iBAAiB,CAAC;EAEvD,oBACElC,OAAA;IAAKG,KAAK,EAAE8P,MAAM,CAACC,SAAU;IAAAhK,QAAA,eAC3BlG,OAAA;MAAKG,KAAK,EAAE8P,MAAM,CAACM,OAAQ;MAAArK,QAAA,gBACzBlG,OAAA;QAAKG,KAAK,EAAE8P,MAAM,CAAC+B,UAAW;QAAA9L,QAAA,gBAC5BlG,OAAA;UAAQG,KAAK,EAAE8P,MAAM,CAACkC,SAAU;UAACkB,OAAO,EAAE5D,UAAW;UAAAvJ,QAAA,gBACnDlG,OAAA,CAACP,WAAW;YAAC6T,IAAI,EAAE,EAAG;YAACnT,KAAK,EAAE;cAACoT,WAAW,EAAE;YAAK;UAAE;YAAAlN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAExD;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAETxG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACmC,SAAU;UAAAlM,QAAA,gBAC3BlG,OAAA;YAAIG,KAAK,EAAE;cAAC2Q,QAAQ,EAAE,MAAM;cAAEzM,KAAK,EAAE,SAAS;cAAEuM,YAAY,EAAE;YAAK,CAAE;YAAA1K,QAAA,EAClEkE,OAAO,CAACzJ;UAAI;YAAA0F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACX,CAAC,eACLxG,OAAA;YAAGG,KAAK,EAAE;cAACkE,KAAK,EAAE,SAAS;cAAEyM,QAAQ,EAAE,MAAM;cAAEC,UAAU,EAAE;YAAK,CAAE;YAAA7K,QAAA,EAC/DmE,SAAS,CAAC1J;UAAI;YAAA0F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd,CAAC,eACJxG,OAAA;YAAGG,KAAK,EAAE;cAACkE,KAAK,EAAE,SAAS;cAAEyM,QAAQ,EAAE;YAAQ,CAAE;YAAA5K,QAAA,GAAC,aAAW,EAACkE,OAAO,CAAC/F,KAAK;UAAA;YAAAgC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7E,CAAC,eAENxG,OAAA;UAAKG,KAAK,EAAE;YAAC+Q,OAAO,EAAE,MAAM;YAAEE,GAAG,EAAE;UAAM,CAAE;UAAAlL,QAAA,gBACzClG,OAAA;YACEG,KAAK,EAAE;cACL,GAAG8P,MAAM,CAACkC,SAAS;cACnByB,OAAO,EAAExQ,SAAS,CAACqH,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG;cACvC+G,MAAM,EAAEpO,SAAS,CAACqH,MAAM,GAAG,CAAC,GAAG,SAAS,GAAG;YAC7C,CAAE;YACF4I,OAAO,EAAEjQ,SAAS,CAACqH,MAAM,GAAG,CAAC,GAAGU,YAAY,GAAG0I,SAAU;YACzDC,QAAQ,EAAE1Q,SAAS,CAACqH,MAAM,KAAK,CAAE;YAAAvE,QAAA,gBAEjClG,OAAA,CAACF,KAAK;cAACwT,IAAI,EAAE,EAAG;cAACnT,KAAK,EAAE;gBAACoT,WAAW,EAAE;cAAK;YAAE;cAAAlN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,QAElD;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETxG,OAAA;YAAQG,KAAK,EAAE8P,MAAM,CAACkC,SAAU;YAACkB,OAAO,EAAE7D,SAAU;YAAAtJ,QAAA,gBAClDlG,OAAA,CAACN,SAAS;cAAC4T,IAAI,EAAE,EAAG;cAACnT,KAAK,EAAE;gBAACoT,WAAW,EAAE;cAAK;YAAE;cAAAlN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,SAEtD;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENxG,OAAA;QAAKG,KAAK,EAAE8P,MAAM,CAACoC,UAAW;QAAAnM,QAAA,gBAC5BlG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACqC,cAAe;UAAApM,QAAA,eAChClG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACuC,YAAa;YAAAtM,QAAA,GAE7BlE,YAAY,iBACXhC,OAAA;cAAKG,KAAK,EAAE;gBACVyQ,YAAY,EAAE,MAAM;gBACpBD,SAAS,EAAE,QAAQ;gBACnBtM,KAAK,EAAEnB,WAAW,GAAG,SAAS,GAAG,SAAS;gBAC1C4N,QAAQ,EAAE,QAAQ;gBAClBC,UAAU,EAAE,KAAK;gBACjBV,OAAO,EAAEnN,WAAW,GAAG,UAAU,GAAG,GAAG;gBACvCuQ,eAAe,EAAEvQ,WAAW,GAAG,SAAS,GAAG,aAAa;gBACxDoO,YAAY,EAAEpO,WAAW,GAAG,KAAK,GAAG,GAAG;gBACvC6O,MAAM,EAAE7O,WAAW,GAAG,mBAAmB,GAAG;cAC9C,CAAE;cAAAgD,QAAA,EACChD,WAAW,GAAG,kEAAkE,GAC/EiB,gBAAgB,CAACnC,YAAY,CAAC,CAACqC,KAAK,KAAK,OAAO,GAC9C,6CAA6C,GAC7C;YACH;cAAAgC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CACN,eAGDxG,OAAA;cAAKG,KAAK,EAAE8P,MAAM,CAACyC,oBAAqB;cAAAxM,QAAA,GAErC6N,KAAK,CAAC1H,IAAI,CAAC;gBAAC5B,MAAM,EAAE;cAAC,CAAC,EAAE,CAACuJ,CAAC,EAAEC,CAAC,KAAK;gBAAA,IAAAC,sBAAA;gBACjC,MAAMC,IAAI,GAAGnS,YAAY,IAAI,EAAAkS,sBAAA,GAAA/P,gBAAgB,CAACnC,YAAY,CAAC,cAAAkS,sBAAA,uBAA9BA,sBAAA,CAAgC7P,KAAK,MAAK,OAAO,GAC1E8C,MAAM,CAACC,YAAY,CAAC,GAAG,GAAG6M,CAAC,CAAC,CAAC;gBAAA,EAC7B9M,MAAM,CAACC,YAAY,CAAC,EAAE,GAAG6M,CAAC,CAAC,CAAC,CAAE;gBAClC,oBACEjU,OAAA;kBAAsBG,KAAK,EAAE;oBAC3B0S,UAAU,EAAEoB,CAAC,GAAG,CAAC;oBACjBnB,OAAO,EAAE,CAAC;oBACV5B,OAAO,EAAE,MAAM;oBACfS,UAAU,EAAE,QAAQ;oBACpBM,cAAc,EAAE;kBAClB,CAAE;kBAAA/L,QAAA,EACCiO;gBAAI,GAPG,OAAOF,CAAC,EAAE;kBAAA5N,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAQf,CAAC;cAEV,CAAC,CAAC,EAGDuN,KAAK,CAAC1H,IAAI,CAAC;gBAAC5B,MAAM,EAAE;cAAC,CAAC,EAAE,CAACuJ,CAAC,EAAEC,CAAC,KAAK;gBAAA,IAAAG,sBAAA;gBACjC,MAAMC,IAAI,GAAGrS,YAAY,IAAI,EAAAoS,sBAAA,GAAAjQ,gBAAgB,CAACnC,YAAY,CAAC,cAAAoS,sBAAA,uBAA9BA,sBAAA,CAAgC/P,KAAK,MAAK,OAAO,GAAG4P,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGA,CAAC;gBAC9F,oBACEjU,OAAA;kBAAuBG,KAAK,EAAE;oBAC5B0S,UAAU,EAAE,CAAC;oBACbC,OAAO,EAAEmB,CAAC,GAAG,CAAC;oBACd/C,OAAO,EAAE,MAAM;oBACfS,UAAU,EAAE,QAAQ;oBACpBM,cAAc,EAAE;kBAClB,CAAE;kBAAA/L,QAAA,EACCmO;gBAAI,GAPG,QAAQJ,CAAC,EAAE;kBAAA5N,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAQhB,CAAC;cAEV,CAAC,CAAC,eAGFxG,OAAA;gBAAKG,KAAK,EAAE8P,MAAM,CAAC3O,KAAM;gBAACgT,WAAW,EAAE3G,eAAgB;gBAAC4G,WAAW,EAAE3G,eAAgB;gBAAA1H,QAAA,GAClF5E,KAAK,CAACkT,OAAO,CAAC,CAACzN,GAAG,EAAE0N,QAAQ,KAC3B1N,GAAG,CAAC2C,GAAG,CAAC,CAAClE,KAAK,EAAEkP,QAAQ,KAAK;kBAC3B;kBACA,MAAM,CAAC/H,UAAU,EAAEC,UAAU,CAAC,GAAG9F,qBAAqB,CAAC2N,QAAQ,EAAEC,QAAQ,CAAC;kBAC1E,MAAMC,aAAa,GAAG,CAAChI,UAAU,GAAGC,UAAU,IAAI,CAAC,KAAK,CAAC;kBACzD,MAAMgI,UAAU,GAAGpT,cAAc,IAAIA,cAAc,CAAC,CAAC,CAAC,KAAKiT,QAAQ,IAAIjT,cAAc,CAAC,CAAC,CAAC,KAAKkT,QAAQ;kBACrG,MAAMG,UAAU,GAAGnS,YAAY,IAAIA,YAAY,CAACiF,OAAO,KAAK8M,QAAQ,IAAI/R,YAAY,CAACkF,OAAO,KAAK8M,QAAQ;;kBAEzG;kBACA,IAAIjB,eAAe;kBACnB,IAAImB,UAAU,EAAE;oBACdnB,eAAe,GAAG,SAAS,CAAC,CAAC;kBAC/B,CAAC,MAAM;oBACLA,eAAe,GAAGkB,aAAa,GAAG,SAAS,GAAG,SAAS,CAAC,CAAC;kBAC3D;kBAEA,oBACE3U,OAAA;oBAEE,eAAa,GAAG2M,UAAU,IAAIC,UAAU,EAAG;oBAC3CzM,KAAK,EAAE;sBACL+Q,OAAO,EAAE,MAAM;sBACfS,UAAU,EAAE,QAAQ;sBACpBM,cAAc,EAAE,QAAQ;sBACxBnB,QAAQ,EAAE/P,QAAQ,GAAG,QAAQ,GAAG,QAAQ;sBACxCyQ,MAAM,EAAEhM,KAAK,GAAG,SAAS,GAAG,SAAS;sBACrCiM,UAAU,EAAE,gDAAgD;sBAC5DsB,UAAU,EAAE,MAAM;sBAClBhC,UAAU,EAAE,MAAM;sBAClB/K,KAAK,EAAE,MAAM;sBACbC,MAAM,EAAE,MAAM;sBACd+M,QAAQ,EAAE,CAAC;sBACX7C,SAAS,EAAE,CAAC;sBACZ8C,SAAS,EAAE,YAAY;sBACvBQ,eAAe;sBACf1B,MAAM,EAAE6C,UAAU,GAAG,mBAAmB,GAAG,MAAM;sBACjD;sBACA/B,UAAU,EAAEjG,UAAU,GAAG,CAAC;sBAC1BkG,OAAO,EAAEnG,UAAU,GAAG,CAAC;sBACvBiH,OAAO,EAAEiB,UAAU,GAAG,GAAG,GAAG,CAAC;sBAC7B;sBACAC,kBAAkB,EAAE,MAAM;sBAC1BC,gBAAgB,EAAE,MAAM;sBACxBC,WAAW,EAAE;oBACf,CAAE;oBACFC,WAAW,EAAGvI,CAAC,IAAKD,eAAe,CAACC,CAAC,EAAEC,UAAU,EAAEC,UAAU,CAAE;oBAC/DsI,SAAS,EAAGxI,CAAC,IAAKmB,aAAa,CAACnB,CAAC,EAAEC,UAAU,EAAEC,UAAU,CAAE;oBAC3DuI,YAAY,EAAGzI,CAAC,IAAKgB,gBAAgB,CAAChB,CAAC,EAAEC,UAAU,EAAEC,UAAU,CAAE;oBACjEwI,UAAU,EAAG1I,CAAC,IAAKyB,cAAc,CAACzB,CAAC,EAAEC,UAAU,EAAEC,UAAU,CAAE;oBAC7DyG,OAAO,EAAEA,CAAA,KAAMrE,iBAAiB,CAACrC,UAAU,EAAEC,UAAU,CAAE;oBACzDyI,aAAa,EAAEA,CAAA,KAAM;sBACnB1S,eAAe,CAAC,IAAI,CAAC;sBACrBlB,iBAAiB,CAAC,IAAI,CAAC;oBACzB,CAAE;oBACF6T,YAAY,EAAG5I,CAAC,IAAK;sBACnB,IAAI,CAACkI,UAAU,IAAI,CAAClS,YAAY,EAAE;wBAChCgK,CAAC,CAAC6I,MAAM,CAACpV,KAAK,CAACsT,eAAe,GAAGkB,aAAa,GAAG,SAAS,GAAG,SAAS;sBACxE;oBACF,CAAE;oBACFa,YAAY,EAAG9I,CAAC,IAAK;sBACnB,IAAI,CAACkI,UAAU,IAAI,CAAClS,YAAY,EAAE;wBAChCgK,CAAC,CAAC6I,MAAM,CAACpV,KAAK,CAACsT,eAAe,GAAGkB,aAAa,GAAG,SAAS,GAAG,SAAS;sBACxE;oBACF,CAAE;oBAAAzO,QAAA,EAEDV,KAAK,IAAI,CAACqP,UAAU,iBACnB7U,OAAA;sBACEyV,SAAS,EAAE,eAAe/P,YAAY,CAACF,KAAK,CAAC,GAAG,mBAAmB,GAAG,mBAAmB,EAAG;sBAC5FrF,KAAK,EAAE;wBACL6F,KAAK,EAAE,KAAK;wBACZC,MAAM,EAAE,KAAK;wBACbiL,OAAO,EAAE,MAAM;wBACfS,UAAU,EAAE,QAAQ;wBACpBM,cAAc,EAAE;sBAClB,CAAE;sBAAA/L,QAAA,EAEDX,WAAW,CAACC,KAAK;oBAAC;sBAAAa,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChB;kBACN,GA5DI,GAAGiO,QAAQ,IAAIC,QAAQ,EAAE;oBAAArO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OA6D3B,CAAC;gBAEV,CAAC,CACH,CAAC,EAGAxD,QAAQ,iBACPhD,OAAA;kBAAKG,KAAK,EAAE;oBACVsS,QAAQ,EAAE,UAAU;oBACpBhF,GAAG,EAAE,CAAC;oBACND,IAAI,EAAE,CAAC;oBACPxH,KAAK,EAAE,MAAM;oBACbC,MAAM,EAAE,MAAM;oBACdyP,aAAa,EAAE,MAAM;oBACrBC,MAAM,EAAE;kBACV,CAAE;kBAAAzP,QAAA,eACAlG,OAAA;oBAAKG,KAAK,EAAE;sBAAE6F,KAAK,EAAE,MAAM;sBAAEC,MAAM,EAAE;oBAAO,CAAE;oBAAAC,QAAA,gBAC5ClG,OAAA;sBAAAkG,QAAA,eACElG,OAAA;wBAAQiE,EAAE,EAAC,WAAW;wBAAC2R,WAAW,EAAC,IAAI;wBAACC,YAAY,EAAC,GAAG;wBAChDC,IAAI,EAAC,GAAG;wBAACC,IAAI,EAAC,KAAK;wBAACC,MAAM,EAAC,MAAM;wBAAA9P,QAAA,eACvClG,OAAA;0BAASiW,MAAM,EAAC,kBAAkB;0BAAC9P,IAAI,EAAC,SAAS;0BAAC+P,MAAM,EAAC,SAAS;0BAACC,WAAW,EAAC;wBAAG;0BAAA9P,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAC;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAC9E;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACL,CAAC,eACPxG,OAAA;sBACEoW,EAAE,EAAE,GAAG,CAACpT,QAAQ,CAACqJ,IAAI,CAACrF,GAAG,GAAG,GAAG,IAAI,IAAI,GAAI;sBAC3CqP,EAAE,EAAE,GAAG,CAACrT,QAAQ,CAACqJ,IAAI,CAACtF,GAAG,GAAG,GAAG,IAAI,IAAI,GAAI;sBAC3CuP,EAAE,EAAE,GAAG,CAACtT,QAAQ,CAACsJ,EAAE,CAACtF,GAAG,GAAG,GAAG,IAAI,IAAI,GAAI;sBACzCuP,EAAE,EAAE,GAAG,CAACvT,QAAQ,CAACsJ,EAAE,CAACvF,GAAG,GAAG,GAAG,IAAI,IAAI,GAAI;sBACzCmP,MAAM,EAAC,SAAS;sBAChBC,WAAW,EAAC,GAAG;sBACfK,SAAS,EAAC;oBAAiB;sBAAAnQ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC5B,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CACN,EAGA9D,YAAY,iBACX1C,OAAA;kBAAKG,KAAK,EAAE;oBACVsS,QAAQ,EAAE,OAAO;oBACjBiD,aAAa,EAAE,MAAM;oBACrB1P,KAAK,EAAEjF,QAAQ,GAAG,MAAM,GAAG,MAAM;oBACjCkF,MAAM,EAAElF,QAAQ,GAAG,MAAM,GAAG,MAAM;oBAClC4U,MAAM,EAAE,IAAI;oBACZnI,IAAI,EAAE,GAAG5K,UAAU,CAACE,CAAC,IAAI;oBACzB2K,GAAG,EAAE,GAAG7K,UAAU,CAACG,CAAC,IAAI;oBACxB0T,SAAS,EAAE;kBACb,CAAE;kBAAAvQ,QAAA,eACAlG,OAAA;oBACEyV,SAAS,EAAE,eAAe/P,YAAY,CAAChD,YAAY,CAAC8C,KAAK,CAAC,GAAG,mBAAmB,GAAG,mBAAmB,EAAG;oBACzGrF,KAAK,EAAE;sBACL6F,KAAK,EAAE,MAAM;sBACbC,MAAM,EAAE,MAAM;sBACdiL,OAAO,EAAE,MAAM;sBACfS,UAAU,EAAE,QAAQ;sBACpBM,cAAc,EAAE;oBAClB,CAAE;oBAAA/L,QAAA,EAEDX,WAAW,CAAC7C,YAAY,CAAC8C,KAAK;kBAAC;oBAAAa,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC7B;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CACN;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,EAGLuN,KAAK,CAAC1H,IAAI,CAAC;gBAAC5B,MAAM,EAAE;cAAC,CAAC,EAAE,CAACuJ,CAAC,EAAEC,CAAC,KAAK;gBAAA,IAAAyC,sBAAA;gBACjC,MAAMrC,IAAI,GAAGrS,YAAY,IAAI,EAAA0U,sBAAA,GAAAvS,gBAAgB,CAACnC,YAAY,CAAC,cAAA0U,sBAAA,uBAA9BA,sBAAA,CAAgCrS,KAAK,MAAK,OAAO,GAAG4P,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGA,CAAC;gBAC9F,oBACEjU,OAAA;kBAAwBG,KAAK,EAAE;oBAC7B0S,UAAU,EAAE,EAAE;oBACdC,OAAO,EAAEmB,CAAC,GAAG,CAAC;oBACd/C,OAAO,EAAE,MAAM;oBACfS,UAAU,EAAE,QAAQ;oBACpBM,cAAc,EAAE;kBAClB,CAAE;kBAAA/L,QAAA,EACCmO;gBAAI,GAPG,SAASJ,CAAC,EAAE;kBAAA5N,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAQjB,CAAC;cAEV,CAAC,CAAC,EAGDuN,KAAK,CAAC1H,IAAI,CAAC;gBAAC5B,MAAM,EAAE;cAAC,CAAC,EAAE,CAACuJ,CAAC,EAAEC,CAAC,KAAK;gBAAA,IAAA0C,sBAAA;gBACjC,MAAMxC,IAAI,GAAGnS,YAAY,IAAI,EAAA2U,sBAAA,GAAAxS,gBAAgB,CAACnC,YAAY,CAAC,cAAA2U,sBAAA,uBAA9BA,sBAAA,CAAgCtS,KAAK,MAAK,OAAO,GAC1E8C,MAAM,CAACC,YAAY,CAAC,GAAG,GAAG6M,CAAC,CAAC,CAAC;gBAAA,EAC7B9M,MAAM,CAACC,YAAY,CAAC,EAAE,GAAG6M,CAAC,CAAC,CAAC,CAAE;gBAClC,oBACEjU,OAAA;kBAAyBG,KAAK,EAAE;oBAC9B0S,UAAU,EAAEoB,CAAC,GAAG,CAAC;oBACjBnB,OAAO,EAAE,EAAE;oBACX5B,OAAO,EAAE,MAAM;oBACfS,UAAU,EAAE,QAAQ;oBACpBM,cAAc,EAAE;kBAClB,CAAE;kBAAA/L,QAAA,EACCiO;gBAAI,GAPG,UAAUF,CAAC,EAAE;kBAAA5N,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAQlB,CAAC;cAEV,CAAC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENxG,OAAA;UAAKG,KAAK,EAAE8P,MAAM,CAACiD,OAAQ;UAAAhN,QAAA,gBACzBlG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACkD,QAAS;YAAAjN,QAAA,gBAC1BlG,OAAA;cAAIG,KAAK,EAAE8P,MAAM,CAACmD,SAAU;cAAAlN,QAAA,EAAC;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC7CxG,OAAA;cAAGG,KAAK,EAAE;gBAACyQ,YAAY,EAAE,KAAK;gBAAEvM,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,GAAC,gBACnC,eAAAlG,OAAA;gBAAMG,KAAK,EAAE;kBAACyW,aAAa,EAAE,YAAY;kBAAE7F,UAAU,EAAE,KAAK;kBAAE1M,KAAK,EAAE;gBAAS,CAAE;gBAAA6B,QAAA,EAAExE;cAAa;gBAAA2E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpH,CAAC,eACJxG,OAAA;cAAGG,KAAK,EAAE;gBAACkE,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,GAAC,QAAM,EAAC+B,IAAI,CAAC4O,IAAI,CAACjV,WAAW,CAAC6I,MAAM,GAAG,CAAC,CAAC;YAAA;cAAApE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3ExG,OAAA;cAAGG,KAAK,EAAE;gBAACwT,SAAS,EAAE,KAAK;gBAAE5C,UAAU,EAAE,KAAK;gBAAE1M,KAAK,EACjD+F,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAO,IACtD0I,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAQ,GAAI,SAAS,GAAG;cAC3E,CAAE;cAAAwE,QAAA,EACGkE,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAO,IACtD0I,OAAO,CAAC/F,KAAK,KAAK,OAAO,IAAI3C,aAAa,KAAK,OAAQ,GAAI,YAAY,GAAG;YAAsB;cAAA2E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAENxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACkD,QAAS;YAAAjN,QAAA,gBAC1BlG,OAAA;cAAIG,KAAK,EAAE8P,MAAM,CAACmD,SAAU;cAAAlN,QAAA,EAAC;YAAK;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACvCxG,OAAA;cAAGG,KAAK,EAAE;gBAAC2Q,QAAQ,EAAE,QAAQ;gBAAEC,UAAU,EAAE,MAAM;gBAAE1M,KAAK,EAAE,SAAS;gBAAEuM,YAAY,EAAE;cAAK,CAAE;cAAA1K,QAAA,GACvF5D,KAAK,CAACE,OAAO,EAAC,GAAC,EAACF,KAAK,CAACG,KAAK;YAAA;cAAA4D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3B,CAAC,eACJxG,OAAA;cAAGG,KAAK,EAAE;gBAAC2Q,QAAQ,EAAE,QAAQ;gBAAEzM,KAAK,EAAE;cAAS,CAAE;cAAA6B,QAAA,EAC9C5D,KAAK,CAACG,KAAK,GAAG,CAAC,GAAG,GAAGwF,IAAI,CAAC6O,KAAK,CAAExU,KAAK,CAACE,OAAO,GAAGF,KAAK,CAACG,KAAK,GAAI,GAAG,CAAC,YAAY,GAAG;YAAc;cAAA4D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,EAELpE,QAAQ,iBACPpC,OAAA;YAAKG,KAAK,EAAE;cACVmR,YAAY,EAAE,MAAM;cACpBjB,OAAO,EAAE,MAAM;cACfU,UAAU,EAAE,KAAK;cACjB0C,eAAe,EAAErR,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,GAAGzJ,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,GAAG,SAAS;cACpGxH,KAAK,EAAEjC,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,GAAGzJ,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,GAAG,SAAS;cAC1FkG,MAAM,EAAE3P,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,mBAAmB,GAAGzJ,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,mBAAmB,GAAG,mBAAmB;cACzH4K,SAAS,EAAErU,QAAQ,CAACyJ,QAAQ,CAAC,GAAG,CAAC,GAAG,aAAa,GAAG,UAAU;cAC9D4F,UAAU,EAAE;YACd,CAAE;YAAAvL,QAAA,gBACAlG,OAAA;cAAGG,KAAK,EAAE;gBAAEsQ,MAAM,EAAE;cAAE,CAAE;cAAAvK,QAAA,EAAE9D;YAAQ;cAAAiE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EACtCxD,QAAQ,iBACPhD,OAAA;cAAKG,KAAK,EAAE;gBAAEwT,SAAS,EAAE,MAAM;gBAAEzC,OAAO,EAAE,MAAM;gBAAEqB,aAAa,EAAE,QAAQ;gBAAEnB,GAAG,EAAE;cAAO,CAAE;cAAAlL,QAAA,gBACvFlG,OAAA;gBAAGG,KAAK,EAAE;kBACRsQ,MAAM,EAAE,CAAC;kBACTK,QAAQ,EAAE,QAAQ;kBAClBzM,KAAK,EAAE,SAAS;kBAChBoP,eAAe,EAAE,SAAS;kBAC1BpD,OAAO,EAAE,UAAU;kBACnBiB,YAAY,EAAE,KAAK;kBACnBS,MAAM,EAAE;gBACV,CAAE;gBAAA7L,QAAA,GAAC,+BACkB,EAAClD,QAAQ,CAACuJ,QAAQ,CAACxB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAC,MAAI,EAAC/H,QAAQ,CAACuJ,QAAQ,CAACxB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;cAAA;gBAAA1E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvF,CAAC,EACHpD,SAAS,CAACqH,MAAM,GAAG,CAAC,iBACnBzK,OAAA;gBACEG,KAAK,EAAE;kBACLkQ,OAAO,EAAE,UAAU;kBACnBoD,eAAe,EAAE,SAAS;kBAC1BpP,KAAK,EAAE,OAAO;kBACd0N,MAAM,EAAE,MAAM;kBACdT,YAAY,EAAE,KAAK;kBACnBE,MAAM,EAAE,SAAS;kBACjBV,QAAQ,EAAE,QAAQ;kBAClBC,UAAU,EAAE,KAAK;kBACjBG,OAAO,EAAE,MAAM;kBACfS,UAAU,EAAE,QAAQ;kBACpBM,cAAc,EAAE,QAAQ;kBACxBb,GAAG,EAAE;gBACP,CAAE;gBACFiC,OAAO,EAAElI,YAAa;gBAAAjF,QAAA,gBAEtBlG,OAAA,CAACF,KAAK;kBAACwT,IAAI,EAAE;gBAAG;kBAAAjN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,aAErB;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CACT;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CACN,eAEDxG,OAAA;YAAKG,KAAK,EAAE8P,MAAM,CAACkD,QAAS;YAAAjN,QAAA,gBAC1BlG,OAAA;cAAIG,KAAK,EAAE8P,MAAM,CAACmD,SAAU;cAAAlN,QAAA,EAAC;YAAY;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC9CxG,OAAA;cAAKG,KAAK,EAAE;gBAAC4W,SAAS,EAAE,OAAO;gBAAEC,SAAS,EAAE,MAAM;gBAAElG,QAAQ,EAAE;cAAQ,CAAE;cAAA5K,QAAA,EACrEtE,WAAW,CAAC6I,MAAM,KAAK,CAAC,gBACvBzK,OAAA;gBAAGG,KAAK,EAAE;kBAACkE,KAAK,EAAE,SAAS;kBAAE4S,SAAS,EAAE;gBAAQ,CAAE;gBAAA/Q,QAAA,EAAC;cAAY;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,GAEnE5E,WAAW,CAAC8H,GAAG,CAAC,CAACwN,IAAI,EAAEC,KAAK,kBAC1BnX,OAAA;gBAAiBG,KAAK,EAAE;kBAAC+Q,OAAO,EAAE,MAAM;kBAAEN,YAAY,EAAE;gBAAK,CAAE;gBAAA1K,QAAA,gBAC7DlG,OAAA;kBAAMG,KAAK,EAAE;oBAAC6F,KAAK,EAAE,MAAM;oBAAE3B,KAAK,EAAE;kBAAS,CAAE;kBAAA6B,QAAA,GAAE+B,IAAI,CAAC4O,IAAI,CAAC,CAACM,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,EAAC,GAAC;gBAAA;kBAAA9Q,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACpFxG,OAAA;kBAAMG,KAAK,EAAE;oBAACkE,KAAK,EAAE8S,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,SAAS,GAAG;kBAAS,CAAE;kBAAAjR,QAAA,EAC3DgR;gBAAI;kBAAA7Q,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACD,CAAC;cAAA,GAJC2Q,KAAK;gBAAA9Q,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAKV,CACN;YACF;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACtG,EAAA,CAz7DID,gBAAgB;AAAAmX,EAAA,GAAhBnX,gBAAgB;AA27DtB,eAAeA,gBAAgB;AAAC,IAAAmX,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}